{"version":3,"file":"chunks/app_actionCreators_pageFilters_tsx-app_actionCreators_tags_tsx-app_components_assigneeSelecto-6127d8.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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8BAA8B;AACpD;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0BAA0B;AACjF,uDAAuD,0BAA0B;AACjF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0BAA0B;AACjF,uDAAuD,0BAA0B;AACjF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,qBAAqB;AACrC;AACA;;AAEA;;AAEA;AACA,yBAAyB,yBAAyB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,qBAAqB;;AAErB,iCAAiC,yBAAyB;AAC1D;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,0CAA0C,uCAAuC;AACjF;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,iDAAiD,eAAe;AAChE,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,gBAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+BAA+B;AAC7D;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa;AACb;;AAEA;AACA,aAAa;AACb;;AAEA;AACA,aAAa;AACb;;AAEA;AACA,aAAa;AACb;;AAEA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC;;AAExC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,6CAA6C;AAC7C;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,iDAAiD;AACjD;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;;;AAGA,WAAW,kDAAkD;AAC7D,mCAAmC,uBAAuB;;AAE1D;;;AAGA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","sources":["webpack:///./app/actionCreators/group.tsx","webpack:///./app/actionCreators/pageFilters.tsx","webpack:///./app/actionCreators/savedSearches.tsx","webpack:///./app/actionCreators/tags.tsx","webpack:///./app/actionCreators/teams.tsx","webpack:///./app/actions/savedSearchesActions.tsx","webpack:///./app/components/assigneeSelector.tsx","webpack:///./app/components/avatar/actorAvatar.tsx","webpack:///./app/components/avatar/suggestedAvatarStack.tsx","webpack:///./app/components/calendar/index.tsx","webpack:///./app/components/charts/barChart.tsx","webpack:///./app/components/charts/baseChart.tsx","webpack:///./app/components/charts/components/grid.tsx","webpack:///./app/components/charts/components/legend.tsx","webpack:///./app/components/charts/components/markLine.tsx","webpack:///./app/components/charts/components/tooltip.tsx","webpack:///./app/components/charts/components/xAxis.tsx","webpack:///./app/components/charts/components/yAxis.tsx","webpack:///./app/components/charts/series/barSeries.tsx","webpack:///./app/components/charts/series/lineSeries.tsx","webpack:///./app/components/checkbox.tsx","webpack:///./app/components/dropdownLink.tsx","webpack:///./app/components/forms/apiForm.tsx","webpack:///./app/components/forms/checkboxField.tsx","webpack:///./app/components/forms/controls/radioBoolean.tsx","webpack:///./app/components/forms/datePickerField.tsx","webpack:///./app/components/forms/index.tsx","webpack:///./app/components/forms/radioBooleanField.tsx","webpack:///./app/components/highlight.tsx","webpack:///./app/components/hotkeysLabel.tsx","webpack:///./app/components/organizations/pageFilters/persistence.tsx","webpack:///./app/components/organizations/timeRangeSelector/timeRangeItemLabel.tsx","webpack:///./app/components/organizations/timeRangeSelector/utils.tsx","webpack:///./app/components/placeholder.tsx","webpack:///./app/components/searchSyntax/parser.tsx","webpack:///./app/components/searchSyntax/renderer.tsx","webpack:///./app/components/searchSyntax/utils.tsx","webpack:///./app/components/smartSearchBar/actions.tsx","webpack:///./app/components/smartSearchBar/index.tsx","webpack:///./app/components/smartSearchBar/searchBarDatePicker.tsx","webpack:///./app/components/smartSearchBar/searchBarFlyout.tsx","webpack:///./app/components/smartSearchBar/searchDropdown.tsx","webpack:///./app/components/smartSearchBar/searchHotkeysListener.tsx","webpack:///./app/components/smartSearchBar/types.tsx","webpack:///./app/components/smartSearchBar/utils.tsx","webpack:///./app/components/textOverflow.tsx","webpack:///./app/stores/alertStore.tsx","webpack:///./app/stores/groupStore.tsx","webpack:///./app/stores/memberListStore.tsx","webpack:///./app/stores/tagStore.tsx","webpack:///./app/utils/discover/urls.tsx","webpack:///./app/utils/getDynamicComponent.tsx","webpack:///./app/utils/getKeyCode.ts","webpack:///./app/utils/isActiveSuperuser.tsx","webpack:///./app/utils/teams.tsx","webpack:///./app/utils/useHotkeys.tsx","webpack:///./app/utils/useTeams.tsx","webpack:///./app/utils/withIssueTags.tsx","webpack:///./app/views/issueList/createSavedSearchModal.tsx","webpack:///./app/views/issueList/searchBar.tsx","webpack:///./app/views/issueList/utils.tsx","webpack:///./app/components/searchSyntax/grammar.pegjs"],"sourcesContent":["import * as Sentry from '@sentry/react';\nimport isNil from 'lodash/isNil';\n\nimport {Client, RequestCallbacks, RequestOptions} from 'sentry/api';\nimport GroupStore from 'sentry/stores/groupStore';\nimport {Actor, Group, Member, Note, User} from 'sentry/types';\nimport {buildTeamId, buildUserId} from 'sentry/utils';\nimport {uniqueId} from 'sentry/utils/guid';\n\ntype AssignedBy = 'suggested_assignee' | 'assignee_selector';\ntype AssignToUserParams = {\n  assignedBy: AssignedBy;\n  /**\n   * Issue id\n   */\n  id: string;\n  user: User | Actor;\n  member?: Member;\n};\n\nexport function assignToUser(params: AssignToUserParams) {\n  const api = new Client();\n\n  const endpoint = `/issues/${params.id}/`;\n\n  const id = uniqueId();\n\n  GroupStore.onAssignTo(id, params.id, {\n    email: (params.member && params.member.email) || '',\n  });\n\n  const request = api.requestPromise(endpoint, {\n    method: 'PUT',\n    // Sending an empty value to assignedTo is the same as \"clear\",\n    // so if no member exists, that implies that we want to clear the\n    // current assignee.\n    data: {\n      assignedTo: params.user ? buildUserId(params.user.id) : '',\n      assignedBy: params.assignedBy,\n    },\n  });\n\n  request\n    .then(data => {\n      GroupStore.onAssignToSuccess(id, params.id, data);\n    })\n    .catch(data => {\n      GroupStore.onAssignToError(id, params.id, data);\n    });\n\n  return request;\n}\n\nexport function clearAssignment(groupId: string, assignedBy: AssignedBy) {\n  const api = new Client();\n\n  const endpoint = `/issues/${groupId}/`;\n\n  const id = uniqueId();\n\n  GroupStore.onAssignTo(id, groupId, {\n    email: '',\n  });\n\n  const request = api.requestPromise(endpoint, {\n    method: 'PUT',\n    // Sending an empty value to assignedTo is the same as \"clear\"\n    data: {\n      assignedTo: '',\n      assignedBy,\n    },\n  });\n\n  request\n    .then(data => {\n      GroupStore.onAssignToSuccess(id, groupId, data);\n    })\n    .catch(data => {\n      GroupStore.onAssignToError(id, groupId, data);\n    });\n\n  return request;\n}\n\ntype AssignToActorParams = {\n  actor: Pick<Actor, 'id' | 'type'>;\n  assignedBy: AssignedBy;\n  /**\n   * Issue id\n   */\n  id: string;\n};\n\nexport function assignToActor({id, actor, assignedBy}: AssignToActorParams) {\n  const api = new Client();\n\n  const endpoint = `/issues/${id}/`;\n\n  const guid = uniqueId();\n  let actorId = '';\n\n  GroupStore.onAssignTo(guid, id, {email: ''});\n\n  switch (actor.type) {\n    case 'user':\n      actorId = buildUserId(actor.id);\n      break;\n\n    case 'team':\n      actorId = buildTeamId(actor.id);\n      break;\n\n    default:\n      Sentry.withScope(scope => {\n        scope.setExtra('actor', actor);\n        Sentry.captureException('Unknown assignee type');\n      });\n  }\n\n  return api\n    .requestPromise(endpoint, {\n      method: 'PUT',\n      data: {assignedTo: actorId, assignedBy},\n    })\n    .then(data => {\n      GroupStore.onAssignToSuccess(guid, id, data);\n    })\n    .catch(data => {\n      GroupStore.onAssignToSuccess(guid, id, data);\n    });\n}\n\nexport function deleteNote(api: Client, group: Group, id: string, _oldText: string) {\n  const restore = group.activity.find(activity => activity.id === id);\n  const index = GroupStore.removeActivity(group.id, id);\n\n  if (index === -1 || restore === undefined) {\n    // I dunno, the id wasn't found in the GroupStore\n    return Promise.reject(new Error('Group was not found in store'));\n  }\n\n  const promise = api.requestPromise(`/issues/${group.id}/comments/${id}/`, {\n    method: 'DELETE',\n  });\n\n  promise.catch(() => GroupStore.addActivity(group.id, restore, index));\n\n  return promise;\n}\n\nexport function createNote(api: Client, group: Group, note: Note) {\n  const promise = api.requestPromise(`/issues/${group.id}/comments/`, {\n    method: 'POST',\n    data: note,\n  });\n\n  promise.then(data => GroupStore.addActivity(group.id, data));\n\n  return promise;\n}\n\nexport function updateNote(\n  api: Client,\n  group: Group,\n  note: Note,\n  id: string,\n  oldText: string\n) {\n  GroupStore.updateActivity(group.id, id, {data: {text: note.text}});\n\n  const promise = api.requestPromise(`/issues/${group.id}/comments/${id}/`, {\n    method: 'PUT',\n    data: note,\n  });\n\n  promise.catch(() => GroupStore.updateActivity(group.id, id, {data: {text: oldText}}));\n\n  return promise;\n}\n\ntype ParamsType = {\n  environment?: string | string[] | null;\n  itemIds?: string[];\n  project?: number[] | null;\n  query?: string;\n};\n\ntype UpdateParams = ParamsType & {\n  orgId: string;\n  projectId?: string;\n};\n\ntype QueryArgs =\n  | {\n      query: string;\n      environment?: string | Array<string>;\n      project?: Array<number>;\n    }\n  | {\n      id: Array<number> | Array<string>;\n      environment?: string | Array<string>;\n      project?: Array<number>;\n    }\n  | {\n      environment?: string | Array<string>;\n      project?: Array<number>;\n    };\n\n/**\n * Converts input parameters to API-compatible query arguments\n */\nexport function paramsToQueryArgs(params: ParamsType): QueryArgs {\n  const p: QueryArgs = params.itemIds\n    ? {id: params.itemIds} // items matching array of itemids\n    : params.query\n    ? {query: params.query} // items matching search query\n    : {}; // all items\n\n  // only include environment if it is not null/undefined\n  if (params.query && !isNil(params.environment)) {\n    p.environment = params.environment;\n  }\n\n  // only include projects if it is not null/undefined/an empty array\n  if (params.project?.length) {\n    p.project = params.project;\n  }\n\n  // only include date filters if they are not null/undefined\n  if (params.query) {\n    ['start', 'end', 'period', 'utc'].forEach(prop => {\n      if (!isNil(params[prop])) {\n        p[prop === 'period' ? 'statsPeriod' : prop] = params[prop];\n      }\n    });\n  }\n  return p;\n}\n\nfunction getUpdateUrl({projectId, orgId}: UpdateParams) {\n  return projectId\n    ? `/projects/${orgId}/${projectId}/issues/`\n    : `/organizations/${orgId}/issues/`;\n}\n\nfunction chainUtil<Args extends any[]>(\n  ...funcs: Array<((...args: Args) => any) | undefined>\n) {\n  const filteredFuncs = funcs.filter(\n    (f): f is (...args: Args) => any => typeof f === 'function'\n  );\n  return (...args: Args): void => {\n    filteredFuncs.forEach(func => {\n      func.apply(funcs, args);\n    });\n  };\n}\n\nfunction wrapRequest(\n  api: Client,\n  path: string,\n  options: RequestOptions,\n  extraParams: RequestCallbacks = {}\n) {\n  options.success = chainUtil(options.success, extraParams.success);\n  options.error = chainUtil(options.error, extraParams.error);\n  options.complete = chainUtil(options.complete, extraParams.complete);\n\n  return api.request(path, options);\n}\n\ntype BulkDeleteParams = UpdateParams;\n\nexport function bulkDelete(\n  api: Client,\n  params: BulkDeleteParams,\n  options: RequestCallbacks\n) {\n  const {itemIds} = params;\n  const path = getUpdateUrl(params);\n\n  const query: QueryArgs = paramsToQueryArgs(params);\n  const id = uniqueId();\n\n  GroupStore.onDelete(id, itemIds);\n\n  return wrapRequest(\n    api,\n    path,\n    {\n      query,\n      method: 'DELETE',\n      success: response => {\n        GroupStore.onDeleteSuccess(id, itemIds, response);\n      },\n      error: error => {\n        GroupStore.onDeleteError(id, itemIds, error);\n      },\n    },\n    options\n  );\n}\n\ntype BulkUpdateParams = UpdateParams & {\n  data?: any;\n  failSilently?: boolean;\n};\n\nexport function bulkUpdate(\n  api: Client,\n  params: BulkUpdateParams,\n  options: RequestCallbacks\n) {\n  const {itemIds, failSilently, data} = params;\n  const path = getUpdateUrl(params);\n\n  const query: QueryArgs = paramsToQueryArgs(params);\n  const id = uniqueId();\n\n  GroupStore.onUpdate(id, itemIds, data);\n\n  return wrapRequest(\n    api,\n    path,\n    {\n      query,\n      method: 'PUT',\n      data,\n      success: response => {\n        GroupStore.onUpdateSuccess(id, itemIds, response);\n      },\n      error: () => {\n        GroupStore.onUpdateError(id, itemIds, !!failSilently);\n      },\n    },\n    options\n  );\n}\n\ntype MergeGroupsParams = UpdateParams;\n\nexport function mergeGroups(\n  api: Client,\n  params: MergeGroupsParams,\n  options: RequestCallbacks\n) {\n  const {itemIds} = params;\n  const path = getUpdateUrl(params);\n\n  const query: QueryArgs = paramsToQueryArgs(params);\n  const id = uniqueId();\n\n  GroupStore.onMerge(id, itemIds);\n\n  return wrapRequest(\n    api,\n    path,\n    {\n      query,\n      method: 'PUT',\n      data: {merge: 1},\n      success: response => {\n        GroupStore.onMergeSuccess(id, itemIds, response);\n      },\n      error: error => {\n        GroupStore.onMergeError(id, itemIds, error);\n      },\n    },\n    options\n  );\n}\n","import {InjectedRouter} from 'react-router';\nimport * as Sentry from '@sentry/react';\nimport {Location} from 'history';\nimport isInteger from 'lodash/isInteger';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport * as qs from 'query-string';\n\nimport PageFiltersActions from 'sentry/actions/pageFiltersActions';\nimport {\n  getDatetimeFromState,\n  getStateFromQuery,\n} from 'sentry/components/organizations/pageFilters/parse';\nimport {\n  getPageFilterStorage,\n  setPageFiltersStorage,\n} from 'sentry/components/organizations/pageFilters/persistence';\nimport {PageFiltersStringified} from 'sentry/components/organizations/pageFilters/types';\nimport {getDefaultSelection} from 'sentry/components/organizations/pageFilters/utils';\nimport {DATE_TIME_KEYS, URL_PARAM} from 'sentry/constants/pageFilters';\nimport OrganizationStore from 'sentry/stores/organizationStore';\nimport PageFiltersStore from 'sentry/stores/pageFiltersStore';\nimport {\n  DateString,\n  Environment,\n  MinimalProject,\n  Organization,\n  PageFilters,\n  PinnedPageFilter,\n  Project,\n} from 'sentry/types';\nimport {defined, valueIsEqual} from 'sentry/utils';\nimport {getUtcDateString} from 'sentry/utils/dates';\n\n/**\n * NOTE: this is the internal project.id, NOT the slug\n */\ntype ProjectId = string | number;\ntype EnvironmentId = Environment['id'];\n\ntype Options = {\n  /**\n   * Do not reset the `cursor` query parameter when updating page filters\n   */\n  keepCursor?: boolean;\n  /**\n   * Use Location.replace instead of push when updating the URL query state\n   */\n  replace?: boolean;\n  /**\n   * List of parameters to remove when changing URL params\n   */\n  resetParams?: string[];\n  /**\n   * Persist changes to the page filter selection into local storage\n   */\n  save?: boolean;\n};\n\n/**\n * This is the 'update' object used for updating the page filters. The types\n * here are a bit wider to allow for easy updates.\n */\ntype PageFiltersUpdate = {\n  end?: DateString;\n  environment?: string[] | null;\n  period?: string | null;\n  project?: Array<string | number> | null;\n  start?: DateString;\n  utc?: string | boolean | null;\n};\n\n/**\n * Represents the input for updating the date time of page filters\n */\ntype DateTimeUpdate = Pick<PageFiltersUpdate, 'start' | 'end' | 'period' | 'utc'>;\n\n/**\n * Output object used for updating query parameters\n */\ntype PageFilterQuery = PageFiltersStringified & Record<string, Location['query'][string]>;\n\n/**\n * This can be null which will not perform any router side effects, and instead updates store.\n */\ntype Router = InjectedRouter | null | undefined;\n\n/**\n * Reset values in the page filters store\n */\nexport function resetPageFilters() {\n  PageFiltersActions.reset();\n}\n\nfunction getProjectIdFromProject(project: MinimalProject) {\n  return parseInt(project.id, 10);\n}\n\n/**\n * Merges two date time objects, where the `base` object takes precedence, and\n * the `fallback` values are used when the base values are null or undefined.\n */\nfunction mergeDatetime(\n  base: PageFilters['datetime'],\n  fallback?: Partial<PageFilters['datetime']>\n) {\n  const datetime: PageFilters['datetime'] = {\n    start: base.start ?? fallback?.start ?? null,\n    end: base.end ?? fallback?.end ?? null,\n    period: base.period ?? fallback?.period ?? null,\n    utc: base.utc ?? fallback?.utc ?? null,\n  };\n\n  return datetime;\n}\n\nexport type InitializeUrlStateParams = {\n  memberProjects: Project[];\n  organization: Organization;\n  queryParams: Location['query'];\n  router: InjectedRouter;\n  shouldEnforceSingleProject: boolean;\n  defaultSelection?: Partial<PageFilters>;\n  forceProject?: MinimalProject | null;\n  shouldForceProject?: boolean;\n  showAbsolute?: boolean;\n  /**\n   * When used with shouldForceProject it will not persist the project id\n   * to url query parameters on load. This is useful when global selection header\n   * is used for display purposes rather than selection.\n   */\n  skipInitializeUrlParams?: boolean;\n\n  /**\n   * Skip loading from local storage\n   * An example is Issue Details, in the case where it is accessed directly (e.g. from email).\n   * We do not want to load the user's last used env/project in this case, otherwise will\n   * lead to very confusing behavior.\n   */\n  skipLoadLastUsed?: boolean;\n};\n\nexport function initializeUrlState({\n  organization,\n  queryParams,\n  router,\n  memberProjects,\n  skipLoadLastUsed,\n  shouldForceProject,\n  shouldEnforceSingleProject,\n  defaultSelection,\n  forceProject,\n  showAbsolute = true,\n  skipInitializeUrlParams = false,\n}: InitializeUrlStateParams) {\n  const orgSlug = organization.slug;\n\n  const parsed = getStateFromQuery(queryParams, {\n    allowAbsoluteDatetime: showAbsolute,\n    allowEmptyPeriod: true,\n  });\n\n  const {datetime: defaultDatetime, ...defaultFilters} = getDefaultSelection();\n  const {datetime: customDatetime, ...customDefaultFilters} = defaultSelection ?? {};\n\n  const pageFilters: PageFilters = {\n    ...defaultFilters,\n    ...customDefaultFilters,\n    datetime: mergeDatetime(parsed, customDatetime),\n  };\n\n  // Use period from default if we don't have a period set\n  pageFilters.datetime.period ??= defaultDatetime.period;\n\n  // Do not set a period if we have absolute start and end\n  if (pageFilters.datetime.start && pageFilters.datetime.end) {\n    pageFilters.datetime.period = null;\n  }\n\n  const hasDatetimeInUrl = Object.keys(pick(queryParams, DATE_TIME_KEYS)).length > 0;\n  const hasProjectOrEnvironmentInUrl =\n    Object.keys(pick(queryParams, [URL_PARAM.PROJECT, URL_PARAM.ENVIRONMENT])).length > 0;\n\n  if (hasProjectOrEnvironmentInUrl) {\n    pageFilters.projects = parsed.project || [];\n    pageFilters.environments = parsed.environment || [];\n  }\n\n  const storedPageFilters = skipLoadLastUsed ? null : getPageFilterStorage(orgSlug);\n  let shouldUsePinnedDatetime = false;\n\n  // We may want to restore some page filters from local storage. In the new\n  // world when they are pinned, and in the old world as long as\n  // skipLoadLastUsed is not set to true.\n  if (storedPageFilters) {\n    const {state: storedState, pinnedFilters} = storedPageFilters;\n\n    if (!hasProjectOrEnvironmentInUrl && pinnedFilters.has('projects')) {\n      pageFilters.projects = storedState.project ?? [];\n    }\n\n    if (!hasProjectOrEnvironmentInUrl && pinnedFilters.has('environments')) {\n      pageFilters.environments = storedState.environment ?? [];\n    }\n\n    if (!hasDatetimeInUrl && pinnedFilters.has('datetime')) {\n      pageFilters.datetime = getDatetimeFromState(storedState);\n      shouldUsePinnedDatetime = true;\n    }\n  }\n\n  const {projects, environments: environment, datetime} = pageFilters;\n\n  let newProject: number[] | null = null;\n  let project = projects;\n\n  // Skip enforcing a single project if `shouldForceProject` is true, since a\n  // component is controlling what that project needs to be. This is true\n  // regardless if user has access to multi projects\n  if (shouldForceProject && forceProject) {\n    newProject = [getProjectIdFromProject(forceProject)];\n  } else if (shouldEnforceSingleProject && !shouldForceProject) {\n    // If user does not have access to `global-views` (e.g. multi project\n    // select) *and* there is no `project` URL parameter, then we update URL\n    // params with:\n    //\n    //  1) the first project from the list of requested projects from URL params\n    //  2) first project user is a member of from org\n    //\n    // Note this is intentionally skipped if `shouldForceProject == true` since\n    // we want to initialize store and wait for the forced project\n    //\n    if (projects && projects.length > 0) {\n      // If there is a list of projects from URL params, select first project\n      // from that list\n      newProject = typeof projects === 'string' ? [Number(projects)] : [projects[0]];\n    } else {\n      // When we have finished loading the organization into the props,  i.e.\n      // the organization slug is consistent with the URL param--Sentry will\n      // get the first project from the organization that the user is a member\n      // of.\n      newProject = [...memberProjects].slice(0, 1).map(getProjectIdFromProject);\n    }\n  }\n\n  if (newProject) {\n    pageFilters.projects = newProject;\n    project = newProject;\n  }\n\n  const pinnedFilters = storedPageFilters?.pinnedFilters ?? new Set();\n  PageFiltersActions.initializeUrlState(pageFilters, pinnedFilters);\n  updateDesyncedUrlState(router, shouldForceProject);\n\n  const newDatetime = {\n    ...datetime,\n    period:\n      parsed.start || parsed.end || parsed.period || shouldUsePinnedDatetime\n        ? datetime.period\n        : null,\n    utc: parsed.utc || shouldUsePinnedDatetime ? datetime.utc : null,\n  };\n\n  if (!skipInitializeUrlParams) {\n    updateParams({project, environment, ...newDatetime}, router, {\n      replace: true,\n      keepCursor: true,\n    });\n  }\n}\n\nfunction isProjectsValid(projects: ProjectId[]) {\n  return Array.isArray(projects) && projects.every(isInteger);\n}\n\n/**\n * Updates store and selection URL param if `router` is supplied\n *\n * This accepts `environments` from `options` to also update environments\n * simultaneously as environments are tied to a project, so if you change\n * projects, you may need to clear environments.\n */\nexport function updateProjects(\n  projects: ProjectId[],\n  router?: Router,\n  options?: Options & {environments?: EnvironmentId[]}\n) {\n  if (!isProjectsValid(projects)) {\n    Sentry.withScope(scope => {\n      scope.setExtra('projects', projects);\n      Sentry.captureException(new Error('Invalid projects selected'));\n    });\n    return;\n  }\n\n  PageFiltersActions.updateProjects(projects, options?.environments);\n  updateParams({project: projects, environment: options?.environments}, router, options);\n  persistPageFilters('projects', options);\n  if (options?.environments) {\n    persistPageFilters('environments', options);\n  }\n  updateDesyncedUrlState(router);\n}\n\n/**\n * Updates store and updates global environment selection URL param if `router` is supplied\n *\n * @param {String[]} environments List of environments\n * @param {Object} [router] Router object\n * @param {Object} [options] Options object\n * @param {String[]} [options.resetParams] List of parameters to remove when changing URL params\n */\nexport function updateEnvironments(\n  environment: EnvironmentId[] | null,\n  router?: Router,\n  options?: Options\n) {\n  PageFiltersActions.updateEnvironments(environment);\n  updateParams({environment}, router, options);\n  persistPageFilters('environments', options);\n  updateDesyncedUrlState(router);\n}\n\n/**\n * Updates store and global datetime selection URL param if `router` is supplied\n *\n * @param {Object} datetime Object with start, end, range keys\n * @param {Object} [router] Router object\n * @param {Object} [options] Options object\n * @param {String[]} [options.resetParams] List of parameters to remove when changing URL params\n */\nexport function updateDateTime(\n  datetime: DateTimeUpdate,\n  router?: Router,\n  options?: Options\n) {\n  PageFiltersActions.updateDateTime(datetime);\n  updateParams(datetime, router, options);\n  persistPageFilters('datetime', options);\n  updateDesyncedUrlState(router);\n}\n\n/**\n * Pins a particular filter so that it is read out of local storage\n */\nexport function pinFilter(filter: PinnedPageFilter, pin: boolean) {\n  PageFiltersActions.pin(filter, pin);\n  persistPageFilters(null, {save: true});\n}\n\n/**\n * Updates router/URL with new query params\n *\n * @param obj New query params\n * @param [router] React router object\n * @param [options] Options object\n */\nfunction updateParams(obj: PageFiltersUpdate, router?: Router, options?: Options) {\n  // Allow another component to handle routing\n  if (!router) {\n    return;\n  }\n\n  const newQuery = getNewQueryParams(obj, router.location.query, options);\n\n  // Only push new location if query params has changed because this will cause a heavy re-render\n  if (qs.stringify(newQuery) === qs.stringify(router.location.query)) {\n    return;\n  }\n\n  const routerAction = options?.replace ? router.replace : router.push;\n\n  routerAction({pathname: router.location.pathname, query: newQuery});\n}\n\n/**\n * Save a specific page filter to local storage.\n *\n * Pinned state is always persisted.\n */\nasync function persistPageFilters(filter: PinnedPageFilter | null, options?: Options) {\n  if (!options?.save) {\n    return;\n  }\n\n  // XXX(epurkhiser): Since this is called immediately after updating the\n  // store, wait for a tick since stores are not updated fully synchronously.\n  // A bit goofy, but it works fine.\n  await new Promise(resolve => window.setTimeout(resolve, 0));\n\n  const {organization} = OrganizationStore.getState();\n  const orgSlug = organization?.slug ?? null;\n\n  // Can't do anything if we don't have an organization\n  if (orgSlug === null) {\n    return;\n  }\n\n  const targetFilter = filter !== null ? [filter] : [];\n  setPageFiltersStorage(orgSlug, new Set<PinnedPageFilter>(targetFilter));\n}\n\n/**\n * Checks if the URL state has changed in synchronization from the local\n * storage state, and persists that check into the store.\n *\n * If shouldForceProject is enabled, then we do not record any url desync\n * for the project.\n */\nasync function updateDesyncedUrlState(router?: Router, shouldForceProject?: boolean) {\n  // Cannot compare URL state without the router\n  if (!router) {\n    return;\n  }\n\n  const {query} = router.location;\n\n  // XXX(epurkhiser): Since this is called immediately after updating the\n  // store, wait for a tick since stores are not updated fully synchronously.\n  // This function *should* be called only after persistPageFilters has been\n  // called as well This function *should* be called only after\n  // persistPageFilters has been called as well\n  await new Promise(resolve => window.setTimeout(resolve, 0));\n\n  const {organization} = OrganizationStore.getState();\n\n  // Can't do anything if we don't have an organization\n  if (organization === null) {\n    return;\n  }\n\n  const storedPageFilters = getPageFilterStorage(organization.slug);\n\n  // If we don't have any stored page filters then we do not check desynced state\n  if (!storedPageFilters) {\n    PageFiltersActions.updateDesyncedFilters(new Set<PinnedPageFilter>());\n    return;\n  }\n\n  const currentQuery = getStateFromQuery(query, {\n    allowAbsoluteDatetime: true,\n    allowEmptyPeriod: true,\n  });\n\n  const differingFilters = new Set<PinnedPageFilter>();\n  const {pinnedFilters, state: storedState} = storedPageFilters;\n\n  // Are selected projects different?\n  if (\n    pinnedFilters.has('projects') &&\n    currentQuery.project !== null &&\n    !valueIsEqual(currentQuery.project, storedState.project) &&\n    !shouldForceProject\n  ) {\n    differingFilters.add('projects');\n  }\n\n  // Are selected environments different?\n  if (\n    pinnedFilters.has('environments') &&\n    currentQuery.environment !== null &&\n    !valueIsEqual(currentQuery.environment, storedState.environment)\n  ) {\n    differingFilters.add('environments');\n  }\n\n  const dateTimeInQuery =\n    currentQuery.end !== null ||\n    currentQuery.start !== null ||\n    currentQuery.utc !== null ||\n    currentQuery.period !== null;\n\n  // Is the datetime filter different?\n  if (\n    pinnedFilters.has('datetime') &&\n    dateTimeInQuery &&\n    (currentQuery.period !== storedState.period ||\n      currentQuery.start?.getTime() !== storedState.start?.getTime() ||\n      currentQuery.end?.getTime() !== storedState.end?.getTime() ||\n      currentQuery.utc !== storedState.utc)\n  ) {\n    differingFilters.add('datetime');\n  }\n\n  PageFiltersActions.updateDesyncedFilters(differingFilters);\n}\n\n/**\n * Merges an UpdateParams object into a Location['query'] object. Results in a\n * PageFilterQuery\n *\n * Preserves the old query params, except for `cursor` (can be overridden with\n * keepCursor option)\n *\n * @param obj New query params\n * @param currentQuery The current query parameters\n * @param [options] Options object\n */\nfunction getNewQueryParams(\n  obj: PageFiltersUpdate,\n  currentQuery: Location['query'],\n  options: Options = {}\n) {\n  const {resetParams, keepCursor} = options;\n\n  const cleanCurrentQuery = !!resetParams?.length\n    ? omit(currentQuery, resetParams)\n    : currentQuery;\n\n  // Normalize existing query parameters\n  const currentQueryState = getStateFromQuery(cleanCurrentQuery, {\n    allowEmptyPeriod: true,\n    allowAbsoluteDatetime: true,\n  });\n\n  // Extract non page filter parameters.\n  const cursorParam = !keepCursor ? 'cursor' : null;\n  const omittedParameters = [...Object.values(URL_PARAM), cursorParam].filter(defined);\n\n  const extraParams = omit(cleanCurrentQuery, omittedParameters);\n\n  // Override parameters\n  const {project, environment, start, end, utc} = {\n    ...currentQueryState,\n    ...obj,\n  };\n\n  // Only set a stats period if we don't have an absolute date\n  const statsPeriod = !start && !end ? obj.period || currentQueryState.period : null;\n\n  const newQuery: PageFilterQuery = {\n    project: project?.map(String),\n    environment,\n    start: statsPeriod ? null : start instanceof Date ? getUtcDateString(start) : start,\n    end: statsPeriod ? null : end instanceof Date ? getUtcDateString(end) : end,\n    utc: utc ? 'true' : null,\n    statsPeriod,\n    ...extraParams,\n  };\n\n  const paramEntries = Object.entries(newQuery).filter(([_, value]) => defined(value));\n\n  return Object.fromEntries(paramEntries) as PageFilterQuery;\n}\n\nexport function revertToPinnedFilters(orgSlug: string, router: InjectedRouter) {\n  const {selection, desyncedFilters} = PageFiltersStore.getState();\n  const storedFilterState = getPageFilterStorage(orgSlug)?.state;\n\n  if (!storedFilterState) {\n    return;\n  }\n\n  const newParams = {\n    project: desyncedFilters.has('projects')\n      ? storedFilterState.project\n      : selection.projects,\n    environment: desyncedFilters.has('environments')\n      ? storedFilterState.environment\n      : selection.environments,\n    ...(desyncedFilters.has('datetime')\n      ? pick(storedFilterState, DATE_TIME_KEYS)\n      : selection.datetime),\n  };\n\n  updateParams(newParams, router, {\n    keepCursor: true,\n  });\n  updateDesyncedUrlState(router);\n}\n","import {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport SavedSearchesActions from 'sentry/actions/savedSearchesActions';\nimport {Client} from 'sentry/api';\nimport {MAX_AUTOCOMPLETE_RECENT_SEARCHES} from 'sentry/constants';\nimport {t} from 'sentry/locale';\nimport {RecentSearch, SavedSearch, SavedSearchType} from 'sentry/types';\nimport handleXhrErrorResponse from 'sentry/utils/handleXhrErrorResponse';\n\nexport function resetSavedSearches() {\n  SavedSearchesActions.resetSavedSearches();\n}\n\nexport function fetchSavedSearches(api: Client, orgSlug: string): Promise<SavedSearch[]> {\n  const url = `/organizations/${orgSlug}/searches/`;\n  SavedSearchesActions.startFetchSavedSearches();\n\n  const promise = api.requestPromise(url, {\n    method: 'GET',\n  });\n\n  promise\n    .then(resp => {\n      SavedSearchesActions.fetchSavedSearchesSuccess(resp);\n    })\n    .catch(err => {\n      SavedSearchesActions.fetchSavedSearchesError(err);\n      addErrorMessage(t('Unable to load saved searches'));\n    });\n\n  return promise;\n}\n\nexport function fetchProjectSavedSearches(\n  api: Client,\n  orgSlug: string,\n  projectId: string\n): Promise<SavedSearch[]> {\n  const url = `/projects/${orgSlug}/${projectId}/searches/`;\n  return api.requestPromise(url, {\n    method: 'GET',\n  });\n}\n\nconst getRecentSearchUrl = (orgSlug: string): string =>\n  `/organizations/${orgSlug}/recent-searches/`;\n\n/**\n * Saves search term for `user` + `orgSlug`\n *\n * @param api API client\n * @param orgSlug Organization slug\n * @param type Context for where search happened, 0 for issue, 1 for event\n * @param query The search term that was used\n */\nexport function saveRecentSearch(\n  api: Client,\n  orgSlug: string,\n  type: SavedSearchType,\n  query: string\n): Promise<SavedSearch> {\n  const url = getRecentSearchUrl(orgSlug);\n  const promise = api.requestPromise(url, {\n    method: 'POST',\n    data: {\n      query,\n      type,\n    },\n  });\n\n  promise.catch(handleXhrErrorResponse('Unable to save a recent search'));\n\n  return promise;\n}\n\n/**\n * Creates a saved search\n *\n * @param api API client\n * @param orgSlug Organization slug\n * @param name Saved search name\n * @param query Query to save\n */\nexport function createSavedSearch(\n  api: Client,\n  orgSlug: string,\n  name: string,\n  query: string,\n  sort: string | null\n): Promise<SavedSearch> {\n  const promise = api.requestPromise(`/organizations/${orgSlug}/searches/`, {\n    method: 'POST',\n    data: {\n      type: SavedSearchType.ISSUE,\n      query,\n      name,\n      sort,\n    },\n  });\n\n  // Need to wait for saved search to save unfortunately because we need to redirect\n  // to saved search URL\n  promise.then(resp => {\n    SavedSearchesActions.createSavedSearchSuccess(resp);\n  });\n\n  return promise;\n}\n\n/**\n * Fetches a list of recent search terms conducted by `user` for `orgSlug`\n *\n * @param api API client\n * @param orgSlug Organization slug\n * @param type Context for where search happened, 0 for issue, 1 for event\n * @param query A query term used to filter results\n *\n * @return Returns a list of objects of recent search queries performed by user\n */\nexport function fetchRecentSearches(\n  api: Client,\n  orgSlug: string,\n  type: SavedSearchType,\n  query?: string\n): Promise<RecentSearch[]> {\n  const url = getRecentSearchUrl(orgSlug);\n  const promise = api.requestPromise(url, {\n    query: {\n      query,\n      type,\n      limit: MAX_AUTOCOMPLETE_RECENT_SEARCHES,\n    },\n  });\n\n  promise.catch(resp => {\n    if (resp.status !== 401 && resp.status !== 403) {\n      handleXhrErrorResponse('Unable to fetch recent searches')(resp);\n    }\n  });\n\n  return promise;\n}\n\nconst getPinSearchUrl = (orgSlug: string): string =>\n  `/organizations/${orgSlug}/pinned-searches/`;\n\nexport function pinSearch(\n  api: Client,\n  orgSlug: string,\n  type: SavedSearchType,\n  query: string,\n  sort?: string\n): Promise<SavedSearch> {\n  const url = getPinSearchUrl(orgSlug);\n\n  // Optimistically update store\n  SavedSearchesActions.pinSearch(type, query, sort);\n\n  const promise = api.requestPromise(url, {\n    method: 'PUT',\n    data: {\n      query,\n      type,\n      sort,\n    },\n  });\n\n  promise.then(SavedSearchesActions.pinSearchSuccess);\n\n  promise.catch(handleXhrErrorResponse('Unable to pin search'));\n\n  promise.catch(() => {\n    SavedSearchesActions.unpinSearch(type);\n  });\n\n  return promise;\n}\n\nexport function unpinSearch(\n  api: Client,\n  orgSlug: string,\n  type: SavedSearchType,\n  pinnedSearch: SavedSearch\n) {\n  const url = getPinSearchUrl(orgSlug);\n\n  // Optimistically update store\n  SavedSearchesActions.unpinSearch(type);\n\n  const promise = api.requestPromise(url, {\n    method: 'DELETE',\n    data: {\n      type,\n    },\n  });\n\n  promise.catch(handleXhrErrorResponse('Unable to un-pin search'));\n\n  promise.catch(() => {\n    const {type: pinnedType, query} = pinnedSearch;\n    SavedSearchesActions.pinSearch(pinnedType, query);\n  });\n\n  return promise;\n}\n\n/**\n * Send a DELETE request to remove a saved search\n *\n * @param api API client\n * @param orgSlug Organization slug\n * @param search The search to remove.\n */\nexport function deleteSavedSearch(\n  api: Client,\n  orgSlug: string,\n  search: SavedSearch\n): Promise<void> {\n  const url = `/organizations/${orgSlug}/searches/${search.id}/`;\n\n  const promise = api\n    .requestPromise(url, {\n      method: 'DELETE',\n    })\n    .then(() => SavedSearchesActions.deleteSavedSearchSuccess(search))\n    .catch(handleXhrErrorResponse('Unable to delete a saved search'));\n\n  return promise;\n}\n","import {Query} from 'history';\n\nimport {Client} from 'sentry/api';\nimport {normalizeDateTimeParams} from 'sentry/components/organizations/pageFilters/parse';\nimport {t} from 'sentry/locale';\nimport AlertStore from 'sentry/stores/alertStore';\nimport TagStore from 'sentry/stores/tagStore';\nimport {PageFilters, Tag} from 'sentry/types';\n\nconst MAX_TAGS = 1000;\n\nfunction tagFetchSuccess(tags: Tag[] | undefined) {\n  // We occasionally get undefined passed in when APIs are having a bad time.\n  tags = tags || [];\n  const trimmedTags = tags.slice(0, MAX_TAGS);\n\n  if (tags.length > MAX_TAGS) {\n    AlertStore.addAlert({\n      message: t('You have too many unique tags and some have been truncated'),\n      type: 'warning',\n    });\n  }\n  TagStore.loadTagsSuccess(trimmedTags);\n}\n\n/**\n * Load an organization's tags based on a global selection value.\n */\nexport function loadOrganizationTags(api: Client, orgId: string, selection: PageFilters) {\n  TagStore.reset();\n\n  const url = `/organizations/${orgId}/tags/`;\n  const query: Query = selection.datetime\n    ? {...normalizeDateTimeParams(selection.datetime)}\n    : {};\n  query.use_cache = '1';\n\n  if (selection.projects) {\n    query.project = selection.projects.map(String);\n  }\n  const promise = api.requestPromise(url, {\n    method: 'GET',\n    query,\n  });\n\n  promise.then(tagFetchSuccess);\n\n  return promise;\n}\n\n/**\n * Fetch tags for an organization or a subset or projects.\n */\nexport function fetchOrganizationTags(\n  api: Client,\n  orgId: string,\n  projectIds: string[] | null = null\n) {\n  TagStore.reset();\n\n  const url = `/organizations/${orgId}/tags/`;\n  const query: Query = {use_cache: '1'};\n  if (projectIds) {\n    query.project = projectIds;\n  }\n\n  const promise = api.requestPromise(url, {\n    method: 'GET',\n    query,\n  });\n\n  promise.then(tagFetchSuccess);\n\n  return promise;\n}\n\n/**\n * Fetch tag values for an organization.\n * The `projectIds` argument can be used to subset projects.\n */\nexport function fetchTagValues(\n  api: Client,\n  orgId: string,\n  tagKey: string,\n  search: string | null = null,\n  projectIds: string[] | null = null,\n  endpointParams: Query | null = null,\n  includeTransactions = false,\n  includeSessions = false,\n  sort: string | null = null\n) {\n  const url = `/organizations/${orgId}/tags/${tagKey}/values/`;\n\n  const query: Query = {};\n  if (search) {\n    query.query = search;\n  }\n  if (projectIds) {\n    query.project = projectIds;\n  }\n  if (endpointParams) {\n    if (endpointParams.start) {\n      query.start = endpointParams.start;\n    }\n    if (endpointParams.end) {\n      query.end = endpointParams.end;\n    }\n    if (endpointParams.statsPeriod) {\n      query.statsPeriod = endpointParams.statsPeriod;\n    }\n  }\n  if (includeTransactions) {\n    query.includeTransactions = '1';\n  }\n\n  if (includeSessions) {\n    query.includeSessions = '1';\n  }\n\n  if (sort) {\n    query.sort = sort;\n  }\n\n  return api.requestPromise(url, {\n    method: 'GET',\n    query,\n  });\n}\n","import {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport TeamActions from 'sentry/actions/teamActions';\nimport {Client} from 'sentry/api';\nimport {tct} from 'sentry/locale';\nimport {Team} from 'sentry/types';\nimport {callIfFunction} from 'sentry/utils/callIfFunction';\nimport {uniqueId} from 'sentry/utils/guid';\n\ntype CallbackOptions = {\n  error?: Function;\n  success?: Function;\n};\n\nconst doCallback = (\n  params: CallbackOptions = {},\n  name: keyof CallbackOptions,\n  ...args: any[]\n) => {\n  callIfFunction(params[name], ...args);\n};\n\n/**\n * Note these are both slugs\n */\ntype OrgSlug = {orgId: string};\ntype OrgAndTeamSlug = OrgSlug & {teamId: string};\n\n/**\n * This is the actual internal id, not username or email\n */\ntype MemberId = {memberId: string};\n\n// Fetch teams for org\nexport function fetchTeams(api: Client, params: OrgSlug, options: CallbackOptions) {\n  TeamActions.fetchAll(params.orgId);\n  return api.request(`/teams/${params.orgId}/`, {\n    success: data => {\n      TeamActions.fetchAllSuccess(params.orgId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.fetchAllError(params.orgId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\n// Fetch user teams for current org and place them in the team store\nexport async function fetchUserTeams(api: Client, params: OrgSlug) {\n  const teams = await api.requestPromise(`/organizations/${params.orgId}/user-teams/`);\n  TeamActions.loadUserTeams(teams);\n}\n\nexport function fetchTeamDetails(\n  api: Client,\n  params: OrgAndTeamSlug,\n  options?: CallbackOptions\n) {\n  TeamActions.fetchDetails(params.teamId);\n  return api.request(`/teams/${params.orgId}/${params.teamId}/`, {\n    success: data => {\n      TeamActions.fetchDetailsSuccess(params.teamId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.fetchDetailsError(params.teamId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\nexport function updateTeamSuccess(teamId: OrgAndTeamSlug['teamId'], data: Team) {\n  TeamActions.updateSuccess(teamId, data);\n}\n\nexport function joinTeam(\n  api: Client,\n  params: OrgAndTeamSlug & Partial<MemberId>,\n  options: CallbackOptions\n) {\n  const endpoint = `/organizations/${params.orgId}/members/${\n    params.memberId ?? 'me'\n  }/teams/${params.teamId}/`;\n  const id = uniqueId();\n\n  TeamActions.update(id, params.teamId);\n\n  return api.request(endpoint, {\n    method: 'POST',\n    success: data => {\n      TeamActions.updateSuccess(params.teamId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.updateError(id, params.teamId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\nexport function leaveTeam(\n  api: Client,\n  params: OrgAndTeamSlug & Partial<MemberId>,\n  options: CallbackOptions\n) {\n  const endpoint = `/organizations/${params.orgId}/members/${\n    params.memberId || 'me'\n  }/teams/${params.teamId}/`;\n  const id = uniqueId();\n\n  TeamActions.update(id, params.teamId);\n\n  return api.request(endpoint, {\n    method: 'DELETE',\n    success: data => {\n      TeamActions.updateSuccess(params.teamId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.updateError(id, params.teamId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\nexport function createTeam(api: Client, team: Pick<Team, 'slug'>, params: OrgSlug) {\n  TeamActions.createTeam(team);\n\n  return api\n    .requestPromise(`/organizations/${params.orgId}/teams/`, {\n      method: 'POST',\n      data: team,\n    })\n    .then(\n      data => {\n        TeamActions.createTeamSuccess(data);\n        addSuccessMessage(\n          tct('[team] has been added to the [organization] organization', {\n            team: `#${data.slug}`,\n            organization: params.orgId,\n          })\n        );\n        return data;\n      },\n      err => {\n        TeamActions.createTeamError(team.slug, err);\n        addErrorMessage(\n          tct('Unable to create [team] in the [organization] organization', {\n            team: `#${team.slug}`,\n            organization: params.orgId,\n          })\n        );\n        throw err;\n      }\n    );\n}\n\nexport function removeTeam(api: Client, params: OrgAndTeamSlug) {\n  TeamActions.removeTeam(params.teamId);\n\n  return api\n    .requestPromise(`/teams/${params.orgId}/${params.teamId}/`, {\n      method: 'DELETE',\n    })\n    .then(\n      data => {\n        TeamActions.removeTeamSuccess(params.teamId, data);\n        addSuccessMessage(\n          tct('[team] has been removed from the [organization] organization', {\n            team: `#${params.teamId}`,\n            organization: params.orgId,\n          })\n        );\n        return data;\n      },\n      err => {\n        TeamActions.removeTeamError(params.teamId, err);\n        addErrorMessage(\n          tct('Unable to remove [team] from the [organization] organization', {\n            team: `#${params.teamId}`,\n            organization: params.orgId,\n          })\n        );\n        throw err;\n      }\n    );\n}\n","import {createActions} from 'reflux';\n\nconst SavedSearchActions = createActions([\n  'resetSavedSearches',\n  'startFetchSavedSearches',\n  'fetchSavedSearchesSuccess',\n  'fetchSavedSearchesError',\n  'createSavedSearchSuccess',\n  'deleteSavedSearchSuccess',\n  'pinSearch',\n  'pinSearchSuccess',\n  'unpinSearch',\n]);\n\nexport default SavedSearchActions;\n","import {Component} from 'react';\nimport styled from '@emotion/styled';\n\nimport {assignToActor, assignToUser, clearAssignment} from 'sentry/actionCreators/group';\nimport {openInviteMembersModal} from 'sentry/actionCreators/modal';\nimport ActorAvatar from 'sentry/components/avatar/actorAvatar';\nimport SuggestedAvatarStack from 'sentry/components/avatar/suggestedAvatarStack';\nimport TeamAvatar from 'sentry/components/avatar/teamAvatar';\nimport UserAvatar from 'sentry/components/avatar/userAvatar';\nimport DropdownAutoComplete from 'sentry/components/dropdownAutoComplete';\nimport {ItemsBeforeFilter} from 'sentry/components/dropdownAutoComplete/types';\nimport DropdownBubble from 'sentry/components/dropdownBubble';\nimport Highlight from 'sentry/components/highlight';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport Link from 'sentry/components/links/link';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport TextOverflow from 'sentry/components/textOverflow';\nimport Tooltip from 'sentry/components/tooltip';\nimport {IconAdd, IconChevron, IconClose, IconUser} from 'sentry/icons';\nimport {t, tct, tn} from 'sentry/locale';\nimport ConfigStore from 'sentry/stores/configStore';\nimport GroupStore from 'sentry/stores/groupStore';\nimport MemberListStore from 'sentry/stores/memberListStore';\nimport ProjectsStore from 'sentry/stores/projectsStore';\nimport space from 'sentry/styles/space';\nimport {Actor, SuggestedOwner, SuggestedOwnerReason, Team, User} from 'sentry/types';\nimport {buildTeamId, buildUserId, valueIsEqual} from 'sentry/utils';\n\ntype SuggestedAssignee = Actor & {\n  assignee: AssignableTeam | User;\n  suggestedReason: SuggestedOwnerReason;\n};\n\ntype AssignableTeam = {\n  display: string;\n  email: string;\n  id: string;\n  team: Team;\n};\n\ntype Props = {\n  id: string;\n  disabled?: boolean;\n  memberList?: User[];\n  noDropdown?: boolean;\n  onAssign?: (\n    type: Actor['type'],\n    assignee: User | Actor,\n    suggestedAssignee?: SuggestedAssignee\n  ) => void;\n  size?: number;\n};\n\ntype State = {\n  loading: boolean;\n  assignedTo?: Actor;\n  memberList?: User[];\n  suggestedOwners?: SuggestedOwner[] | null;\n};\n\nclass AssigneeSelector extends Component<Props, State> {\n  static defaultProps = {\n    size: 20,\n  };\n\n  state = this.getInitialState();\n\n  getInitialState() {\n    const group = GroupStore.get(this.props.id);\n    const memberList = MemberListStore.loaded ? MemberListStore.getAll() : undefined;\n    const loading = GroupStore.hasStatus(this.props.id, 'assignTo');\n    const suggestedOwners = group?.owners;\n\n    return {\n      assignedTo: group?.assignedTo,\n      memberList,\n      loading,\n      suggestedOwners,\n    };\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    const loading = GroupStore.hasStatus(nextProps.id, 'assignTo');\n    if (nextProps.id !== this.props.id || loading !== this.state.loading) {\n      const group = GroupStore.get(this.props.id);\n      this.setState({\n        loading,\n        assignedTo: group?.assignedTo,\n        suggestedOwners: group?.owners,\n      });\n    }\n  }\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    if (nextState.loading !== this.state.loading) {\n      return true;\n    }\n\n    // If the memberList in props has changed, re-render as\n    // props have updated, and we won't use internal state anyways.\n    if (\n      nextProps.memberList &&\n      !valueIsEqual(this.props.memberList, nextProps.memberList)\n    ) {\n      return true;\n    }\n\n    const currentMembers = this.memberList();\n    // XXX(billyvg): this means that once `memberList` is not-null, this component will never update due to `memberList` changes\n    // Note: this allows us to show a \"loading\" state for memberList, but only before `MemberListStore.loadInitialData`\n    // is called\n    if (currentMembers === undefined && nextState.memberList !== currentMembers) {\n      return true;\n    }\n    return !valueIsEqual(nextState.assignedTo, this.state.assignedTo, true);\n  }\n\n  componentWillUnmount() {\n    this.unlisteners.forEach(unlistener => unlistener?.());\n  }\n\n  unlisteners = [\n    GroupStore.listen(itemIds => this.onGroupChange(itemIds), undefined),\n    MemberListStore.listen((users: User[]) => {\n      this.handleMemberListUpdate(users);\n    }, undefined),\n  ];\n\n  handleMemberListUpdate = (members: User[]) => {\n    if (members === this.state.memberList) {\n      return;\n    }\n\n    this.setState({memberList: members});\n  };\n\n  memberList(): User[] | undefined {\n    return this.props.memberList ? this.props.memberList : this.state.memberList;\n  }\n\n  onGroupChange(itemIds: Set<string>) {\n    if (!itemIds.has(this.props.id)) {\n      return;\n    }\n    const group = GroupStore.get(this.props.id);\n    this.setState({\n      assignedTo: group?.assignedTo,\n      suggestedOwners: group?.owners,\n      loading: GroupStore.hasStatus(this.props.id, 'assignTo'),\n    });\n  }\n\n  assignableTeams(): AssignableTeam[] {\n    const group = GroupStore.get(this.props.id);\n    if (!group) {\n      return [];\n    }\n\n    const teams = ProjectsStore.getBySlug(group.project.slug)?.teams ?? [];\n    return teams\n      .sort((a, b) => a.slug.localeCompare(b.slug))\n      .map(team => ({\n        id: buildTeamId(team.id),\n        display: `#${team.slug}`,\n        email: team.id,\n        team,\n      }));\n  }\n\n  assignToUser(user: User | Actor) {\n    assignToUser({id: this.props.id, user, assignedBy: 'assignee_selector'});\n    this.setState({loading: true});\n  }\n\n  assignToTeam(team: Team) {\n    assignToActor({\n      actor: {id: team.id, type: 'team'},\n      id: this.props.id,\n      assignedBy: 'assignee_selector',\n    });\n    this.setState({loading: true});\n  }\n\n  handleAssign: React.ComponentProps<typeof DropdownAutoComplete>['onSelect'] = (\n    {value: {type, assignee}},\n    _state,\n    e\n  ) => {\n    if (type === 'member') {\n      this.assignToUser(assignee);\n    }\n\n    if (type === 'team') {\n      this.assignToTeam(assignee);\n    }\n\n    e?.stopPropagation();\n\n    const {onAssign} = this.props;\n    if (onAssign) {\n      const suggestionType = type === 'member' ? 'user' : type;\n      const suggestion = this.getSuggestedAssignees().find(\n        actor => actor.type === suggestionType && actor.id === assignee.id\n      );\n      onAssign?.(type, assignee, suggestion);\n    }\n  };\n\n  clearAssignTo = (e: React.MouseEvent<HTMLDivElement>) => {\n    // clears assignment\n    clearAssignment(this.props.id, 'assignee_selector');\n    this.setState({loading: true});\n    e.stopPropagation();\n  };\n\n  renderMemberNode(member: User, suggestedReason?: string): ItemsBeforeFilter[0] {\n    const {size} = this.props;\n    const sessionUser = ConfigStore.get('user');\n\n    const handleSelect = () => this.assignToUser(member);\n\n    return {\n      value: {type: 'member', assignee: member},\n      searchKey: `${member.email} ${member.name}`,\n      label: ({inputValue}) => (\n        <MenuItemWrapper\n          data-test-id=\"assignee-option\"\n          key={buildUserId(member.id)}\n          onSelect={handleSelect}\n        >\n          <IconContainer>\n            <UserAvatar user={member} size={size} />\n          </IconContainer>\n          <Label>\n            <Highlight text={inputValue}>\n              {sessionUser.id === member.id\n                ? `${member.name || member.email} ${t('(You)')}`\n                : member.name || member.email}\n            </Highlight>\n            {suggestedReason && <SuggestedReason>{suggestedReason}</SuggestedReason>}\n          </Label>\n        </MenuItemWrapper>\n      ),\n    };\n  }\n\n  renderNewMemberNodes(): ItemsBeforeFilter {\n    const members = putSessionUserFirst(this.memberList());\n    return members.map(member => this.renderMemberNode(member));\n  }\n\n  renderTeamNode(\n    assignableTeam: AssignableTeam,\n    suggestedReason?: string\n  ): ItemsBeforeFilter[0] {\n    const {size} = this.props;\n    const {id, display, team} = assignableTeam;\n\n    const handleSelect = () => this.assignToTeam(team);\n\n    return {\n      value: {type: 'team', assignee: team},\n      searchKey: team.slug,\n      label: ({inputValue}) => (\n        <MenuItemWrapper data-test-id=\"assignee-option\" key={id} onSelect={handleSelect}>\n          <IconContainer>\n            <TeamAvatar team={team} size={size} />\n          </IconContainer>\n          <Label>\n            <Highlight text={inputValue}>{display}</Highlight>\n            {suggestedReason && <SuggestedReason>{suggestedReason}</SuggestedReason>}\n          </Label>\n        </MenuItemWrapper>\n      ),\n    };\n  }\n\n  renderNewTeamNodes(): ItemsBeforeFilter {\n    return this.assignableTeams().map(team => this.renderTeamNode(team));\n  }\n\n  renderSuggestedAssigneeNodes(): React.ComponentProps<\n    typeof DropdownAutoComplete\n  >['items'] {\n    const {assignedTo} = this.state;\n    // filter out suggested assignees if a suggestion is already selected\n    return this.getSuggestedAssignees()\n      .filter(({type, id}) => !(type === assignedTo?.type && id === assignedTo?.id))\n      .filter(({type}) => type === 'user' || type === 'team')\n      .map(({type, suggestedReason, assignee}) => {\n        const reason =\n          suggestedReason === 'suspectCommit'\n            ? t('(Suspect Commit)')\n            : t('(Issue Owner)');\n        if (type === 'user') {\n          return this.renderMemberNode(assignee as User, reason);\n        }\n\n        return this.renderTeamNode(assignee as AssignableTeam, reason);\n      });\n  }\n\n  renderDropdownGroupLabel(label: string) {\n    return <GroupHeader>{label}</GroupHeader>;\n  }\n\n  renderNewDropdownItems(): ItemsBeforeFilter {\n    const teams = this.renderNewTeamNodes();\n    const members = this.renderNewMemberNodes();\n    const sessionUser = ConfigStore.get('user');\n    const suggestedAssignees = this.renderSuggestedAssigneeNodes() ?? [];\n\n    const filteredSessionUser: ItemsBeforeFilter = members.filter(\n      member => member.value.assignee.id === sessionUser.id\n    );\n    // filter out session user from Suggested\n    const filteredSuggestedAssignees: ItemsBeforeFilter = suggestedAssignees.filter(\n      assignee => {\n        return assignee.value.type === 'member'\n          ? assignee.value.assignee.id !== sessionUser.id\n          : assignee;\n      }\n    );\n\n    const assigneeIds = new Set(\n      filteredSuggestedAssignees.map(\n        assignee => `${assignee.value.type}:${assignee.value.assignee.id}`\n      )\n    );\n    // filter out duplicates of Team/Member if also a Suggested Assignee\n    const filteredTeams: ItemsBeforeFilter = teams.filter(team => {\n      return !assigneeIds.has(`${team.value.type}:${team.value.assignee.id}`);\n    });\n    const filteredMembers: ItemsBeforeFilter = members.filter(member => {\n      return (\n        !assigneeIds.has(`${member.value.type}:${member.value.assignee.id}`) &&\n        member.value.assignee.id !== sessionUser.id\n      );\n    });\n\n    const dropdownItems: ItemsBeforeFilter = [\n      {\n        label: this.renderDropdownGroupLabel(t('Teams')),\n        id: 'team-header',\n        items: filteredTeams,\n      },\n      {\n        label: this.renderDropdownGroupLabel(t('People')),\n        id: 'members-header',\n        items: filteredMembers,\n      },\n    ];\n\n    // session user is first on dropdown\n    if (suggestedAssignees.length || filteredSessionUser.length) {\n      dropdownItems.unshift(\n        {\n          label: this.renderDropdownGroupLabel(t('Suggested')),\n          id: 'suggested-header',\n          items: filteredSessionUser,\n        },\n        {\n          hideGroupLabel: true,\n          id: 'suggested-list',\n          items: filteredSuggestedAssignees,\n        }\n      );\n    }\n\n    return dropdownItems;\n  }\n\n  renderInviteMemberLink() {\n    const {loading} = this.state;\n\n    return (\n      <InviteMemberLink\n        to=\"\"\n        data-test-id=\"invite-member\"\n        disabled={loading}\n        onClick={() => openInviteMembersModal({source: 'assignee_selector'})}\n      >\n        <MenuItemFooterWrapper>\n          <IconContainer>\n            <IconAdd color=\"purple300\" isCircled size=\"14px\" />\n          </IconContainer>\n          <Label>{t('Invite Member')}</Label>\n        </MenuItemFooterWrapper>\n      </InviteMemberLink>\n    );\n  }\n\n  getSuggestedAssignees(): SuggestedAssignee[] {\n    const {suggestedOwners} = this.state;\n    if (!suggestedOwners) {\n      return [];\n    }\n\n    const assignableTeams = this.assignableTeams();\n    const memberList = this.memberList() ?? [];\n    const suggestedAssignees: Array<SuggestedAssignee | null> = suggestedOwners.map(\n      owner => {\n        // converts a backend suggested owner to a suggested assignee\n        const [ownerType, id] = owner.owner.split(':');\n        if (ownerType === 'user') {\n          const member = memberList.find(user => user.id === id);\n          if (member) {\n            return {\n              type: 'user',\n              id,\n              name: member.name,\n              suggestedReason: owner.type,\n              assignee: member,\n            };\n          }\n        } else if (ownerType === 'team') {\n          const matchingTeam = assignableTeams.find(\n            assignableTeam => assignableTeam.id === owner.owner\n          );\n          if (matchingTeam) {\n            return {\n              type: 'team',\n              id,\n              name: matchingTeam.team.name,\n              suggestedReason: owner.type,\n              assignee: matchingTeam,\n            };\n          }\n        }\n\n        return null;\n      }\n    );\n\n    return suggestedAssignees.filter(owner => !!owner) as SuggestedAssignee[];\n  }\n\n  render() {\n    const {disabled, noDropdown} = this.props;\n    const {loading, assignedTo} = this.state;\n    const memberList = this.memberList();\n    const suggestedActors = this.getSuggestedAssignees();\n    const suggestedReasons: Record<SuggestedOwnerReason, React.ReactNode> = {\n      suspectCommit: tct('Based on [commit:commit data]', {\n        commit: (\n          <TooltipSubExternalLink href=\"https://docs.sentry.io/product/sentry-basics/integrate-frontend/configure-scms/\" />\n        ),\n      }),\n      ownershipRule: t('Matching Issue Owners Rule'),\n    };\n    const assignedToSuggestion = suggestedActors.find(\n      actor => actor.id === assignedTo?.id\n    );\n\n    const avatarElement = assignedTo ? (\n      <ActorAvatar\n        actor={assignedTo}\n        className=\"avatar\"\n        size={24}\n        tooltip={\n          <TooltipWrapper>\n            {tct('Assigned to [name]', {\n              name: assignedTo.type === 'team' ? `#${assignedTo.name}` : assignedTo.name,\n            })}\n            {assignedToSuggestion && (\n              <TooltipSubtext>\n                {suggestedReasons[assignedToSuggestion.suggestedReason]}\n              </TooltipSubtext>\n            )}\n          </TooltipWrapper>\n        }\n      />\n    ) : suggestedActors && suggestedActors.length > 0 ? (\n      <SuggestedAvatarStack\n        size={24}\n        owners={suggestedActors}\n        tooltipOptions={{isHoverable: true}}\n        tooltip={\n          <TooltipWrapper>\n            <div>\n              {tct('Suggestion: [name]', {\n                name:\n                  suggestedActors[0].type === 'team'\n                    ? `#${suggestedActors[0].name}`\n                    : suggestedActors[0].name,\n              })}\n              {suggestedActors.length > 1 &&\n                tn(' + %s other', ' + %s others', suggestedActors.length - 1)}\n            </div>\n            <TooltipSubtext>\n              {suggestedReasons[suggestedActors[0].suggestedReason]}\n            </TooltipSubtext>\n          </TooltipWrapper>\n        }\n      />\n    ) : (\n      <Tooltip\n        isHoverable\n        skipWrapper\n        title={\n          <TooltipWrapper>\n            <div>{t('Unassigned')}</div>\n            <TooltipSubtext>\n              {tct(\n                'You can auto-assign issues by adding [issueOwners:Issue Owner rules].',\n                {\n                  issueOwners: (\n                    <TooltipSubExternalLink href=\"https://docs.sentry.io/product/error-monitoring/issue-owners/\" />\n                  ),\n                }\n              )}\n            </TooltipSubtext>\n          </TooltipWrapper>\n        }\n      >\n        <StyledIconUser data-test-id=\"unassigned\" size=\"20px\" color=\"gray400\" />\n      </Tooltip>\n    );\n\n    return (\n      <AssigneeWrapper>\n        {loading && (\n          <LoadingIndicator mini style={{height: '24px', margin: 0, marginRight: 11}} />\n        )}\n        {!loading && !noDropdown && (\n          <DropdownAutoComplete\n            disabled={disabled}\n            maxHeight={400}\n            onOpen={e => {\n              // This can be called multiple times and does not always have `event`\n              e?.stopPropagation();\n            }}\n            busy={memberList === undefined}\n            items={memberList !== undefined ? this.renderNewDropdownItems() : null}\n            alignMenu=\"right\"\n            onSelect={this.handleAssign}\n            itemSize=\"small\"\n            searchPlaceholder={t('Filter teams and people')}\n            menuFooter={\n              assignedTo ? (\n                <div>\n                  <MenuItemFooterWrapper\n                    role=\"button\"\n                    onClick={this.clearAssignTo}\n                    py={0}\n                  >\n                    <IconContainer>\n                      <IconClose color=\"purple300\" isCircled size=\"14px\" />\n                    </IconContainer>\n                    <Label>{t('Clear Assignee')}</Label>\n                  </MenuItemFooterWrapper>\n                  {this.renderInviteMemberLink()}\n                </div>\n              ) : (\n                this.renderInviteMemberLink()\n              )\n            }\n            disableLabelPadding\n            emptyHidesInput\n          >\n            {({getActorProps, isOpen}) => (\n              <DropdownButton data-test-id=\"assignee-selector\" {...getActorProps({})}>\n                {avatarElement}\n                <StyledChevron direction={isOpen ? 'up' : 'down'} size=\"xs\" />\n              </DropdownButton>\n            )}\n          </DropdownAutoComplete>\n        )}\n        {!loading && noDropdown && avatarElement}\n      </AssigneeWrapper>\n    );\n  }\n}\n\nexport function putSessionUserFirst(members: User[] | undefined): User[] {\n  // If session user is in the filtered list of members, put them at the top\n  if (!members) {\n    return [];\n  }\n\n  const sessionUser = ConfigStore.get('user');\n  const sessionUserIndex = members.findIndex(member => member.id === sessionUser?.id);\n\n  if (sessionUserIndex === -1) {\n    return members;\n  }\n\n  const arrangedMembers = [members[sessionUserIndex]];\n  arrangedMembers.push(...members.slice(0, sessionUserIndex));\n  arrangedMembers.push(...members.slice(sessionUserIndex + 1));\n\n  return arrangedMembers;\n}\n\nexport default AssigneeSelector;\n\nconst AssigneeWrapper = styled('div')`\n  display: flex;\n  justify-content: flex-end;\n\n  /* manually align menu underneath dropdown caret */\n  ${DropdownBubble} {\n    right: -14px;\n  }\n`;\n\nconst StyledIconUser = styled(IconUser)`\n  /* We need this to center with Avatar */\n  margin-right: 2px;\n`;\n\nconst IconContainer = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  flex-shrink: 0;\n`;\n\nconst MenuItemWrapper = styled('div')<{\n  disabled?: boolean;\n  py?: number;\n}>`\n  cursor: ${p => (p.disabled ? 'not-allowed' : 'pointer')};\n  display: flex;\n  align-items: center;\n  font-size: 13px;\n  ${p =>\n    typeof p.py !== 'undefined' &&\n    `\n      padding-top: ${p.py};\n      padding-bottom: ${p.py};\n    `};\n`;\n\nconst MenuItemFooterWrapper = styled(MenuItemWrapper)`\n  padding: ${space(0.25)} ${space(1)};\n  border-top: 1px solid ${p => p.theme.innerBorder};\n  background-color: ${p => p.theme.tag.highlight.background};\n  color: ${p => p.theme.active};\n  :hover {\n    color: ${p => p.theme.activeHover};\n    svg {\n      fill: ${p => p.theme.activeHover};\n    }\n  }\n`;\n\nconst InviteMemberLink = styled(Link)`\n  color: ${p => (p.disabled ? p.theme.disabled : p.theme.textColor)};\n`;\n\nconst Label = styled(TextOverflow)`\n  margin-left: 6px;\n`;\n\nconst StyledChevron = styled(IconChevron)`\n  margin-left: ${space(1)};\n`;\n\nconst DropdownButton = styled('div')`\n  display: flex;\n  align-items: center;\n  font-size: 20px;\n`;\n\nconst GroupHeader = styled('div')`\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-weight: 600;\n  margin: ${space(1)} 0;\n  color: ${p => p.theme.subText};\n  line-height: ${p => p.theme.fontSizeSmall};\n  text-align: left;\n`;\n\nconst SuggestedReason = styled('span')`\n  margin-left: ${space(0.5)};\n  color: ${p => p.theme.textColor};\n`;\n\nconst TooltipWrapper = styled('div')`\n  text-align: left;\n`;\n\nconst TooltipSubtext = styled('div')`\n  color: ${p => p.theme.subText};\n`;\n\nconst TooltipSubExternalLink = styled(ExternalLink)`\n  color: ${p => p.theme.subText};\n  text-decoration: underline;\n\n  :hover {\n    color: ${p => p.theme.subText};\n  }\n`;\n","import {Component} from 'react';\nimport * as Sentry from '@sentry/react';\n\nimport TeamAvatar from 'sentry/components/avatar/teamAvatar';\nimport UserAvatar from 'sentry/components/avatar/userAvatar';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport Tooltip from 'sentry/components/tooltip';\nimport MemberListStore from 'sentry/stores/memberListStore';\nimport {Actor} from 'sentry/types';\nimport Teams from 'sentry/utils/teams';\n\ntype DefaultProps = {\n  hasTooltip: boolean;\n  size: number;\n};\n\ntype Props = DefaultProps & {\n  actor: Actor;\n  className?: string;\n  default?: string;\n  gravatar?: boolean;\n  onClick?: () => void;\n  suggested?: boolean;\n  title?: string;\n  tooltip?: React.ReactNode;\n  tooltipOptions?: Omit<React.ComponentProps<typeof Tooltip>, 'children' | 'title'>;\n};\n\nclass ActorAvatar extends Component<Props> {\n  static defaultProps: DefaultProps = {\n    size: 24,\n    hasTooltip: true,\n  };\n\n  render() {\n    const {actor, ...props} = this.props;\n\n    if (actor.type === 'user') {\n      const user = actor.id ? MemberListStore.getById(actor.id) ?? actor : actor;\n      return <UserAvatar user={user} {...props} />;\n    }\n\n    if (actor.type === 'team') {\n      return (\n        <Teams ids={[actor.id]}>\n          {({initiallyLoaded, teams}) =>\n            initiallyLoaded ? (\n              <TeamAvatar team={teams[0]} {...props} />\n            ) : (\n              <LoadingIndicator mini />\n            )\n          }\n        </Teams>\n      );\n    }\n\n    Sentry.withScope(scope => {\n      scope.setExtra('actor', actor);\n      Sentry.captureException(new Error('Unknown avatar type'));\n    });\n\n    return null;\n  }\n}\n\nexport default ActorAvatar;\n","import {css} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport ActorAvatar from 'sentry/components/avatar/actorAvatar';\nimport BaseAvatar from 'sentry/components/avatar/baseAvatar';\nimport {Actor} from 'sentry/types';\n\ntype Props = {\n  owners: Actor[];\n} & BaseAvatar['props'] &\n  Omit<ActorAvatar['props'], 'actor' | 'hasTooltip'>;\n\n// Constrain the number of visible suggestions\nconst MAX_SUGGESTIONS = 5;\n\nconst SuggestedAvatarStack = ({owners, tooltip, tooltipOptions, ...props}: Props) => {\n  const backgroundAvatarProps = {\n    ...props,\n    round: owners[0].type === 'user',\n    suggested: true,\n  };\n  const numAvatars = Math.min(owners.length, MAX_SUGGESTIONS);\n  return (\n    <AvatarStack data-test-id=\"suggested-avatar-stack\">\n      {[...Array(numAvatars - 1)].map((_, i) => (\n        <BackgroundAvatar\n          {...backgroundAvatarProps}\n          key={i}\n          type=\"background\"\n          index={i}\n          hasTooltip={false}\n        />\n      ))}\n      <Avatar\n        {...props}\n        suggested\n        actor={owners[0]}\n        index={numAvatars - 1}\n        tooltip={tooltip}\n        tooltipOptions={{...tooltipOptions, skipWrapper: true}}\n      />\n    </AvatarStack>\n  );\n};\n\nconst AvatarStack = styled('div')`\n  display: flex;\n  align-content: center;\n  flex-direction: row-reverse;\n`;\n\nconst translateStyles = (props: {index: number}) => css`\n  transform: translateX(${60 * props.index}%);\n`;\n\nconst Avatar = styled(ActorAvatar)<{index: number}>`\n  ${translateStyles}\n`;\n\nconst BackgroundAvatar = styled(BaseAvatar)<{index: number}>`\n  ${translateStyles}\n`;\n\nexport default SuggestedAvatarStack;\n","import React, {lazy, Suspense} from 'react';\n\nimport LoadingIndicator from '../loadingIndicator';\nimport Placeholder from '../placeholder';\n\nimport type {DatePickerProps} from './datePicker';\nimport type {DateRangePickerProps} from './dateRangePicker';\n\nconst LazyDatePicker = lazy(() => import('./datePicker'));\nconst LazyDateRangePicker = lazy(() => import('./dateRangePicker'));\n\nconst CalendarSuspenseWrapper: React.FC = ({children}) => {\n  return (\n    <Suspense\n      fallback={\n        <Placeholder width=\"342px\" height=\"254px\">\n          <LoadingIndicator />\n        </Placeholder>\n      }\n    >\n      {children}\n    </Suspense>\n  );\n};\n\nexport const DatePicker = (props: DatePickerProps) => {\n  return (\n    <CalendarSuspenseWrapper>\n      <LazyDatePicker {...props} />\n    </CalendarSuspenseWrapper>\n  );\n};\n\nexport const DateRangePicker = (props: DateRangePickerProps) => {\n  return (\n    <CalendarSuspenseWrapper>\n      <LazyDateRangePicker {...props} />\n    </CalendarSuspenseWrapper>\n  );\n};\n","import type {BarSeriesOption} from 'echarts';\n\nimport {Series} from 'sentry/types/echarts';\n\nimport BarSeries from './series/barSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\nexport type BarChartSeries = Series & Omit<BarSeriesOption, 'data' | 'name'>;\n\nexport interface BarChartProps extends Omit<ChartProps, 'series'> {\n  series: BarChartSeries[];\n  animation?: boolean;\n  stacked?: boolean;\n}\n\nexport function BarChart({series, stacked, xAxis, animation, ...props}: BarChartProps) {\n  return (\n    <BaseChart\n      {...props}\n      xAxis={xAxis !== null ? {...(xAxis || {})} : null}\n      series={series.map(({seriesName, data, ...options}) =>\n        BarSeries({\n          name: seriesName,\n          stack: stacked ? 'stack1' : undefined,\n          data: data.map(({value, name, itemStyle}) => {\n            if (itemStyle === undefined) {\n              return [name, value];\n            }\n            return {value: [name, value], itemStyle};\n          }),\n          animation,\n          ...options,\n        })\n      )}\n    />\n  );\n}\n","import 'echarts/lib/component/grid';\nimport 'echarts/lib/component/graphic';\nimport 'echarts/lib/component/toolbox';\nimport 'zrender/lib/svg/svg';\n\nimport {forwardRef, useMemo} from 'react';\nimport {useTheme} from '@emotion/react';\nimport styled from '@emotion/styled';\nimport type {\n  AxisPointerComponentOption,\n  ECharts,\n  EChartsOption,\n  GridComponentOption,\n  LegendComponentOption,\n  LineSeriesOption,\n  SeriesOption,\n  TooltipComponentFormatterCallback,\n  TooltipComponentFormatterCallbackParams,\n  TooltipComponentOption,\n  VisualMapComponentOption,\n  XAXisComponentOption,\n  YAXisComponentOption,\n} from 'echarts';\nimport * as echarts from 'echarts/core';\nimport ReactEchartsCore from 'echarts-for-react/lib/core';\n\nimport MarkLine from 'sentry/components/charts/components/markLine';\nimport {IS_ACCEPTANCE_TEST} from 'sentry/constants';\nimport space from 'sentry/styles/space';\nimport {\n  EChartChartReadyHandler,\n  EChartClickHandler,\n  EChartDataZoomHandler,\n  EChartEventHandler,\n  EChartFinishedHandler,\n  EChartHighlightHandler,\n  EChartMouseOutHandler,\n  EChartMouseOverHandler,\n  EChartRenderedHandler,\n  EChartRestoreHandler,\n  ReactEchartsRef,\n  Series,\n} from 'sentry/types/echarts';\nimport {defined} from 'sentry/utils';\nimport type {Theme} from 'sentry/utils/theme';\n\nimport Grid from './components/grid';\nimport Legend from './components/legend';\nimport Tooltip, {TooltipSubLabel} from './components/tooltip';\nimport XAxis from './components/xAxis';\nimport YAxis from './components/yAxis';\nimport LineSeries from './series/lineSeries';\nimport {getDiffInMinutes, getDimensionValue, lightenHexToRgb} from './utils';\n\n// TODO(ts): What is the series type? EChartOption.Series's data cannot have\n// `onClick` since it's typically an array.\n//\n// Handle series item clicks (e.g. Releases mark line or a single series\n// item) This is different than when you hover over an \"axis\" line on a chart\n// (e.g.  if there are 2 series for an axis and you're not directly hovered\n// over an item)\n//\n// Calls \"onClick\" inside of series data\nconst handleClick = (clickSeries: any, instance: ECharts) => {\n  if (clickSeries.data) {\n    clickSeries.data.onClick?.(clickSeries, instance);\n  }\n};\n\ntype ReactEchartProps = React.ComponentProps<typeof ReactEchartsCore>;\ntype ReactEChartOpts = NonNullable<ReactEchartProps['opts']>;\n\n/**\n * Used for some properties that can be truncated\n */\ntype Truncateable = {\n  /**\n   * Truncate the label / value some number of characters.\n   * If true is passed, it will use truncate based on a default length.\n   */\n  truncate?: number | boolean;\n};\n\ninterface TooltipOption\n  extends Omit<TooltipComponentOption, 'valueFormatter'>,\n    Truncateable {\n  filter?: (value: number, seriesParam: TooltipComponentOption['formatter']) => boolean;\n  formatAxisLabel?: (\n    value: number,\n    isTimestamp: boolean,\n    utc: boolean,\n    showTimeInTooltip: boolean,\n    addSecondsToTimeFormat: boolean,\n    bucketSize: number | undefined,\n    seriesParamsOrParam: TooltipComponentFormatterCallbackParams\n  ) => string;\n  markerFormatter?: (marker: string, label?: string) => string;\n  nameFormatter?: (name: string) => string;\n  /**\n   * Array containing data that is used to display indented sublabels.\n   */\n  subLabels?: TooltipSubLabel[];\n  valueFormatter?: (\n    value: number,\n    label?: string,\n    seriesParams?: TooltipComponentFormatterCallback<any>\n  ) => string;\n}\n\ntype Props = {\n  /**\n   * Additional Chart Series\n   * This is to pass series to BaseChart bypassing the wrappers like LineChart, AreaChart etc.\n   */\n  additionalSeries?: LineSeriesOption[];\n  /**\n   * If true, ignores height value and auto-scales chart to fit container height.\n   */\n  autoHeightResize?: boolean;\n  /**\n   * Axis pointer options\n   */\n  axisPointer?: AxisPointerComponentOption;\n  /**\n   * Bucket size to display time range in chart tooltip\n   */\n  bucketSize?: number;\n  /**\n   * Array of color codes to use in charts. May also take a function which is\n   * provided with the current theme\n   */\n  colors?: string[] | ((theme: Theme) => string[]);\n  'data-test-id'?: string;\n  /**\n   * DataZoom (allows for zooming of chart)\n   */\n  dataZoom?: EChartsOption['dataZoom'];\n  devicePixelRatio?: ReactEChartOpts['devicePixelRatio'];\n  /**\n   * theme name\n   * example theme: https://github.com/apache/incubator-echarts/blob/master/theme/dark.js\n   */\n  echartsTheme?: ReactEchartProps['theme'];\n  /**\n   * optional, used to determine how xAxis is formatted if `isGroupedByDate == true`\n   */\n  end?: Date;\n  /**\n   * Forwarded Ref\n   */\n  forwardedRef?: React.Ref<ReactEchartsCore>;\n  /**\n   * Graphic options\n   */\n  graphic?: EChartsOption['graphic'];\n  /**\n   * ECharts Grid options. multiple grids allow multiple sub-graphs.\n   */\n  grid?: GridComponentOption | GridComponentOption[];\n  /**\n   * Chart height\n   */\n  height?: ReactEChartOpts['height'];\n  /**\n   * If data is grouped by date; then apply default date formatting to x-axis\n   * and tooltips.\n   */\n  isGroupedByDate?: boolean;\n  /**\n   * states whether not to update chart immediately\n   */\n  lazyUpdate?: boolean;\n  /**\n   * Chart legend\n   */\n  legend?: LegendComponentOption & Truncateable;\n  /**\n   * optional, threshold in minutes used to add seconds to the xAxis datetime format if `isGroupedByDate == true`\n   */\n  minutesThresholdToDisplaySeconds?: number;\n  /**\n   * states whether or not to merge with previous `option`\n   */\n  notMerge?: boolean;\n  onChartReady?: EChartChartReadyHandler;\n  onClick?: EChartClickHandler;\n  onDataZoom?: EChartDataZoomHandler;\n  onFinished?: EChartFinishedHandler;\n  onHighlight?: EChartHighlightHandler;\n  onLegendSelectChanged?: EChartEventHandler<{\n    name: string;\n    selected: Record<string, boolean>;\n    type: 'legendselectchanged';\n  }>;\n  onMouseOut?: EChartMouseOutHandler;\n  onMouseOver?: EChartMouseOverHandler;\n  onRendered?: EChartRenderedHandler;\n  /**\n   * One example of when this is called is restoring chart from zoom levels\n   */\n  onRestore?: EChartRestoreHandler;\n  options?: EChartsOption;\n  /**\n   * optional, used to determine how xAxis is formatted if `isGroupedByDate == true`\n   */\n  period?: string | null;\n  /**\n   * Custom chart props that are implemented by us (and not a feature of eCharts)\n   *\n   * Display previous period as a LineSeries\n   */\n  previousPeriod?: Series[];\n  /**\n   * Use `canvas` when dealing with large datasets\n   * See: https://ecomfe.github.io/echarts-doc/public/en/tutorial.html#Render%20by%20Canvas%20or%20SVG\n   */\n  renderer?: ReactEChartOpts['renderer'];\n  /**\n   * Chart Series\n   * This is different than the interface to higher level charts, these need to\n   * be an array of ECharts \"Series\" components.\n   */\n  series?: SeriesOption[];\n  /**\n   * Format timestamp with date AND time\n   */\n  showTimeInTooltip?: boolean;\n  /**\n   * optional, used to determine how xAxis is formatted if `isGroupedByDate == true`\n   */\n  start?: Date;\n  /**\n   * Inline styles\n   */\n  style?: React.CSSProperties;\n  /**\n   * Toolbox options\n   */\n  toolBox?: EChartsOption['toolbox'];\n  /**\n   * Tooltip options\n   */\n  tooltip?: TooltipOption;\n  /**\n   * If true and there's only one datapoint in series.data, we show a bar chart to increase the visibility.\n   * Especially useful with line / area charts, because you can't draw line with single data point and one alone point is hard to spot.\n   */\n  transformSinglePointToBar?: boolean;\n  /**\n   * If true and there's only one datapoint in series.data, we show a horizontal line to increase the visibility\n   * Similarly to single point bar in area charts a flat line for line charts makes it easy to spot the single data point.\n   */\n  transformSinglePointToLine?: boolean;\n  /**\n   * Use short date formatting for xAxis\n   */\n  useShortDate?: boolean;\n  /**\n   * Formats dates as UTC?\n   */\n  utc?: boolean;\n  /**\n   * ECharts Visual Map Options.\n   */\n  visualMap?: VisualMapComponentOption | VisualMapComponentOption[];\n  /**\n   * Chart width\n   */\n  width?: ReactEChartOpts['width'];\n  /**\n   * Pass `true` to have 2 x-axes with default properties.  Can pass an array\n   * of multiple objects to customize xAxis properties\n   */\n  xAxes?: true | Props['xAxis'][];\n  /**\n   * Must be explicitly `null` to disable xAxis\n   *\n   * Additionally a `truncate` option\n   */\n  xAxis?: (XAXisComponentOption & Truncateable) | null;\n\n  /**\n   * Pass `true` to have 2 y-axes with default properties. Can pass an array of\n   * objects to customize yAxis properties\n   */\n  yAxes?: true | Props['yAxis'][];\n\n  /**\n   * Must be explicitly `null` to disable yAxis\n   */\n  yAxis?: YAXisComponentOption | null;\n};\n\nfunction BaseChartUnwrapped({\n  colors,\n  grid,\n  tooltip,\n  legend,\n  dataZoom,\n  toolBox,\n  graphic,\n  axisPointer,\n  previousPeriod,\n  echartsTheme,\n  devicePixelRatio,\n\n  minutesThresholdToDisplaySeconds,\n  showTimeInTooltip,\n  useShortDate,\n  start,\n  end,\n  period,\n  utc,\n  yAxes,\n  xAxes,\n\n  style,\n  forwardedRef,\n\n  onClick,\n  onLegendSelectChanged,\n  onHighlight,\n  onMouseOut,\n  onMouseOver,\n  onDataZoom,\n  onRestore,\n  onFinished,\n  onRendered,\n\n  options = {},\n  series = [],\n  additionalSeries = [],\n  yAxis = {},\n  xAxis = {},\n\n  autoHeightResize = false,\n  height = 200,\n  width,\n  renderer = 'svg',\n  notMerge = true,\n  lazyUpdate = false,\n  isGroupedByDate = false,\n  transformSinglePointToBar = false,\n  transformSinglePointToLine = false,\n  onChartReady = () => {},\n  'data-test-id': dataTestId,\n}: Props) {\n  const theme = useTheme();\n\n  const hasSinglePoints = (series as LineSeriesOption[] | undefined)?.every(\n    s => Array.isArray(s.data) && s.data.length <= 1\n  );\n\n  const resolveColors =\n    colors !== undefined ? (Array.isArray(colors) ? colors : colors(theme)) : null;\n  const color =\n    resolveColors ||\n    (series.length ? theme.charts.getColorPalette(series.length) : theme.charts.colors);\n  const previousPeriodColors =\n    previousPeriod && previousPeriod.length > 1 ? lightenHexToRgb(color) : undefined;\n\n  const transformedSeries =\n    (hasSinglePoints && transformSinglePointToBar\n      ? (series as LineSeriesOption[] | undefined)?.map(s => ({\n          ...s,\n          type: 'bar',\n          barWidth: 40,\n          barGap: 0,\n          itemStyle: {...(s.areaStyle ?? {})},\n        }))\n      : hasSinglePoints && transformSinglePointToLine\n      ? (series as LineSeriesOption[] | undefined)?.map(s => ({\n          ...s,\n          type: 'line',\n          itemStyle: {...(s.lineStyle ?? {})},\n          markLine:\n            s?.data?.[0]?.[1] !== undefined\n              ? MarkLine({\n                  silent: true,\n                  lineStyle: {\n                    type: 'solid',\n                    width: 1.5,\n                  },\n                  data: [{yAxis: s?.data?.[0]?.[1]}],\n                  label: {\n                    show: false,\n                  },\n                })\n              : undefined,\n        }))\n      : series) ?? [];\n\n  const transformedPreviousPeriod =\n    previousPeriod?.map((previous, seriesIndex) =>\n      LineSeries({\n        name: previous.seriesName,\n        data: previous.data.map(({name, value}) => [name, value]),\n        lineStyle: {\n          color: previousPeriodColors ? previousPeriodColors[seriesIndex] : theme.gray200,\n          type: 'dotted',\n        },\n        itemStyle: {\n          color: previousPeriodColors ? previousPeriodColors[seriesIndex] : theme.gray200,\n        },\n        stack: 'previous',\n        animation: false,\n      })\n    ) ?? [];\n\n  const resolvedSeries = !previousPeriod\n    ? [...transformedSeries, ...additionalSeries]\n    : [...transformedSeries, ...transformedPreviousPeriod, ...additionalSeries];\n\n  const defaultAxesProps = {theme};\n\n  const yAxisOrCustom = !yAxes\n    ? yAxis !== null\n      ? YAxis({theme, ...yAxis})\n      : undefined\n    : Array.isArray(yAxes)\n    ? yAxes.map(axis => YAxis({...axis, theme}))\n    : [YAxis(defaultAxesProps), YAxis(defaultAxesProps)];\n\n  /**\n   * If true seconds will be added to the time format in the tooltips and chart xAxis\n   */\n  const addSecondsToTimeFormat =\n    isGroupedByDate && defined(minutesThresholdToDisplaySeconds)\n      ? getDiffInMinutes({start, end, period}) <= minutesThresholdToDisplaySeconds\n      : false;\n\n  const xAxisOrCustom = !xAxes\n    ? xAxis !== null\n      ? XAxis({\n          ...xAxis,\n          theme,\n          useShortDate,\n          start,\n          end,\n          period,\n          isGroupedByDate,\n          addSecondsToTimeFormat,\n          utc,\n        })\n      : undefined\n    : Array.isArray(xAxes)\n    ? xAxes.map(axis =>\n        XAxis({\n          ...axis,\n          theme,\n          useShortDate,\n          start,\n          end,\n          period,\n          isGroupedByDate,\n          addSecondsToTimeFormat,\n          utc,\n        })\n      )\n    : [XAxis(defaultAxesProps), XAxis(defaultAxesProps)];\n\n  const seriesData =\n    Array.isArray(series?.[0]?.data) && series[0].data.length > 1\n      ? series[0].data\n      : undefined;\n  const bucketSize = seriesData ? seriesData[1][0] - seriesData[0][0] : undefined;\n\n  const tooltipOrNone =\n    tooltip !== null\n      ? Tooltip({\n          showTimeInTooltip,\n          isGroupedByDate,\n          addSecondsToTimeFormat,\n          utc,\n          bucketSize,\n          ...tooltip,\n        })\n      : undefined;\n\n  const chartOption = {\n    ...options,\n    animation: IS_ACCEPTANCE_TEST ? false : options.animation ?? true,\n    useUTC: utc,\n    color,\n    grid: Array.isArray(grid) ? grid.map(Grid) : Grid(grid),\n    tooltip: tooltipOrNone,\n    legend: legend ? Legend({theme, ...legend}) : undefined,\n    yAxis: yAxisOrCustom,\n    xAxis: xAxisOrCustom,\n    series: resolvedSeries,\n    toolbox: toolBox,\n    axisPointer,\n    dataZoom,\n    graphic,\n  };\n\n  const chartStyles = {\n    height: autoHeightResize ? '100%' : getDimensionValue(height),\n    width: getDimensionValue(width),\n    ...style,\n  };\n\n  // XXX(epurkhiser): Echarts can become unhappy if one of these event handlers\n  // causes the chart to re-render and be passed a whole different instance of\n  // event handlers.\n  //\n  // We use React.useMemo to keep the value across renders\n  //\n  const eventsMap = useMemo(\n    () =>\n      ({\n        click: (props, instance) => {\n          handleClick(props, instance);\n          onClick?.(props, instance);\n        },\n        highlight: (props, instance) => onHighlight?.(props, instance),\n        mouseout: (props, instance) => onMouseOut?.(props, instance),\n        mouseover: (props, instance) => onMouseOver?.(props, instance),\n        datazoom: (props, instance) => onDataZoom?.(props, instance),\n        restore: (props, instance) => onRestore?.(props, instance),\n        finished: (props, instance) => onFinished?.(props, instance),\n        rendered: (props, instance) => onRendered?.(props, instance),\n        legendselectchanged: (props, instance) =>\n          onLegendSelectChanged?.(props, instance),\n      } as ReactEchartProps['onEvents']),\n    [\n      onClick,\n      onHighlight,\n      onLegendSelectChanged,\n      onMouseOut,\n      onMouseOver,\n      onDataZoom,\n      onRestore,\n      onFinished,\n      onRendered,\n    ]\n  );\n\n  return (\n    <ChartContainer autoHeightResize={autoHeightResize} data-test-id={dataTestId}>\n      <ReactEchartsCore\n        ref={forwardedRef}\n        echarts={echarts}\n        notMerge={notMerge}\n        lazyUpdate={lazyUpdate}\n        theme={echartsTheme}\n        onChartReady={onChartReady}\n        onEvents={eventsMap}\n        style={chartStyles}\n        opts={{\n          height: autoHeightResize ? undefined : height,\n          width,\n          renderer,\n          devicePixelRatio,\n        }}\n        option={chartOption}\n      />\n    </ChartContainer>\n  );\n}\n\n// Contains styling for chart elements as we can't easily style those\n// elements directly\nconst ChartContainer = styled('div')<{autoHeightResize: boolean}>`\n  ${p => p.autoHeightResize && 'height: 100%;'}\n\n  /* Tooltip styling */\n  .tooltip-series,\n  .tooltip-date {\n    color: ${p => p.theme.subText};\n    font-family: ${p => p.theme.text.family};\n    font-variant-numeric: tabular-nums;\n    padding: ${space(1)} ${space(2)};\n    border-radius: ${p => p.theme.borderRadius} ${p => p.theme.borderRadius} 0 0;\n  }\n  .tooltip-series {\n    border-bottom: none;\n  }\n  .tooltip-series-solo {\n    border-radius: ${p => p.theme.borderRadius};\n  }\n  .tooltip-label {\n    margin-right: ${space(1)};\n  }\n  .tooltip-label strong {\n    font-weight: normal;\n    color: ${p => p.theme.textColor};\n  }\n  .tooltip-label-indent {\n    margin-left: 18px;\n  }\n  .tooltip-series > div {\n    display: flex;\n    justify-content: space-between;\n    align-items: baseline;\n  }\n  .tooltip-date {\n    border-top: solid 1px ${p => p.theme.innerBorder};\n    text-align: center;\n    position: relative;\n    width: auto;\n    border-radius: ${p => p.theme.borderRadiusBottom};\n  }\n  .tooltip-arrow {\n    top: 100%;\n    left: 50%;\n    position: absolute;\n    pointer-events: none;\n    border-left: 8px solid transparent;\n    border-right: 8px solid transparent;\n    border-top: 8px solid ${p => p.theme.backgroundElevated};\n    margin-left: -8px;\n    &:before {\n      border-left: 8px solid transparent;\n      border-right: 8px solid transparent;\n      border-top: 8px solid ${p => p.theme.translucentBorder};\n      content: '';\n      display: block;\n      position: absolute;\n      top: -7px;\n      left: -8px;\n      z-index: -1;\n    }\n  }\n\n  .echarts-for-react div:first-of-type {\n    width: 100% !important;\n  }\n\n  .echarts-for-react text {\n    font-variant-numeric: tabular-nums !important;\n  }\n\n  /* Tooltip description styling */\n  .tooltip-description {\n    color: ${p => p.theme.white};\n    border-radius: ${p => p.theme.borderRadius};\n    background: #000;\n    opacity: 0.9;\n    padding: 5px 10px;\n    position: relative;\n    font-weight: bold;\n    font-size: ${p => p.theme.fontSizeSmall};\n    line-height: 1.4;\n    font-family: ${p => p.theme.text.family};\n    max-width: 230px;\n    min-width: 230px;\n    white-space: normal;\n    text-align: center;\n    :after {\n      content: '';\n      position: absolute;\n      top: 100%;\n      left: 50%;\n      width: 0;\n      height: 0;\n      border-left: 5px solid transparent;\n      border-right: 5px solid transparent;\n      border-top: 5px solid #000;\n      transform: translateX(-50%);\n    }\n  }\n`;\n\nconst BaseChart = forwardRef<ReactEchartsRef, Props>((props, ref) => (\n  <BaseChartUnwrapped forwardedRef={ref} {...props} />\n));\n\nBaseChart.displayName = 'forwardRef(BaseChart)';\n\nexport default BaseChart;\n","import type {GridComponentOption} from 'echarts';\nimport merge from 'lodash/merge';\n/**\n * Drawing grid in rectangular coordinates\n *\n * e.g. alignment of your chart?\n */\nexport default function Grid(props: GridComponentOption = {}): GridComponentOption {\n  return merge(\n    {\n      top: 20,\n      bottom: 20,\n      // This should allow for sufficient space for Y-axis labels\n      left: 4,\n      right: '0%',\n      containLabel: true,\n    },\n    props\n  );\n}\n","import 'echarts/lib/component/legend';\nimport 'echarts/lib/component/legendScroll';\n\nimport type {LegendComponentOption} from 'echarts';\nimport merge from 'lodash/merge';\n\nimport BaseChart from 'sentry/components/charts/baseChart';\nimport {Theme} from 'sentry/utils/theme';\n\nimport {truncationFormatter} from '../utils';\n\ntype ChartProps = React.ComponentProps<typeof BaseChart>;\n\nexport default function Legend(\n  props: ChartProps['legend'] & {theme: Theme}\n): LegendComponentOption {\n  const {truncate, theme, ...rest} = props ?? {};\n  const formatter = (value: string) => truncationFormatter(value, truncate ?? 0);\n\n  return merge(\n    {\n      show: true,\n      type: 'scroll' as const,\n      padding: 0,\n      formatter,\n      icon: 'circle',\n      itemHeight: 14,\n      itemWidth: 8,\n      itemGap: 12,\n      align: 'left' as const,\n      textStyle: {\n        color: theme.textColor,\n        verticalAlign: 'top',\n        fontSize: 11,\n        fontFamily: theme.text.family,\n        lineHeight: 14,\n      },\n      inactiveColor: theme.inactive,\n    },\n    rest\n  );\n}\n","import 'echarts/lib/component/markLine';\n\nimport type {LineSeriesOption} from 'echarts';\n\n/**\n * eCharts markLine\n *\n * See https://echarts.apache.org/en/option.html#series-line.markLine\n */\nexport default function MarkLine(\n  props: LineSeriesOption['markLine']\n): LineSeriesOption['markLine'] {\n  return {\n    // The second symbol is a very ugly arrow, we don't want it\n    symbol: ['none', 'none'],\n    ...props,\n  };\n}\n","import 'echarts/lib/component/tooltip';\n\nimport {useTheme} from '@emotion/react';\nimport type {TooltipComponentFormatterCallback, TooltipComponentOption} from 'echarts';\nimport moment from 'moment';\n\nimport BaseChart from 'sentry/components/charts/baseChart';\nimport {DataPoint} from 'sentry/types/echarts';\nimport {getFormattedDate, getTimeFormat} from 'sentry/utils/dates';\n\nimport {truncationFormatter} from '../utils';\n\ntype ChartProps = React.ComponentProps<typeof BaseChart>;\n\nexport function defaultFormatAxisLabel(\n  value: number,\n  isTimestamp: boolean,\n  utc: boolean,\n  showTimeInTooltip: boolean,\n  addSecondsToTimeFormat: boolean,\n  bucketSize?: number\n) {\n  if (!isTimestamp) {\n    return value;\n  }\n\n  if (!bucketSize) {\n    const format = `MMM D, YYYY ${\n      showTimeInTooltip ? getTimeFormat({displaySeconds: addSecondsToTimeFormat}) : ''\n    }`.trim();\n    return getFormattedDate(value, format, {local: !utc});\n  }\n\n  const now = moment();\n  const bucketStart = moment(value);\n  const bucketEnd = moment(value + bucketSize);\n\n  const showYear = now.year() !== bucketStart.year() || now.year() !== bucketEnd.year();\n  const showEndDate = bucketStart.date() !== bucketEnd.date();\n\n  const formatStart = `MMM D${showYear ? ', YYYY' : ''} ${\n    showTimeInTooltip ? getTimeFormat({displaySeconds: addSecondsToTimeFormat}) : ''\n  }`.trim();\n  const formatEnd = `${showEndDate ? `MMM D${showYear ? ', YYYY' : ''} ` : ''}${\n    showTimeInTooltip ? getTimeFormat({displaySeconds: addSecondsToTimeFormat}) : ''\n  }`.trim();\n\n  return `${getFormattedDate(bucketStart, formatStart, {\n    local: !utc,\n  })}  ${getFormattedDate(bucketEnd, formatEnd, {local: !utc})}`;\n}\n\nfunction defaultValueFormatter(value: string | number) {\n  if (typeof value === 'number') {\n    return value.toLocaleString();\n  }\n\n  return value;\n}\n\nfunction defaultNameFormatter(value: string) {\n  return value;\n}\n\nfunction defaultMarkerFormatter(value: string) {\n  return value;\n}\n\nfunction getSeriesValue(series: any, offset: number) {\n  if (!series.data) {\n    return undefined;\n  }\n  if (Array.isArray(series.data)) {\n    return series.data[offset];\n  }\n  if (Array.isArray(series.data.value)) {\n    return series.data.value[offset];\n  }\n\n  return undefined;\n}\n\ntype NeededChartProps = 'isGroupedByDate' | 'showTimeInTooltip' | 'utc' | 'bucketSize';\n\ntype TooltipFormatters =\n  | 'truncate'\n  | 'filter'\n  | 'formatAxisLabel'\n  | 'valueFormatter'\n  | 'nameFormatter'\n  | 'markerFormatter';\n\nexport type TooltipSubLabel = {\n  data: DataPoint[];\n  label: string;\n  parentLabel: string;\n};\n\ntype FormatterOptions = Pick<NonNullable<ChartProps['tooltip']>, TooltipFormatters> &\n  Pick<ChartProps, NeededChartProps> & {\n    /**\n     * If true seconds will be added to the Axis label time format\n     */\n    addSecondsToTimeFormat?: boolean;\n    /**\n     * Array containing data that is used to display indented sublabels.\n     */\n    subLabels?: TooltipSubLabel[];\n  };\n\nfunction getFormatter({\n  filter,\n  isGroupedByDate,\n  showTimeInTooltip,\n  truncate,\n  formatAxisLabel,\n  utc,\n  bucketSize,\n  valueFormatter = defaultValueFormatter,\n  nameFormatter = defaultNameFormatter,\n  markerFormatter = defaultMarkerFormatter,\n  subLabels = [],\n  addSecondsToTimeFormat = false,\n}: FormatterOptions): TooltipComponentFormatterCallback<any> {\n  const getFilter = (seriesParam: any) => {\n    // Series do not necessarily have `data` defined, e.g. releases don't have `data`, but rather\n    // has a series using strictly `markLine`s.\n    // However, real series will have `data` as a tuple of (label, value) or be\n    // an object with value/label keys.\n    const value = getSeriesValue(seriesParam, 0);\n    if (typeof filter === 'function') {\n      return filter(value, seriesParam);\n    }\n\n    return true;\n  };\n\n  return seriesParamsOrParam => {\n    // If this is a tooltip for the axis, it will include all series for that axis item.\n    // In this case seriesParamsOrParam will be of type `Object[]`\n    //\n    // Otherwise, it will be an `Object`, and is a tooltip for a single item\n    const axisFormatterOrDefault = formatAxisLabel || defaultFormatAxisLabel;\n\n    // Special tooltip if component is a `markPoint`\n    if (\n      !Array.isArray(seriesParamsOrParam) &&\n      // TODO(ts): The EChart types suggest that this can _only_ be `series`,\n      //           but assuming this code is correct (which I have not\n      //           verified) their types may be wrong.\n      (seriesParamsOrParam.componentType as unknown) === 'markPoint'\n    ) {\n      const timestamp = seriesParamsOrParam.data.coord[0] as number;\n      const label = axisFormatterOrDefault(\n        timestamp,\n        !!isGroupedByDate,\n        !!utc,\n        !!showTimeInTooltip,\n        addSecondsToTimeFormat,\n        bucketSize,\n        seriesParamsOrParam\n      );\n      // eCharts sets seriesName as null when `componentType` !== 'series'\n      const truncatedName = truncationFormatter(\n        seriesParamsOrParam.data.labelForValue,\n        truncate\n      );\n      const formattedValue = valueFormatter(\n        seriesParamsOrParam.data.coord[1],\n        seriesParamsOrParam.name\n      );\n\n      return [\n        '<div class=\"tooltip-series\">',\n        `<div>\n          <span class=\"tooltip-label\"><strong>${seriesParamsOrParam.name}</strong></span>\n          ${truncatedName}: ${formattedValue}\n        </div>`,\n        '</div>',\n        `<div class=\"tooltip-date\">${label}</div>`,\n        '</div>',\n      ].join('');\n    }\n\n    const seriesParams = Array.isArray(seriesParamsOrParam)\n      ? seriesParamsOrParam\n      : [seriesParamsOrParam];\n\n    // If axis, timestamp comes from axis, otherwise for a single item it is defined in the data attribute.\n    // The data attribute is usually a list of [name, value] but can also be an object of {name, value} when\n    // there is item specific formatting being used.\n    const timestamp = Array.isArray(seriesParamsOrParam)\n      ? seriesParams[0].value[0]\n      : getSeriesValue(seriesParams[0], 0);\n\n    const date =\n      seriesParams.length &&\n      axisFormatterOrDefault(\n        timestamp,\n        !!isGroupedByDate,\n        !!utc,\n        !!showTimeInTooltip,\n        addSecondsToTimeFormat,\n        bucketSize,\n        seriesParamsOrParam\n      );\n\n    return [\n      '<div class=\"tooltip-series\">',\n      seriesParams\n        .filter(getFilter)\n        .map(s => {\n          const formattedLabel = nameFormatter(\n            truncationFormatter(s.seriesName ?? '', truncate)\n          );\n          const value = valueFormatter(getSeriesValue(s, 1), s.seriesName, s);\n\n          const marker = markerFormatter(s.marker ?? '', s.seriesName);\n\n          const filteredSubLabels = subLabels.filter(\n            subLabel => subLabel.parentLabel === s.seriesName\n          );\n\n          if (!!filteredSubLabels.length) {\n            const labelWithSubLabels = [\n              `<div><span class=\"tooltip-label\">${marker} <strong>${formattedLabel}</strong></span> ${value}</div>`,\n            ];\n\n            for (const subLabel of filteredSubLabels) {\n              labelWithSubLabels.push(\n                `<div><span class=\"tooltip-label tooltip-label-indent\"><strong>${\n                  subLabel.label\n                }</strong></span> ${valueFormatter(\n                  subLabel.data[s.dataIndex].value\n                )}</div>`\n              );\n            }\n\n            return labelWithSubLabels.join('');\n          }\n\n          return `<div><span class=\"tooltip-label\">${marker} <strong>${formattedLabel}</strong></span> ${value}</div>`;\n        })\n        .join(''),\n      '</div>',\n      `<div class=\"tooltip-date\">${date}</div>`,\n      '<div class=\"tooltip-arrow\"></div>',\n    ].join('');\n  };\n}\n\ntype Props = ChartProps['tooltip'] &\n  Pick<ChartProps, NeededChartProps> &\n  Pick<FormatterOptions, 'addSecondsToTimeFormat'>;\n\nexport default function Tooltip({\n  filter,\n  isGroupedByDate,\n  showTimeInTooltip,\n  addSecondsToTimeFormat,\n  formatter,\n  truncate,\n  utc,\n  bucketSize,\n  formatAxisLabel,\n  valueFormatter,\n  nameFormatter,\n  markerFormatter,\n  hideDelay,\n  subLabels,\n  ...props\n}: Props = {}): TooltipComponentOption {\n  const theme = useTheme();\n\n  formatter =\n    formatter ||\n    getFormatter({\n      filter,\n      isGroupedByDate,\n      showTimeInTooltip,\n      addSecondsToTimeFormat,\n      truncate,\n      utc,\n      bucketSize,\n      formatAxisLabel,\n      valueFormatter,\n      nameFormatter,\n      markerFormatter,\n      subLabels,\n    });\n\n  return {\n    show: true,\n    trigger: 'item',\n    backgroundColor: `${theme.backgroundElevated}`,\n    borderWidth: 0,\n    extraCssText: `box-shadow: 0 0 0 1px ${theme.translucentBorder}, ${theme.dropShadowHeavy}`,\n    transitionDuration: 0,\n    padding: 0,\n    className: 'tooltip-container',\n    // Default hideDelay in echarts docs is 100ms\n    hideDelay: hideDelay || 100,\n    /**\n     * @link https://echarts.apache.org/en/option.html#tooltip.position\n     *\n     * @param pos mouse position\n     * @param _params same as formatter\n     * @param dom dom object of tooltip\n     * @param _rec graphic elements\n     * @param _size The size of dom echarts container.\n     */\n    position(pos, _params, dom, _rec, size) {\n      // Types seem to be broken on dom\n      dom = dom as HTMLDivElement;\n      // Center the tooltip slightly above the cursor.\n      const [tipWidth, tipHeight] = size.contentSize;\n\n      // Get the left offset of the tip container (the chart)\n      // so that we can estimate overflows\n      const chartLeft =\n        dom.parentNode instanceof Element\n          ? dom.parentNode.getBoundingClientRect().left\n          : 0;\n\n      // Determine the new left edge.\n      let leftPos = Number(pos[0]) - tipWidth / 2;\n      // And the right edge taking into account the chart left offset\n      const rightEdge = chartLeft + Number(pos[0]) + tipWidth / 2;\n\n      let arrowPosition: string | undefined;\n      if (rightEdge >= window.innerWidth - 20) {\n        // If the tooltip would leave viewport on the right, pin it.\n        leftPos -= rightEdge - window.innerWidth + 20;\n        arrowPosition = `${Number(pos[0]) - leftPos}px`;\n      } else if (leftPos + chartLeft - 20 <= 0) {\n        // If the tooltip would leave viewport on the left, pin it.\n        leftPos = chartLeft * -1 + 20;\n        arrowPosition = `${Number(pos[0]) - leftPos}px`;\n      } else {\n        // Tooltip not near the window edge, reset position\n        arrowPosition = '50%';\n      }\n\n      const arrow = dom.querySelector<HTMLDivElement>('.tooltip-arrow');\n      if (arrow) {\n        arrow.style.left = arrowPosition;\n      }\n\n      return {left: leftPos, top: Number(pos[1]) - tipHeight - 20};\n    },\n    formatter,\n    ...props,\n  };\n}\n","import type {XAXisComponentOption} from 'echarts';\nimport merge from 'lodash/merge';\n\nimport BaseChart from 'sentry/components/charts/baseChart';\nimport {truncationFormatter, useShortInterval} from 'sentry/components/charts/utils';\nimport {getFormattedDate, getTimeFormat} from 'sentry/utils/dates';\nimport {Theme} from 'sentry/utils/theme';\n\ntype ChartProps = React.ComponentProps<typeof BaseChart>;\ntype HelperProps =\n  | 'isGroupedByDate'\n  | 'useShortDate'\n  | 'start'\n  | 'end'\n  | 'period'\n  | 'utc';\n\ntype Props = ChartProps['xAxis'] &\n  Pick<ChartProps, HelperProps> & {theme: Theme; addSecondsToTimeFormat?: boolean};\n\nfunction XAxis({\n  isGroupedByDate,\n  useShortDate,\n  theme,\n\n  start,\n  end,\n  period,\n  utc,\n\n  addSecondsToTimeFormat = false,\n  ...props\n}: Props): XAXisComponentOption {\n  const AxisLabelFormatter = (value: string, index: number) => {\n    const timeFormat = getTimeFormat({displaySeconds: addSecondsToTimeFormat});\n    const dateFormat = useShortDate ? 'MMM Do' : `MMM D ${timeFormat}`;\n    const firstItem = index === 0;\n    const format =\n      useShortInterval({start, end, period}) && !firstItem ? timeFormat : dateFormat;\n\n    if (isGroupedByDate) {\n      return getFormattedDate(value, format, {local: !utc});\n    }\n\n    if (props.truncate) {\n      return truncationFormatter(value, props.truncate);\n    }\n\n    return undefined;\n  };\n\n  const defaults: XAXisComponentOption = {\n    type: isGroupedByDate ? 'time' : 'category',\n    splitNumber: 4,\n    axisLine: {\n      lineStyle: {\n        color: theme.chartLabel,\n      },\n    },\n    axisTick: {\n      lineStyle: {\n        color: theme.chartLabel,\n      },\n    },\n    splitLine: {\n      show: false,\n    },\n    axisLabel: {\n      hideOverlap: true,\n      color: theme.chartLabel,\n      fontFamily: theme.text.family,\n      margin: 12,\n\n      // This was default with ChartZoom, we are making it default for all charts now\n      // Otherwise the xAxis can look congested when there is always a min/max label\n      showMaxLabel: false,\n      showMinLabel: false,\n\n      // @ts-expect-error formatter type is missing\n      formatter: AxisLabelFormatter,\n    },\n    axisPointer: {\n      show: true,\n      type: 'line',\n      label: {\n        show: false,\n      },\n      lineStyle: {\n        type: 'solid',\n        width: 0.5,\n      },\n    },\n  };\n\n  return merge(defaults, props);\n}\n\nexport default XAxis;\n","import type {YAXisComponentOption} from 'echarts';\nimport merge from 'lodash/merge';\n\nimport {Theme} from 'sentry/utils/theme';\n\ntype Props = YAXisComponentOption & {theme: Theme};\n\nexport default function YAxis({theme, ...props}: Props): YAXisComponentOption {\n  return merge(\n    {\n      axisLine: {\n        show: false,\n      },\n      axisTick: {\n        show: false,\n      },\n      axisLabel: {\n        color: theme.chartLabel,\n        fontFamily: theme.text.family,\n      },\n      splitLine: {\n        lineStyle: {\n          color: theme.chartLineColor,\n          opacity: 0.3,\n        },\n      },\n    },\n    props\n  );\n}\n","import 'echarts/lib/chart/bar';\n\nimport type {BarSeriesOption} from 'echarts';\n\nfunction barSeries(props: BarSeriesOption): BarSeriesOption {\n  return {\n    ...props,\n    type: 'bar',\n  };\n}\n\nexport default barSeries;\n","import 'echarts/lib/chart/line';\n\nimport type {LineSeriesOption} from 'echarts';\n\nimport theme from 'sentry/utils/theme';\n\nexport default function LineSeries(props: LineSeriesOption): LineSeriesOption {\n  return {\n    showSymbol: false,\n    symbolSize: theme.charts.symbolSize,\n    ...props,\n    type: 'line',\n    emphasis: {\n      ...props.emphasis,\n      scale: false,\n      lineStyle: {\n        // disable color highlight on hover\n        color: props.color as string,\n        width: undefined,\n      },\n      areaStyle: {\n        // Disable AreaSeries highlight on hover\n        color: props.areaStyle?.color ?? (props.color as string),\n        opacity: props.areaStyle?.opacity,\n      },\n    },\n  };\n}\n","const Checkbox = (props: React.InputHTMLAttributes<HTMLInputElement>) => (\n  <input type=\"checkbox\" {...props} />\n);\n\nCheckbox.defaultProps = {\n  checked: false,\n};\n\nexport default Checkbox;\n","import {css, useTheme} from '@emotion/react';\nimport classNames from 'classnames';\n\nimport DeprecatedDropdownMenu from 'sentry/components/deprecatedDropdownMenu';\nimport {IconChevron} from 'sentry/icons';\nimport {Theme} from 'sentry/utils/theme';\n\nconst getRootCss = (theme: Theme) => css`\n  .dropdown-menu {\n    & > li > a {\n      color: ${theme.textColor};\n\n      &:hover,\n      &:focus {\n        color: inherit;\n        background-color: ${theme.hover};\n      }\n    }\n\n    & .disabled {\n      cursor: not-allowed;\n      &:hover {\n        background: inherit;\n        color: inherit;\n      }\n    }\n  }\n\n  .dropdown-submenu:hover > span {\n    color: ${theme.textColor};\n    background: ${theme.hover};\n  }\n`;\n\n// .dropdown-actor-title = flexbox to fix vertical alignment on firefox Need\n// the extra container because dropdown-menu alignment is off if\n// `dropdown-actor` is a flexbox\n\ntype Props = Omit<\n  Omit<DeprecatedDropdownMenu['props'], 'children'>,\n  keyof typeof DeprecatedDropdownMenu.defaultProps\n> &\n  Partial<typeof DeprecatedDropdownMenu.defaultProps> & {\n    children: React.ReactNode;\n    /**\n     * Always render children of dropdown menu, this is included to support menu\n     * items that open a confirm modal. Otherwise when dropdown menu hides, the\n     * modal also gets unmounted\n     */\n    alwaysRenderMenu?: boolean;\n    anchorMiddle?: boolean;\n    /**\n     * Anchors menu to the right\n     */\n    anchorRight?: boolean;\n    /**\n     * display dropdown caret\n     */\n    caret?: boolean;\n    className?: string;\n    customTitle?: React.ReactNode;\n    disabled?: boolean;\n    menuClasses?: string;\n    title?: React.ReactNode;\n    topLevelClasses?: string;\n  };\n\nfunction DropdownLink({\n  anchorMiddle,\n  title,\n  customTitle,\n  children,\n  menuClasses,\n  className,\n  topLevelClasses,\n  anchorRight = false,\n  disabled = false,\n  caret = true,\n  alwaysRenderMenu = true,\n  ...otherProps\n}: Props) {\n  const theme = useTheme();\n\n  return (\n    <DeprecatedDropdownMenu alwaysRenderMenu={alwaysRenderMenu} {...otherProps}>\n      {({isOpen, getRootProps, getActorProps, getMenuProps}) => {\n        const shouldRenderMenu = alwaysRenderMenu || isOpen;\n        const cx = classNames('dropdown-actor', className, {\n          'dropdown-menu-right': anchorRight,\n          'dropdown-toggle': true,\n          hover: isOpen,\n          disabled,\n        });\n        const topLevelCx = classNames('dropdown', topLevelClasses, {\n          'pull-right': anchorRight,\n          'anchor-right': anchorRight,\n          'anchor-middle': anchorMiddle,\n          open: isOpen,\n        });\n\n        const {onClick: onClickActor, ...actorProps} = getActorProps({\n          className: cx,\n        });\n\n        return (\n          <span\n            css={getRootCss(theme)}\n            {...getRootProps({\n              className: topLevelCx,\n            })}\n            data-test-id=\"dropdown-link\"\n          >\n            <a onClick={disabled ? undefined : onClickActor} {...actorProps}>\n              {customTitle || (\n                <div className=\"dropdown-actor-title\">\n                  {title}\n                  {caret && <IconChevron direction={isOpen ? 'up' : 'down'} size=\"xs\" />}\n                </div>\n              )}\n            </a>\n\n            {shouldRenderMenu && (\n              <ul\n                {...getMenuProps({\n                  className: classNames(menuClasses, 'dropdown-menu'),\n                })}\n              >\n                {children}\n              </ul>\n            )}\n          </span>\n        );\n      }}\n    </DeprecatedDropdownMenu>\n  );\n}\n\nexport default DropdownLink;\n","import {Component} from 'react';\n\nimport {addLoadingMessage, clearIndicators} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport Form from 'sentry/components/forms/form';\nimport {t} from 'sentry/locale';\n\ntype Props = Form['props'] & {\n  apiEndpoint: string;\n  apiMethod: string;\n  onSubmit?: (data: Record<string, any>) => void;\n};\n\nexport default class ApiForm extends Component<Props> {\n  componentWillUnmount() {\n    this.api.clear();\n  }\n\n  api: Client = new Client();\n\n  onSubmit = (\n    data: Record<string, any>,\n    onSuccess: (response: Record<string, any>) => void,\n    onError: (error: any) => void\n  ) => {\n    this.props.onSubmit && this.props.onSubmit(data);\n    addLoadingMessage(t('Saving changes\\u2026'));\n    this.api.request(this.props.apiEndpoint, {\n      method: this.props.apiMethod,\n      data,\n      success: response => {\n        clearIndicators();\n        onSuccess(response);\n      },\n      error: error => {\n        clearIndicators();\n        onError(error);\n      },\n    });\n  };\n\n  render() {\n    const {\n      onSubmit: _onSubmit,\n      apiMethod: _apiMethod,\n      apiEndpoint: _apiEndpoint,\n      ...otherProps\n    } = this.props;\n\n    return <Form onSubmit={this.onSubmit} {...otherProps} />;\n  }\n}\n","import styled from '@emotion/styled';\n\nimport Checkbox from 'sentry/components/checkbox';\nimport FieldDescription from 'sentry/components/forms/field/fieldDescription';\nimport FieldHelp from 'sentry/components/forms/field/fieldHelp';\nimport FieldLabel from 'sentry/components/forms/field/fieldLabel';\nimport FieldRequiredBadge from 'sentry/components/forms/field/fieldRequiredBadge';\nimport FormField from 'sentry/components/forms/formField';\nimport space from 'sentry/styles/space';\n\ntype FormFieldProps = Omit<\n  React.ComponentProps<typeof FormField>,\n  'children' | 'help' | 'disabled' | 'required'\n>;\n\ntype Props = {\n  /**\n   * The input name\n   */\n  name: string;\n  /**\n   * Is the field disabled?\n   */\n  disabled?: boolean;\n  /**\n   * Help or description of the field\n   */\n  help?: React.ReactNode | React.ReactElement | ((props: Props) => React.ReactNode);\n  /**\n   * The control's `id` property\n   */\n  id?: string;\n  /**\n   * User visible field label\n   */\n  label?: React.ReactNode;\n  /**\n   * Is the field required?\n   */\n  required?: boolean;\n} & FormFieldProps;\n\nfunction CheckboxField(props: Props) {\n  const {name, disabled, stacked, id, required, label, help} = props;\n\n  const helpElement = typeof help === 'function' ? help(props) : help;\n\n  return (\n    <FormField name={name} inline={false} stacked={stacked}>\n      {({onChange, value}) => {\n        function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n          const newValue = e.target.checked;\n          onChange?.(newValue, e);\n        }\n\n        return (\n          <FieldLayout>\n            <ControlWrapper>\n              <Checkbox\n                id={id}\n                name={name}\n                disabled={disabled}\n                checked={value === true}\n                onChange={handleChange}\n              />\n            </ControlWrapper>\n            <FieldDescription htmlFor={id}>\n              {label && (\n                <FieldLabel disabled={disabled}>\n                  <span>\n                    {label}\n                    {required && <FieldRequiredBadge />}\n                  </span>\n                </FieldLabel>\n              )}\n              {helpElement && (\n                <FieldHelp stacked={stacked} inline>\n                  {helpElement}\n                </FieldHelp>\n              )}\n            </FieldDescription>\n          </FieldLayout>\n        );\n      }}\n    </FormField>\n  );\n}\n\nconst ControlWrapper = styled('span')`\n  align-self: flex-start;\n  display: flex;\n  margin-right: ${space(1)};\n\n  & input {\n    margin: 0;\n  }\n`;\n\nconst FieldLayout = styled('div')`\n  display: flex;\n  flex-direction: row;\n`;\n\nexport default CheckboxField;\n","import {forwardRef} from 'react';\n\ntype OnChangeHandler = (\n  value: boolean,\n  event: React.ChangeEvent<HTMLInputElement>\n) => void;\n\ntype OptionProps = {\n  label: string;\n  value: string;\n  checked?: boolean;\n  disabled?: boolean;\n  name?: string;\n  onBlur?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onChange?: OnChangeHandler;\n};\n\nconst Option = forwardRef(function Option(\n  {name, disabled, label, value, checked, onChange, onBlur}: OptionProps,\n  ref: React.Ref<HTMLInputElement>\n) {\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const isTrue = e.target.value === 'true';\n\n    onChange?.(isTrue, e);\n    // Manually trigger blur to trigger saving on change\n    onBlur?.(e);\n  }\n\n  return (\n    <div className=\"radio\">\n      <label style={{fontWeight: 'normal'}}>\n        <input\n          ref={ref}\n          type=\"radio\"\n          value={value}\n          name={name}\n          checked={checked}\n          onChange={handleChange}\n          disabled={disabled}\n        />{' '}\n        {label}\n      </label>\n    </div>\n  );\n});\n\ntype Props = {\n  disabled?: boolean;\n  name?: string;\n  noLabel?: string;\n  onBlur?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onChange?: OnChangeHandler;\n  value?: boolean;\n  yesFirst?: boolean;\n  yesLabel?: string;\n};\n\nconst RadioBoolean = forwardRef(function RadioBoolean(\n  {\n    disabled,\n    name,\n    onChange,\n    onBlur,\n    value,\n    yesFirst = true,\n    yesLabel = 'Yes',\n    noLabel = 'No',\n  }: Props,\n  ref: React.Ref<HTMLInputElement>\n) {\n  const yesOption = (\n    <Option\n      ref={ref}\n      value=\"true\"\n      checked={value === true}\n      name={name}\n      disabled={disabled}\n      label={yesLabel}\n      onChange={onChange}\n      onBlur={onBlur}\n    />\n  );\n  const noOption = (\n    <Option\n      value=\"false\"\n      checked={value === false}\n      name={name}\n      disabled={disabled}\n      label={noLabel}\n      onChange={onChange}\n      onBlur={onBlur}\n    />\n  );\n\n  return (\n    <div>\n      {yesFirst ? yesOption : noOption}\n      {yesFirst ? noOption : yesOption}\n    </div>\n  );\n});\n\nexport default RadioBoolean;\n","import styled from '@emotion/styled';\nimport moment from 'moment';\n\nimport DeprecatedDropdownMenu from 'sentry/components/deprecatedDropdownMenu';\nimport {IconCalendar} from 'sentry/icons';\nimport {inputStyles} from 'sentry/styles/input';\nimport space from 'sentry/styles/space';\n\nimport {DatePicker} from '../calendar';\n\nimport InputField, {InputFieldProps, onEvent} from './inputField';\n\ninterface DatePickerFieldProps extends Omit<InputFieldProps, 'field'> {}\n\nfunction handleChangeDate(\n  onChange: onEvent,\n  onBlur: onEvent,\n  date: Date,\n  close: Function\n) {\n  onChange(date);\n  onBlur(date);\n\n  // close dropdown menu\n  close();\n}\n\nexport default function DatePickerField(props: DatePickerFieldProps) {\n  return (\n    <InputField\n      {...props}\n      field={({onChange, onBlur, value, id}) => {\n        const dateObj = new Date(value);\n        const inputValue = !isNaN(dateObj.getTime()) ? dateObj : new Date();\n        const dateString = moment(inputValue).format('LL');\n\n        return (\n          <DeprecatedDropdownMenu keepMenuOpen>\n            {({isOpen, getRootProps, getActorProps, getMenuProps, actions}) => (\n              <div {...getRootProps()}>\n                <InputWrapper id={id} {...getActorProps()} isOpen={isOpen}>\n                  <StyledInput readOnly value={dateString} />\n                  <CalendarIcon>\n                    <IconCalendar />\n                  </CalendarIcon>\n                </InputWrapper>\n\n                {isOpen && (\n                  <CalendarMenu {...getMenuProps()}>\n                    <DatePicker\n                      date={inputValue}\n                      onChange={date =>\n                        handleChangeDate(onChange, onBlur, date, actions.close)\n                      }\n                    />\n                  </CalendarMenu>\n                )}\n              </div>\n            )}\n          </DeprecatedDropdownMenu>\n        );\n      }}\n    />\n  );\n}\n\ntype InputWrapperProps = {\n  isOpen: boolean;\n};\n\nconst InputWrapper = styled('div')<InputWrapperProps>`\n  ${inputStyles}\n  cursor: text;\n  display: flex;\n  z-index: ${p => p.theme.zIndex.dropdownAutocomplete.actor};\n  ${p => p.isOpen && 'border-bottom-left-radius: 0'}\n`;\n\nconst StyledInput = styled('input')`\n  border: none;\n  outline: none;\n  flex: 1;\n`;\n\nconst CalendarMenu = styled('div')`\n  display: flex;\n  background: ${p => p.theme.background};\n  position: absolute;\n  left: 0;\n  border: 1px solid ${p => p.theme.border};\n  border-top: none;\n  z-index: ${p => p.theme.zIndex.dropdownAutocomplete.menu};\n  margin-top: -1px;\n\n  .rdrMonthAndYearWrapper {\n    height: 50px;\n    padding-top: 0;\n  }\n`;\n\nconst CalendarIcon = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: ${space(1)};\n`;\n","export {default as ApiForm} from './apiForm';\nexport {default as BooleanField} from './booleanField';\nexport {default as CheckboxField} from './checkboxField';\nexport {default as ChoiceMapperField} from './choiceMapperField';\nexport {default as DatePickerField} from './datePickerField';\nexport {default as DateTimeField} from './dateTimeField';\nexport {default as EmailField} from './emailField';\nexport {default as FieldFromConfig} from './fieldFromConfig';\nexport {default as FieldSeparator} from './fieldSeparator';\nexport {default as Form} from './form';\nexport {default as FormPanel} from './formPanel';\nexport {default as HiddenField} from './hiddenField';\nexport {default as InputField} from './inputField';\nexport {default as JSONForm} from './jsonForm';\nexport {default as NumberField} from './numberField';\nexport {default as RadioBooleanField} from './radioBooleanField';\nexport {default as RangeField} from './rangeField';\nexport {default as SelectField} from './selectField';\nexport {default as TextareaField} from './textareaField';\nexport {default as TestCopyInput} from './textCopyInput';\nexport {default as TextField} from './textField';\n","import omit from 'lodash/omit';\n\nimport RadioBoolean from './controls/radioBoolean';\nimport InputField, {InputFieldProps} from './inputField';\n\nexport default function RadioBooleanField(props: Omit<InputFieldProps, 'field'>) {\n  return (\n    <InputField\n      {...props}\n      field={fieldProps => (\n        <RadioBoolean {...omit(fieldProps, ['onKeyDown', 'children'])} />\n      )}\n    />\n  );\n}\n","import {Fragment} from 'react';\nimport styled from '@emotion/styled';\n\ntype HighlightProps = {\n  /**\n   * The original text\n   */\n  children: string;\n  /**\n   * The text to highlight\n   */\n  text: string;\n  /**\n   * Should highlighting be disabled?\n   */\n  disabled?: boolean;\n};\n\ntype Props = Omit<React.HTMLAttributes<HTMLDivElement>, keyof HighlightProps> &\n  HighlightProps;\n\nconst HighlightComponent = ({className, children, disabled, text}: Props) => {\n  // There are instances when children is not string in breadcrumbs but not caught by TS\n  if (!text || disabled || typeof children !== 'string') {\n    return <Fragment>{children}</Fragment>;\n  }\n\n  const highlightText = text.toLowerCase();\n  const idx = children.toLowerCase().indexOf(highlightText);\n\n  if (idx === -1) {\n    return <Fragment>{children}</Fragment>;\n  }\n\n  return (\n    <Fragment>\n      {children.substr(0, idx)}\n      <span className={className}>{children.substr(idx, highlightText.length)}</span>\n      {children.substr(idx + highlightText.length)}\n    </Fragment>\n  );\n};\n\nconst Highlight = styled(HighlightComponent)`\n  font-weight: normal;\n  background-color: ${p => p.theme.yellow200};\n  color: ${p => p.theme.textColor};\n`;\n\nexport default Highlight;\nexport {HighlightComponent};\n","import styled from '@emotion/styled';\n\nimport space from 'sentry/styles/space';\nimport {getKeyCode} from 'sentry/utils/getKeyCode';\n\nconst macModifiers = {\n  18: '',\n  17: '',\n  91: '',\n};\n\nconst normalModifiers = {\n  18: 'ALT',\n  17: 'CTRL',\n};\n\nconst genericGlyphs = {\n  16: '',\n  8: '',\n  37: '',\n  38: '',\n  39: '',\n  40: '',\n  107: '+',\n};\n\nconst keyToDisplay = (\n  key: string,\n  isMac: boolean\n): {label: React.ReactNode; specificToOs: 'macos' | 'generic'} => {\n  const keyCode = getKeyCode(key);\n\n  // Not a special key\n  if (!keyCode) {\n    return {label: <Key>{key.toUpperCase()}</Key>, specificToOs: 'generic'};\n  }\n\n  const modifierMap = isMac ? macModifiers : normalModifiers;\n  const keyStr = modifierMap[keyCode] ?? genericGlyphs[keyCode] ?? key.toUpperCase();\n\n  const specificToOs = keyCode === getKeyCode('command') ? 'macos' : 'generic';\n\n  return {label: <Key key={keyStr}>{keyStr}</Key>, specificToOs};\n};\n\ntype Props = {\n  /**\n   * Pass key combinations in with + as the separator.\n   * For example: `'command+option+x'`\n   *\n   * Pass an array of strings for fallback key combos when the first one contains a key that does not exist on that os (non-mac):\n   * `['command+option+x', 'ctrl+shift+x']`\n   * (does not have to be the same combo)\n   */\n  value: string[] | string;\n  forcePlatform?: 'macos' | 'generic';\n};\n\nconst HotkeysLabel = ({value, forcePlatform}: Props) => {\n  // Split by commas and then split by +, but allow escaped /+\n  const hotkeySets = (Array.isArray(value) ? value : [value]).map(o =>\n    o.trim().split('+')\n  );\n\n  const isMac = forcePlatform\n    ? forcePlatform === 'macos'\n    : window?.navigator?.platform?.toLowerCase().startsWith('mac') ?? false;\n\n  // If we're not using mac find the first key set that is generic.\n  // Otherwise show whatever the first hotkey is.\n  const finalKeySet = hotkeySets\n    .map(keySet => keySet.map(key => keyToDisplay(key, isMac)))\n    .find(keySet =>\n      !isMac ? keySet.every(key => key.specificToOs === 'generic') : true\n    );\n\n  // No key available for the OS. Don't show a hotkey\n  if (finalKeySet === undefined) {\n    return null;\n  }\n\n  return <HotkeysContainer>{finalKeySet.map(key => key.label)}</HotkeysContainer>;\n};\n\nexport default HotkeysLabel;\n\nconst Key = styled('span')`\n  font-size: ${p => p.theme.fontSizeMedium};\n`;\n\nconst HotkeysContainer = styled('div')`\n  font-family: ${p => p.theme.text.family};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  > * {\n    margin-right: ${space(0.5)};\n  }\n`;\n","import * as Sentry from '@sentry/react';\n\nimport PageFiltersStore from 'sentry/stores/pageFiltersStore';\nimport {PinnedPageFilter} from 'sentry/types';\nimport {getUtcDateString} from 'sentry/utils/dates';\nimport localStorage from 'sentry/utils/localStorage';\n\nimport {getStateFromQuery} from './parse';\n\nfunction makeLocalStorageKey(orgSlug: string) {\n  return `global-selection:${orgSlug}`;\n}\n\ntype StoredObject = {\n  end: string | null;\n  environments: string[];\n  period: string | null;\n  pinnedFilters: PinnedPageFilter[];\n  projects: number[];\n  start: string | null;\n  utc: 'true' | null;\n};\n\n/**\n * Updates the localstorage page filters data for the specified filters.\n *\n * e.g. if localstorage is empty, user loads issue details for project \"foo\"\n * this should not consider \"foo\" as last used and should not save to local\n * storage.\n *\n * However, if user then changes environment, it should...? Currently it will\n * save the current project alongside environment to local storage. It's\n * debatable if this is the desired behavior.\n */\nexport function setPageFiltersStorage(\n  orgSlug: string,\n  updateFilters: Set<PinnedPageFilter>\n) {\n  const {selection, pinnedFilters} = PageFiltersStore.getState();\n\n  const {state: currentStoredState} = getPageFilterStorage(orgSlug) ?? {state: null};\n\n  const projects = updateFilters.has('projects')\n    ? selection.projects\n    : currentStoredState?.project ?? [];\n\n  const environments = updateFilters.has('environments')\n    ? selection.environments\n    : currentStoredState?.environment ?? [];\n\n  const shouldUpdateDatetime = updateFilters.has('datetime');\n\n  const currentStart = shouldUpdateDatetime\n    ? selection.datetime.start\n    : currentStoredState?.start;\n\n  const currentEnd = shouldUpdateDatetime\n    ? selection.datetime.end\n    : currentStoredState?.end;\n\n  const currentPeriod = shouldUpdateDatetime\n    ? selection.datetime.period\n    : currentStoredState?.period ?? null;\n\n  const currentUtc = shouldUpdateDatetime\n    ? selection.datetime.utc\n    : currentStoredState?.utc;\n\n  const start = currentStart ? getUtcDateString(currentStart) : null;\n  const end = currentEnd ? getUtcDateString(currentEnd) : null;\n  const period = !start && !end ? currentPeriod : null;\n  const utc = currentUtc ? 'true' : null;\n\n  // XXX(epurkhiser): For legacy reasons the page filter state is stored\n  // similarly to how the URL query state is stored, but with different keys\n  // (projects, instead of project).\n  const dataToSave: StoredObject = {\n    projects,\n    environments,\n    start,\n    end,\n    period,\n    utc,\n    pinnedFilters: Array.from(pinnedFilters),\n  };\n\n  const localStorageKey = makeLocalStorageKey(orgSlug);\n\n  try {\n    localStorage.setItem(localStorageKey, JSON.stringify(dataToSave));\n  } catch (ex) {\n    // Do nothing\n  }\n}\n\n/**\n * Retrieves the page filters from local storage\n */\nexport function getPageFilterStorage(orgSlug: string) {\n  const localStorageKey = makeLocalStorageKey(orgSlug);\n  const value = localStorage.getItem(localStorageKey);\n\n  if (!value) {\n    return null;\n  }\n\n  let decoded: StoredObject;\n\n  try {\n    decoded = JSON.parse(value);\n  } catch (err) {\n    // use default if invalid\n    Sentry.captureException(err);\n    console.error(err); // eslint-disable-line no-console\n\n    return null;\n  }\n\n  const {projects, environments, start, end, period, utc, pinnedFilters} = decoded;\n\n  const state = getStateFromQuery(\n    {\n      project: projects.map(String),\n      environment: environments,\n      start,\n      end,\n      period,\n      utc,\n    },\n    {allowAbsoluteDatetime: true}\n  );\n\n  return {state, pinnedFilters: new Set(pinnedFilters)};\n}\n\n/**\n * Removes page filters from localstorage\n */\nexport function removePageFiltersStorage(orgSlug: string) {\n  localStorage.removeItem(makeLocalStorageKey(orgSlug));\n}\n","import styled from '@emotion/styled';\n\nimport space from 'sentry/styles/space';\n\nconst TimeRangeItemLabel = styled('div')`\n  margin-left: ${space(0.5)};\n  margin-top: ${space(0.25)};\n  margin-bottom: ${space(0.25)};\n`;\n\nexport default TimeRangeItemLabel;\n","import moment from 'moment';\n\nimport autoCompleteFilter from 'sentry/components/dropdownAutoComplete/autoCompleteFilter';\nimport {DEFAULT_RELATIVE_PERIODS} from 'sentry/constants';\nimport {t, tn} from 'sentry/locale';\n\nimport TimeRangeItemLabel from './timeRangeItemLabel';\n\ntype RelativePeriodUnit = 's' | 'm' | 'h' | 'd' | 'w';\n\ntype RelativeUnitsMapping = {\n  [unit in RelativePeriodUnit]: {\n    label: (num: number) => string;\n    momentUnit: moment.unitOfTime.DurationConstructor;\n    searchKey: string;\n  };\n};\n\nconst DATE_TIME_FORMAT = 'YYYY-MM-DDTHH:mm:ss';\n\nconst STATS_PERIOD_REGEX = /^(\\d+)([smhdw]{1})$/;\n\nconst SUPPORTED_RELATIVE_PERIOD_UNITS: RelativeUnitsMapping = {\n  s: {\n    label: (num: number) => tn('Last second', 'Last %s seconds', num),\n    searchKey: t('seconds'),\n    momentUnit: 'seconds',\n  },\n  m: {\n    label: (num: number) => tn('Last minute', 'Last %s minutes', num),\n    searchKey: t('minutes'),\n    momentUnit: 'minutes',\n  },\n  h: {\n    label: (num: number) => tn('Last hour', 'Last %s hours', num),\n    searchKey: t('hours'),\n    momentUnit: 'hours',\n  },\n  d: {\n    label: (num: number) => tn('Last day', 'Last %s days', num),\n    searchKey: t('days'),\n    momentUnit: 'days',\n  },\n  w: {\n    label: (num: number) => tn('Last week', 'Last %s weeks', num),\n    searchKey: t('weeks'),\n    momentUnit: 'weeks',\n  },\n};\n\nconst SUPPORTED_RELATIVE_UNITS_LIST = Object.keys(\n  SUPPORTED_RELATIVE_PERIOD_UNITS\n) as RelativePeriodUnit[];\n\nconst parseStatsPeriodString = (statsPeriodString: string) => {\n  const result = STATS_PERIOD_REGEX.exec(statsPeriodString);\n\n  if (result === null) {\n    throw new Error('Invalid stats period');\n  }\n\n  const value = parseInt(result[1], 10);\n  const unit = result[2] as RelativePeriodUnit;\n\n  return {\n    value,\n    unit,\n  };\n};\n\n/**\n * Converts a relative stats period, e.g. `1h` to an object containing a start\n * and end date, with the end date as the current time and the start date as the\n * time that is the current time less the statsPeriod.\n *\n * @param statsPeriod Relative stats period\n * @param outputFormat Format of outputted start/end date\n * @return Object containing start and end date as YYYY-MM-DDTHH:mm:ss\n *\n */\nexport function parseStatsPeriod(\n  statsPeriod: string,\n  outputFormat: string | null = DATE_TIME_FORMAT\n): {end: string; start: string} {\n  const {value, unit} = parseStatsPeriodString(statsPeriod);\n\n  const momentUnit = SUPPORTED_RELATIVE_PERIOD_UNITS[unit].momentUnit;\n\n  const format = outputFormat === null ? undefined : outputFormat;\n\n  return {\n    start: moment().subtract(value, momentUnit).format(format),\n    end: moment().format(format),\n  };\n}\n\n/**\n * Given a relative stats period, e.g. `1h`, return a pretty string if it\n * is a default stats period. Otherwise if it's a valid period (can be any number\n * followed by a single character s|m|h|d) display \"Other\" or \"Invalid period\" if invalid\n *\n * @param relative Relative stats period\n * @return either one of the default \"Last x days\" string, \"Other\" if period is valid on the backend, or \"Invalid period\" otherwise\n */\nexport function getRelativeSummary(\n  relative: string,\n  relativeOptions?: Record<string, React.ReactNode>\n): string {\n  try {\n    const defaultRelativePeriodString =\n      relativeOptions?.[relative] ?? DEFAULT_RELATIVE_PERIODS[relative];\n\n    if (defaultRelativePeriodString) {\n      return defaultRelativePeriodString;\n    }\n\n    const {value, unit} = parseStatsPeriodString(relative);\n\n    return SUPPORTED_RELATIVE_PERIOD_UNITS[unit].label(value);\n  } catch {\n    return 'Invalid period';\n  }\n}\n\nfunction makeItem(\n  amount: number,\n  unit: keyof typeof SUPPORTED_RELATIVE_PERIOD_UNITS,\n  index: number\n) {\n  return {\n    value: `${amount}${unit}`,\n    ['data-test-id']: `${amount}${unit}`,\n    label: (\n      <TimeRangeItemLabel>\n        {SUPPORTED_RELATIVE_PERIOD_UNITS[unit].label(amount)}\n      </TimeRangeItemLabel>\n    ),\n    searchKey: `${amount}${unit}`,\n    index,\n  };\n}\n\n/**\n * A custom autocomplete implementation for <TimeRangeSelector />\n * This function generates relative time ranges based on the user's input (not limited to those present in the initial set).\n *\n * When the user begins their input with a number, we provide all unit options for them to choose from:\n * \"5\" => [\"Last 5 seconds\", \"Last 5 minutes\", \"Last 5 hours\", \"Last 5 days\", \"Last 5 weeks\"]\n *\n * When the user adds text after the number, we filter those options to the matching unit:\n * \"5d\" => [\"Last 5 days\"]\n * \"5 days\" => [\"Last 5 days\"]\n *\n * If the input does not begin with a number, we do a simple filter of the preset options.\n */\nexport const timeRangeAutoCompleteFilter: typeof autoCompleteFilter = function (\n  items,\n  filterValue\n) {\n  if (!items) {\n    return [];\n  }\n\n  const match = filterValue.match(/(?<digits>\\d+)\\s*(?<string>\\w*)/);\n\n  const userSuppliedAmount = Number(match?.groups?.digits);\n  const userSuppliedUnits = (match?.groups?.string ?? '').trim().toLowerCase();\n\n  const userSuppliedAmountIsValid = !isNaN(userSuppliedAmount) && userSuppliedAmount > 0;\n\n  // If there is a number w/o units, show all unit options\n  if (userSuppliedAmountIsValid && !userSuppliedUnits) {\n    return SUPPORTED_RELATIVE_UNITS_LIST.map((unit, index) =>\n      makeItem(userSuppliedAmount, unit, index)\n    );\n  }\n\n  // If there is a number followed by units, show the matching number/unit option\n  if (userSuppliedAmountIsValid && userSuppliedUnits) {\n    const matchingUnit = SUPPORTED_RELATIVE_UNITS_LIST.find(unit => {\n      if (userSuppliedUnits.length === 1) {\n        return unit === userSuppliedUnits;\n      }\n\n      return SUPPORTED_RELATIVE_PERIOD_UNITS[unit].searchKey.startsWith(\n        userSuppliedUnits\n      );\n    });\n\n    if (matchingUnit) {\n      return [makeItem(userSuppliedAmount, matchingUnit, 0)];\n    }\n  }\n\n  // Otherwise, do a normal filter search\n  return autoCompleteFilter(items, filterValue);\n};\n","import styled from '@emotion/styled';\n\nimport space from 'sentry/styles/space';\n\nconst defaultProps = {\n  shape: 'rect' as 'rect' | 'circle',\n  bottomGutter: 0 as Parameters<typeof space>[0],\n  width: '100%',\n  height: '60px',\n  testId: 'loading-placeholder',\n};\n\ntype DefaultProps = Readonly<typeof defaultProps>;\n\nexport type PlaceholderProps = {\n  children?: React.ReactNode;\n  className?: string;\n  error?: React.ReactNode;\n  testId?: string;\n} & Partial<DefaultProps>;\n\nconst Placeholder = styled(({className, children, error, testId}: PlaceholderProps) => {\n  return (\n    <div data-test-id={testId} className={className}>\n      {error || children}\n    </div>\n  );\n})<PlaceholderProps>`\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  justify-content: center;\n  align-items: center;\n\n  background-color: ${p => (p.error ? p.theme.red100 : p.theme.backgroundSecondary)};\n  ${p => p.error && `color: ${p.theme.red200};`}\n  width: ${p => p.width};\n  height: ${p => p.height};\n  ${p => (p.shape === 'circle' ? 'border-radius: 100%;' : '')}\n  ${p =>\n    typeof p.bottomGutter === 'number' && p.bottomGutter > 0\n      ? `margin-bottom: ${space(p.bottomGutter)};`\n      : ''}\n`;\n\nPlaceholder.defaultProps = defaultProps;\n\nexport default Placeholder;\n","import moment from 'moment';\nimport {LocationRange} from 'pegjs';\n\nimport {t} from 'sentry/locale';\nimport {\n  isMeasurement,\n  isSpanOperationBreakdownField,\n  measurementType,\n} from 'sentry/utils/discover/fields';\n\nimport grammar from './grammar.pegjs';\nimport {getKeyName} from './utils';\n\ntype TextFn = () => string;\ntype LocationFn = () => LocationRange;\n\ntype ListItem<V> = [\n  space: ReturnType<TokenConverter['tokenSpaces']>,\n  comma: string,\n  space: ReturnType<TokenConverter['tokenSpaces']>,\n  notComma: undefined,\n  value: V | null\n];\n\nconst listJoiner = <K,>([s1, comma, s2, _, value]: ListItem<K>) => ({\n  separator: [s1.value, comma, s2.value].join(''),\n  value,\n});\n\n/**\n * A token represents a node in the syntax tree. These are all extrapolated\n * from the grammar and may not be named exactly the same.\n */\nexport enum Token {\n  Spaces = 'spaces',\n  Filter = 'filter',\n  FreeText = 'freeText',\n  LogicGroup = 'logicGroup',\n  LogicBoolean = 'logicBoolean',\n  KeySimple = 'keySimple',\n  KeyExplicitTag = 'keyExplicitTag',\n  KeyAggregate = 'keyAggregate',\n  KeyAggregateArgs = 'keyAggregateArgs',\n  KeyAggregateParam = 'keyAggregateParam',\n  ValueIso8601Date = 'valueIso8601Date',\n  ValueRelativeDate = 'valueRelativeDate',\n  ValueDuration = 'valueDuration',\n  ValuePercentage = 'valuePercentage',\n  ValueBoolean = 'valueBoolean',\n  ValueNumber = 'valueNumber',\n  ValueText = 'valueText',\n  ValueNumberList = 'valueNumberList',\n  ValueTextList = 'valueTextList',\n}\n\n/**\n * An operator in a key value term\n */\nexport enum TermOperator {\n  Default = '',\n  GreaterThanEqual = '>=',\n  LessThanEqual = '<=',\n  GreaterThan = '>',\n  LessThan = '<',\n  Equal = '=',\n  NotEqual = '!=',\n}\n\n/**\n * Logic operators\n */\nexport enum BooleanOperator {\n  And = 'AND',\n  Or = 'OR',\n}\n\n/**\n * The Token.Filter may be one of many types of filters. This enum declares the\n * each variant filter type.\n */\nexport enum FilterType {\n  Text = 'text',\n  TextIn = 'textIn',\n  Date = 'date',\n  SpecificDate = 'specificDate',\n  RelativeDate = 'relativeDate',\n  Duration = 'duration',\n  Numeric = 'numeric',\n  NumericIn = 'numericIn',\n  Boolean = 'boolean',\n  AggregateDuration = 'aggregateDuration',\n  AggregatePercentage = 'aggregatePercentage',\n  AggregateNumeric = 'aggregateNumeric',\n  AggregateDate = 'aggregateDate',\n  AggregateRelativeDate = 'aggregateRelativeDate',\n  Has = 'has',\n  Is = 'is',\n}\n\nexport const allOperators = [\n  TermOperator.Default,\n  TermOperator.GreaterThanEqual,\n  TermOperator.LessThanEqual,\n  TermOperator.GreaterThan,\n  TermOperator.LessThan,\n  TermOperator.Equal,\n  TermOperator.NotEqual,\n] as const;\n\nconst basicOperators = [TermOperator.Default, TermOperator.NotEqual] as const;\n\n/**\n * Map of certain filter types to other filter types with applicable operators\n * e.g. SpecificDate can use the operators from Date to become a Date filter.\n */\nexport const interchangeableFilterOperators = {\n  [FilterType.SpecificDate]: [FilterType.Date],\n  [FilterType.Date]: [FilterType.SpecificDate],\n};\n\nconst textKeys = [Token.KeySimple, Token.KeyExplicitTag] as const;\n\nconst numberUnits = {\n  b: 1_000_000_000,\n  m: 1_000_000,\n  k: 1_000,\n};\n\n/**\n * This constant-type configuration object declares how each filter type\n * operates. Including what types of keys, operators, and values it may\n * receive.\n *\n * This configuration is used to generate the discriminate Filter type that is\n * returned from the tokenFilter converter.\n */\nexport const filterTypeConfig = {\n  [FilterType.Text]: {\n    validKeys: textKeys,\n    validOps: basicOperators,\n    validValues: [Token.ValueText],\n    canNegate: true,\n  },\n  [FilterType.TextIn]: {\n    validKeys: textKeys,\n    validOps: [],\n    validValues: [Token.ValueTextList],\n    canNegate: true,\n  },\n  [FilterType.Date]: {\n    validKeys: [Token.KeySimple],\n    validOps: allOperators,\n    validValues: [Token.ValueIso8601Date],\n    canNegate: false,\n  },\n  [FilterType.SpecificDate]: {\n    validKeys: [Token.KeySimple],\n    validOps: [],\n    validValues: [Token.ValueIso8601Date],\n    canNegate: false,\n  },\n  [FilterType.RelativeDate]: {\n    validKeys: [Token.KeySimple],\n    validOps: [],\n    validValues: [Token.ValueRelativeDate],\n    canNegate: false,\n  },\n  [FilterType.Duration]: {\n    validKeys: [Token.KeySimple],\n    validOps: allOperators,\n    validValues: [Token.ValueDuration],\n    canNegate: true,\n  },\n  [FilterType.Numeric]: {\n    validKeys: [Token.KeySimple],\n    validOps: allOperators,\n    validValues: [Token.ValueNumber],\n    canNegate: true,\n  },\n  [FilterType.NumericIn]: {\n    validKeys: [Token.KeySimple],\n    validOps: [],\n    validValues: [Token.ValueNumberList],\n    canNegate: true,\n  },\n  [FilterType.Boolean]: {\n    validKeys: [Token.KeySimple],\n    validOps: basicOperators,\n    validValues: [Token.ValueBoolean],\n    canNegate: true,\n  },\n  [FilterType.AggregateDuration]: {\n    validKeys: [Token.KeyAggregate],\n    validOps: allOperators,\n    validValues: [Token.ValueDuration],\n    canNegate: true,\n  },\n  [FilterType.AggregateNumeric]: {\n    validKeys: [Token.KeyAggregate],\n    validOps: allOperators,\n    validValues: [Token.ValueNumber],\n    canNegate: true,\n  },\n  [FilterType.AggregatePercentage]: {\n    validKeys: [Token.KeyAggregate],\n    validOps: allOperators,\n    validValues: [Token.ValuePercentage],\n    canNegate: true,\n  },\n  [FilterType.AggregateDate]: {\n    validKeys: [Token.KeyAggregate],\n    validOps: allOperators,\n    validValues: [Token.ValueIso8601Date],\n    canNegate: true,\n  },\n  [FilterType.AggregateRelativeDate]: {\n    validKeys: [Token.KeyAggregate],\n    validOps: allOperators,\n    validValues: [Token.ValueRelativeDate],\n    canNegate: true,\n  },\n  [FilterType.Has]: {\n    validKeys: [Token.KeySimple],\n    validOps: basicOperators,\n    validValues: [],\n    canNegate: true,\n  },\n  [FilterType.Is]: {\n    validKeys: [Token.KeySimple],\n    validOps: basicOperators,\n    validValues: [Token.ValueText],\n    canNegate: true,\n  },\n} as const;\n\ntype FilterTypeConfig = typeof filterTypeConfig;\n\n/**\n * Object representing an invalid filter state\n */\ntype InvalidFilter = {\n  /**\n   * The message indicating why the filter is invalid\n   */\n  reason: string;\n  /**\n   * In the case where a filter is invalid, we may be expecting a different\n   * type for this filter based on the key. This can be useful to hint to the\n   * user what values they should be providing.\n   *\n   * This may be multiple filter types.\n   */\n  expectedType?: FilterType[];\n};\n\ntype FilterMap = {\n  [F in keyof FilterTypeConfig]: {\n    /**\n     * The filter type being represented\n     */\n    filter: F;\n    /**\n     * When a filter is marked as 'invalid' a reason is given. If the filter is\n     * not invalid this will always be null\n     */\n    invalid: InvalidFilter | null;\n    /**\n     * The key of the filter\n     */\n    key: KVConverter<FilterTypeConfig[F]['validKeys'][number]>;\n    /**\n     * Indicates if the filter has been negated\n     */\n    negated: FilterTypeConfig[F]['canNegate'] extends true ? boolean : false;\n    /**\n     * The operator applied to the filter\n     */\n    operator: FilterTypeConfig[F]['validOps'][number];\n    type: Token.Filter;\n    /**\n     * The value of the filter\n     */\n    value: KVConverter<FilterTypeConfig[F]['validValues'][number]>;\n  };\n};\n\ntype TextFilter = FilterMap[FilterType.Text];\ntype InFilter = FilterMap[FilterType.TextIn] | FilterMap[FilterType.NumericIn];\n\n/**\n * The Filter type discriminates on the FilterType enum using the `filter` key.\n *\n * When receiving this type you may narrow it to a specific filter by checking\n * this field. This will give you proper types on what the key, value, and\n * operator results are.\n */\ntype FilterResult = FilterMap[FilterType];\n\ntype TokenConverterOpts = {\n  config: SearchConfig;\n  location: LocationFn;\n  text: TextFn;\n};\n\n/**\n * Used to construct token results via the token grammar\n */\nexport class TokenConverter {\n  text: TextFn;\n  location: LocationFn;\n  config: SearchConfig;\n\n  constructor({text, location, config}: TokenConverterOpts) {\n    this.text = text;\n    this.location = location;\n    this.config = config;\n  }\n\n  /**\n   * Validates various types of keys\n   */\n  keyValidation = {\n    isNumeric: (key: string) =>\n      this.config.numericKeys.has(key) ||\n      isMeasurement(key) ||\n      isSpanOperationBreakdownField(key),\n    isBoolean: (key: string) => this.config.booleanKeys.has(key),\n    isPercentage: (key: string) => this.config.percentageKeys.has(key),\n    isDate: (key: string) => this.config.dateKeys.has(key),\n    isDuration: (key: string) =>\n      this.config.durationKeys.has(key) ||\n      isSpanOperationBreakdownField(key) ||\n      measurementType(key) === 'duration',\n  };\n\n  /**\n   * Creates shared `text` and `location` keys.\n   */\n  get defaultTokenFields() {\n    return {\n      text: this.text(),\n      location: this.location(),\n    };\n  }\n\n  tokenSpaces = (value: string) => ({\n    ...this.defaultTokenFields,\n    type: Token.Spaces as const,\n    value,\n  });\n\n  tokenFilter = <T extends FilterType>(\n    filter: T,\n    key: FilterMap[T]['key'],\n    value: FilterMap[T]['value'],\n    operator: FilterMap[T]['operator'] | undefined,\n    negated: FilterMap[T]['negated']\n  ) => {\n    const filterToken = {\n      type: Token.Filter as const,\n      filter,\n      key,\n      value,\n      negated,\n      operator: operator ?? TermOperator.Default,\n      invalid: this.checkInvalidFilter(filter, key, value),\n    } as FilterResult;\n\n    return {\n      ...this.defaultTokenFields,\n      ...filterToken,\n    };\n  };\n\n  tokenFreeText = (value: string, quoted: boolean) => ({\n    ...this.defaultTokenFields,\n    type: Token.FreeText as const,\n    value,\n    quoted,\n  });\n\n  tokenLogicGroup = (\n    inner: Array<\n      | ReturnType<TokenConverter['tokenLogicBoolean']>\n      | ReturnType<TokenConverter['tokenFilter']>\n      | ReturnType<TokenConverter['tokenFreeText']>\n    >\n  ) => ({\n    ...this.defaultTokenFields,\n    type: Token.LogicGroup as const,\n    inner,\n  });\n\n  tokenLogicBoolean = (bool: BooleanOperator) => ({\n    ...this.defaultTokenFields,\n    type: Token.LogicBoolean as const,\n    value: bool,\n  });\n\n  tokenKeySimple = (value: string, quoted: boolean) => ({\n    ...this.defaultTokenFields,\n    type: Token.KeySimple as const,\n    value,\n    quoted,\n  });\n\n  tokenKeyExplicitTag = (\n    prefix: string,\n    key: ReturnType<TokenConverter['tokenKeySimple']>\n  ) => ({\n    ...this.defaultTokenFields,\n    type: Token.KeyExplicitTag as const,\n    prefix,\n    key,\n  });\n\n  tokenKeyAggregateParam = (value: string, quoted: boolean) => ({\n    ...this.defaultTokenFields,\n    type: Token.KeyAggregateParam as const,\n    value,\n    quoted,\n  });\n\n  tokenKeyAggregate = (\n    name: ReturnType<TokenConverter['tokenKeySimple']>,\n    args: ReturnType<TokenConverter['tokenKeyAggregateArgs']> | null,\n    argsSpaceBefore: ReturnType<TokenConverter['tokenSpaces']>,\n    argsSpaceAfter: ReturnType<TokenConverter['tokenSpaces']>\n  ) => ({\n    ...this.defaultTokenFields,\n    type: Token.KeyAggregate as const,\n    name,\n    args,\n    argsSpaceBefore,\n    argsSpaceAfter,\n  });\n\n  tokenKeyAggregateArgs = (\n    arg1: ReturnType<TokenConverter['tokenKeyAggregateParam']>,\n    args: ListItem<ReturnType<TokenConverter['tokenKeyAggregateParam']>>[]\n  ) => ({\n    ...this.defaultTokenFields,\n    type: Token.KeyAggregateArgs as const,\n    args: [{separator: '', value: arg1}, ...args.map(listJoiner)],\n  });\n\n  tokenValueIso8601Date = (value: string) => ({\n    ...this.defaultTokenFields,\n    type: Token.ValueIso8601Date as const,\n    value: moment(value),\n  });\n\n  tokenValueRelativeDate = (\n    value: string,\n    sign: '-' | '+',\n    unit: 'w' | 'd' | 'h' | 'm'\n  ) => ({\n    ...this.defaultTokenFields,\n    type: Token.ValueRelativeDate as const,\n    value: Number(value),\n    sign,\n    unit,\n  });\n\n  tokenValueDuration = (\n    value: string,\n    unit: 'ms' | 's' | 'min' | 'm' | 'hr' | 'h' | 'day' | 'd' | 'wk' | 'w'\n  ) => ({\n    ...this.defaultTokenFields,\n\n    type: Token.ValueDuration as const,\n    value: Number(value),\n    unit,\n  });\n\n  tokenValuePercentage = (value: string) => ({\n    ...this.defaultTokenFields,\n    type: Token.ValuePercentage as const,\n    value: Number(value),\n  });\n\n  tokenValueBoolean = (value: string) => ({\n    ...this.defaultTokenFields,\n    type: Token.ValueBoolean as const,\n    value: ['1', 'true'].includes(value.toLowerCase()),\n  });\n\n  tokenValueNumber = (value: string, unit: string) => ({\n    ...this.defaultTokenFields,\n    type: Token.ValueNumber as const,\n    value,\n    rawValue: Number(value) * (numberUnits[unit] ?? 1),\n    unit,\n  });\n\n  tokenValueNumberList = (\n    item1: ReturnType<TokenConverter['tokenValueNumber']>,\n    items: ListItem<ReturnType<TokenConverter['tokenValueNumber']>>[]\n  ) => ({\n    ...this.defaultTokenFields,\n    type: Token.ValueNumberList as const,\n    items: [{separator: '', value: item1}, ...items.map(listJoiner)],\n  });\n\n  tokenValueTextList = (\n    item1: ReturnType<TokenConverter['tokenValueText']>,\n    items: ListItem<ReturnType<TokenConverter['tokenValueText']>>[]\n  ) => ({\n    ...this.defaultTokenFields,\n    type: Token.ValueTextList as const,\n    items: [{separator: '', value: item1}, ...items.map(listJoiner)],\n  });\n\n  tokenValueText = (value: string, quoted: boolean) => ({\n    ...this.defaultTokenFields,\n    type: Token.ValueText as const,\n    value,\n    quoted,\n  });\n\n  /**\n   * This method is used while tokenizing to predicate whether a filter should\n   * match or not. We do this because not all keys are valid for specific\n   * filter types. For example, boolean filters should only match for keys\n   * which can be filtered as booleans.\n   *\n   * See [0] and look for &{ predicate } to understand how predicates are\n   * declared in the grammar\n   *\n   * [0]:https://pegjs.org/documentation\n   */\n  predicateFilter = <T extends FilterType>(type: T, key: FilterMap[T]['key']) => {\n    // @ts-expect-error Unclear why this isnt resolving correctly\n    const keyName = getKeyName(key);\n    const aggregateKey = key as ReturnType<TokenConverter['tokenKeyAggregate']>;\n\n    const {isNumeric, isDuration, isBoolean, isDate, isPercentage} = this.keyValidation;\n\n    const checkAggregate = (check: (s: string) => boolean) =>\n      aggregateKey.args?.args.some(arg => check(arg?.value?.value ?? ''));\n\n    switch (type) {\n      case FilterType.Numeric:\n      case FilterType.NumericIn:\n        return isNumeric(keyName);\n\n      case FilterType.Duration:\n        return isDuration(keyName);\n\n      case FilterType.Boolean:\n        return isBoolean(keyName);\n\n      case FilterType.Date:\n      case FilterType.RelativeDate:\n      case FilterType.SpecificDate:\n        return isDate(keyName);\n\n      case FilterType.AggregateDuration:\n        return checkAggregate(isDuration);\n\n      case FilterType.AggregateDate:\n        return checkAggregate(isDate);\n\n      case FilterType.AggregatePercentage:\n        return checkAggregate(isPercentage);\n\n      default:\n        return true;\n    }\n  };\n\n  /**\n   * Predicates weather a text filter have operators for specific keys.\n   */\n  predicateTextOperator = (key: TextFilter['key']) =>\n    this.config.textOperatorKeys.has(getKeyName(key));\n\n  /**\n   * Checks a filter against some non-grammar validation rules\n   */\n  checkInvalidFilter = <T extends FilterType>(\n    filter: T,\n    key: FilterMap[T]['key'],\n    value: FilterMap[T]['value']\n  ) => {\n    // Text filter is the \"fall through\" filter that will match when other\n    // filter predicates fail.\n    if (filter === FilterType.Text) {\n      return this.checkInvalidTextFilter(\n        key as TextFilter['key'],\n        value as TextFilter['value']\n      );\n    }\n\n    if (filter === FilterType.Is || filter === FilterType.Has) {\n      return this.checkInvalidTextValue(value as TextFilter['value']);\n    }\n\n    if ([FilterType.TextIn, FilterType.NumericIn].includes(filter)) {\n      return this.checkInvalidInFilter(value as InFilter['value']);\n    }\n\n    return null;\n  };\n\n  /**\n   * Validates text filters which may have failed predication\n   */\n  checkInvalidTextFilter = (key: TextFilter['key'], value: TextFilter['value']) => {\n    // Explicit tag keys will always be treated as text filters\n    if (key.type === Token.KeyExplicitTag) {\n      return this.checkInvalidTextValue(value);\n    }\n\n    const keyName = getKeyName(key);\n\n    if (this.keyValidation.isDuration(keyName)) {\n      return {\n        reason: t('Invalid duration. Expected number followed by duration unit suffix'),\n        expectedType: [FilterType.Duration],\n      };\n    }\n\n    if (this.keyValidation.isDate(keyName)) {\n      const date = new Date();\n      date.setSeconds(0);\n      date.setMilliseconds(0);\n      const example = date.toISOString();\n\n      return {\n        reason: t(\n          'Invalid date format. Expected +/-duration (e.g. +1h) or ISO 8601-like (e.g. %s or %s)',\n          example.slice(0, 10),\n          example\n        ),\n        expectedType: [FilterType.Date, FilterType.SpecificDate, FilterType.RelativeDate],\n      };\n    }\n\n    if (this.keyValidation.isBoolean(keyName)) {\n      return {\n        reason: t('Invalid boolean. Expected true, 1, false, or 0.'),\n        expectedType: [FilterType.Boolean],\n      };\n    }\n\n    if (this.keyValidation.isNumeric(keyName)) {\n      return {\n        reason: t(\n          'Invalid number. Expected number then optional k, m, or b suffix (e.g. 500k)'\n        ),\n        expectedType: [FilterType.Numeric, FilterType.NumericIn],\n      };\n    }\n\n    return this.checkInvalidTextValue(value);\n  };\n\n  /**\n   * Validates the value of a text filter\n   */\n  checkInvalidTextValue = (value: TextFilter['value']) => {\n    if (!value.quoted && /(^|[^\\\\])\"/.test(value.value)) {\n      return {reason: t('Quotes must enclose text or be escaped')};\n    }\n\n    if (!value.quoted && value.value === '') {\n      return {reason: t('Filter must have a value')};\n    }\n\n    return null;\n  };\n\n  /**\n   * Validates IN filter values do not have an missing elements\n   */\n  checkInvalidInFilter = ({items}: InFilter['value']) => {\n    const hasEmptyValue = items.some(item => item.value === null);\n\n    if (hasEmptyValue) {\n      return {reason: t('Lists should not have empty values')};\n    }\n\n    return null;\n  };\n}\n\n/**\n * Maps token conversion methods to their result types\n */\ntype ConverterResultMap = {\n  [K in keyof TokenConverter & `token${string}`]: ReturnType<TokenConverter[K]>;\n};\n\ntype Converter = keyof ConverterResultMap;\n\n/**\n * Converter keys specific to Key and Value tokens\n */\ntype KVTokens = Converter & `token${'Key' | 'Value'}${string}`;\n\n/**\n * Similar to TokenResult, but only includes Key* and Value* token type\n * results. This avoids a circular reference when this is used for the Filter\n * token converter result\n */\ntype KVConverter<T extends Token> = ConverterResultMap[KVTokens] & {type: T};\n\n/**\n * Each token type is discriminated by the `type` field.\n */\nexport type TokenResult<T extends Token> = ConverterResultMap[Converter] & {type: T};\n\n/**\n * Result from parsing a search query.\n */\nexport type ParseResult = Array<\n  | TokenResult<Token.LogicBoolean>\n  | TokenResult<Token.LogicGroup>\n  | TokenResult<Token.Filter>\n  | TokenResult<Token.FreeText>\n  | TokenResult<Token.Spaces>\n>;\n\n/**\n * Configures behavior of search parsing\n */\nexport type SearchConfig = {\n  /**\n   * Enables boolean filtering (AND / OR)\n   */\n  allowBoolean: boolean;\n  /**\n   * Keys considered valid for boolean filter types\n   */\n  booleanKeys: Set<string>;\n  /**\n   * Keys considered valid for date filter types\n   */\n  dateKeys: Set<string>;\n  /**\n   * Keys which are considered valid for duration filters\n   */\n  durationKeys: Set<string>;\n  /**\n   * Keys considered valid for numeric filter types\n   */\n  numericKeys: Set<string>;\n  /**\n   * Keys considered valid for the percentage aggregate and may have percentage\n   * search values\n   */\n  percentageKeys: Set<string>;\n  /**\n   * Text filter keys we allow to have operators\n   */\n  textOperatorKeys: Set<string>;\n};\n\nconst defaultConfig: SearchConfig = {\n  textOperatorKeys: new Set([\n    'release.version',\n    'release.build',\n    'release.package',\n    'release.stage',\n  ]),\n  durationKeys: new Set(['transaction.duration']),\n  percentageKeys: new Set(['percentage']),\n  // do not put functions in this Set\n  numericKeys: new Set([\n    'project_id',\n    'project.id',\n    'issue.id',\n    'stack.colno',\n    'stack.lineno',\n    'stack.stack_level',\n    'transaction.duration',\n  ]),\n  dateKeys: new Set([\n    'start',\n    'end',\n    'firstSeen',\n    'lastSeen',\n    'last_seen()',\n    'time',\n    'event.timestamp',\n    'timestamp',\n    'timestamp.to_hour',\n    'timestamp.to_day',\n  ]),\n  booleanKeys: new Set([\n    'error.handled',\n    'error.unhandled',\n    'stack.in_app',\n    'team_key_transaction',\n  ]),\n  allowBoolean: true,\n};\n\nconst options = {\n  TokenConverter,\n  TermOperator,\n  FilterType,\n  config: defaultConfig,\n};\n\n/**\n * Parse a search query into a ParseResult. Failing to parse the search query\n * will result in null.\n */\nexport function parseSearch(query: string): ParseResult | null {\n  try {\n    return grammar.parse(query, options);\n  } catch (e) {\n    // TODO(epurkhiser): Should we capture these errors somewhere?\n  }\n\n  return null;\n}\n\n/**\n * Join a parsed query array into a string.\n * Should handle null cases to chain easily with parseSearch.\n * Option to add a leading space when applicable (e.g. to combine with other strings).\n * Option to add a space between elements (e.g. for when no Token.Spaces present).\n */\nexport function joinQuery(\n  parsedTerms: ParseResult | null | undefined,\n  leadingSpace?: boolean,\n  additionalSpaceBetween?: boolean\n): string {\n  if (!parsedTerms || !parsedTerms.length) {\n    return '';\n  }\n\n  return (\n    (leadingSpace ? ' ' : '') +\n    (parsedTerms.length === 1\n      ? parsedTerms[0].text\n      : parsedTerms.map(p => p.text).join(additionalSpaceBetween ? ' ' : ''))\n  );\n}\n","import {Fragment, useEffect, useRef, useState} from 'react';\nimport {css, keyframes} from '@emotion/react';\nimport styled from '@emotion/styled';\nimport {useReducedMotion} from 'framer-motion';\n\nimport Tooltip from 'sentry/components/tooltip';\nimport space from 'sentry/styles/space';\n\nimport {ParseResult, Token, TokenResult} from './parser';\nimport {isWithinToken} from './utils';\n\ntype Props = {\n  /**\n   * The result from parsing the search query string\n   */\n  parsedQuery: ParseResult;\n  /**\n   * The current location of the cursor within the query. This is used to\n   * highlight active tokens and trigger error tooltips.\n   */\n  cursorPosition?: number;\n};\n\n/**\n * Renders the parsed query with syntax highlighting.\n */\nexport default function HighlightQuery({parsedQuery, cursorPosition}: Props) {\n  const result = renderResult(parsedQuery, cursorPosition ?? -1);\n\n  return <Fragment>{result}</Fragment>;\n}\n\nfunction renderResult(result: ParseResult, cursor: number) {\n  return result\n    .map(t => renderToken(t, cursor))\n    .map((renderedToken, i) => <Fragment key={i}>{renderedToken}</Fragment>);\n}\n\nfunction renderToken(token: TokenResult<Token>, cursor: number) {\n  switch (token.type) {\n    case Token.Spaces:\n      return token.value;\n\n    case Token.Filter:\n      return <FilterToken filter={token} cursor={cursor} />;\n\n    case Token.ValueTextList:\n    case Token.ValueNumberList:\n      return <ListToken token={token} cursor={cursor} />;\n\n    case Token.ValueNumber:\n      return <NumberToken token={token} />;\n\n    case Token.ValueBoolean:\n      return <Boolean>{token.text}</Boolean>;\n\n    case Token.ValueIso8601Date:\n      return <DateTime>{token.text}</DateTime>;\n\n    case Token.LogicGroup:\n      return <LogicGroup>{renderResult(token.inner, cursor)}</LogicGroup>;\n\n    case Token.LogicBoolean:\n      return <LogicBoolean>{token.value}</LogicBoolean>;\n\n    default:\n      return token.text;\n  }\n}\n\n// XXX(epurkhiser): We have to animate `left` here instead of `transform` since\n// inline elements cannot be transformed. The filter _must_ be inline to\n// support text wrapping.\nconst shakeAnimation = keyframes`\n  ${new Array(4)\n    .fill(0)\n    .map((_, i) => `${i * (100 / 4)}% { left: ${3 * (i % 2 === 0 ? 1 : -1)}px; }`)\n    .join('\\n')}\n`;\n\nconst FilterToken = ({\n  filter,\n  cursor,\n}: {\n  cursor: number;\n  filter: TokenResult<Token.Filter>;\n}) => {\n  const isActive = isWithinToken(filter, cursor);\n\n  // This state tracks if the cursor has left the filter token. We initialize it\n  // to !isActive in the case where the filter token is rendered without the\n  // cursor initially being in it.\n  const [hasLeft, setHasLeft] = useState(!isActive);\n\n  // Used to trigger the shake animation when the element becomes invalid\n  const filterElementRef = useRef<HTMLSpanElement>(null);\n\n  // Trigger the effect when isActive changes to updated whether the cursor has\n  // left the token.\n  useEffect(() => {\n    if (!isActive && !hasLeft) {\n      setHasLeft(true);\n    }\n  }, [hasLeft, isActive]);\n\n  const showInvalid = hasLeft && !!filter.invalid;\n  const showTooltip = showInvalid && isActive;\n\n  const reduceMotion = useReducedMotion();\n\n  // Trigger the shakeAnimation when showInvalid is set to true. We reset the\n  // animation by clearing the style, set it to running, and re-applying the\n  // animation\n  useEffect(() => {\n    if (!filterElementRef.current || !showInvalid || reduceMotion) {\n      return;\n    }\n\n    const style = filterElementRef.current.style;\n\n    style.animation = 'none';\n    void filterElementRef.current.offsetTop;\n\n    window.requestAnimationFrame(\n      () => (style.animation = `${shakeAnimation.name} 300ms`)\n    );\n  }, [reduceMotion, showInvalid]);\n\n  return (\n    <Tooltip\n      disabled={!showTooltip}\n      title={filter.invalid?.reason}\n      overlayStyle={{maxWidth: '350px'}}\n      forceVisible\n      skipWrapper\n    >\n      <Filter ref={filterElementRef} active={isActive} invalid={showInvalid}>\n        {filter.negated && <Negation>!</Negation>}\n        <KeyToken token={filter.key} negated={filter.negated} />\n        {filter.operator && <Operator>{filter.operator}</Operator>}\n        <Value>{renderToken(filter.value, cursor)}</Value>\n      </Filter>\n    </Tooltip>\n  );\n};\n\nconst KeyToken = ({\n  token,\n  negated,\n}: {\n  token: TokenResult<Token.KeySimple | Token.KeyAggregate | Token.KeyExplicitTag>;\n  negated?: boolean;\n}) => {\n  let value: React.ReactNode = token.text;\n\n  if (token.type === Token.KeyExplicitTag) {\n    value = (\n      <ExplicitKey prefix={token.prefix}>\n        {token.key.quoted ? `\"${token.key.value}\"` : token.key.value}\n      </ExplicitKey>\n    );\n  }\n\n  return <Key negated={!!negated}>{value}:</Key>;\n};\n\nconst ListToken = ({\n  token,\n  cursor,\n}: {\n  cursor: number;\n  token: TokenResult<Token.ValueNumberList | Token.ValueTextList>;\n}) => (\n  <InList>\n    {token.items.map(({value, separator}) => [\n      <ListComma key=\"comma\">{separator}</ListComma>,\n      value && renderToken(value, cursor),\n    ])}\n  </InList>\n);\n\nconst NumberToken = ({token}: {token: TokenResult<Token.ValueNumber>}) => (\n  <Fragment>\n    {token.value}\n    <Unit>{token.unit}</Unit>\n  </Fragment>\n);\n\ntype FilterProps = {\n  active: boolean;\n  invalid: boolean;\n};\n\nconst colorType = (p: FilterProps) =>\n  `${p.invalid ? 'invalid' : 'valid'}${p.active ? 'Active' : ''}` as const;\n\nconst Filter = styled('span')<FilterProps>`\n  --token-bg: ${p => p.theme.searchTokenBackground[colorType(p)]};\n  --token-border: ${p => p.theme.searchTokenBorder[colorType(p)]};\n  --token-value-color: ${p => (p.invalid ? p.theme.red300 : p.theme.blue300)};\n\n  position: relative;\n  animation-name: ${shakeAnimation};\n`;\n\nconst filterCss = css`\n  background: var(--token-bg);\n  border: 0.5px solid var(--token-border);\n  padding: ${space(0.25)} 0;\n`;\n\nconst Negation = styled('span')`\n  ${filterCss};\n  border-right: none;\n  padding-left: 1px;\n  margin-left: -2px;\n  font-weight: bold;\n  border-radius: 2px 0 0 2px;\n  color: ${p => p.theme.red300};\n`;\n\nconst Key = styled('span')<{negated: boolean}>`\n  ${filterCss};\n  border-right: none;\n  font-weight: bold;\n  ${p =>\n    !p.negated\n      ? css`\n          border-radius: 2px 0 0 2px;\n          padding-left: 1px;\n          margin-left: -2px;\n        `\n      : css`\n          border-left: none;\n          margin-left: 0;\n        `};\n`;\n\nconst ExplicitKey = styled('span')<{prefix: string}>`\n  &:before,\n  &:after {\n    color: ${p => p.theme.subText};\n  }\n  &:before {\n    content: '${p => p.prefix}[';\n  }\n  &:after {\n    content: ']';\n  }\n`;\n\nconst Operator = styled('span')`\n  ${filterCss};\n  border-left: none;\n  border-right: none;\n  margin: -1px 0;\n  color: ${p => p.theme.pink300};\n`;\n\nconst Value = styled('span')`\n  ${filterCss};\n  border-left: none;\n  border-radius: 0 2px 2px 0;\n  color: var(--token-value-color);\n  margin: -1px -2px -1px 0;\n  padding-right: 1px;\n`;\n\nconst Unit = styled('span')`\n  font-weight: bold;\n  color: ${p => p.theme.green300};\n`;\n\nconst LogicBoolean = styled('span')`\n  font-weight: bold;\n  color: ${p => p.theme.gray300};\n`;\n\nconst Boolean = styled('span')`\n  color: ${p => p.theme.pink300};\n`;\n\nconst DateTime = styled('span')`\n  color: ${p => p.theme.green300};\n`;\n\nconst ListComma = styled('span')`\n  color: ${p => p.theme.gray300};\n`;\n\nconst InList = styled('span')`\n  &:before {\n    content: '[';\n    font-weight: bold;\n    color: ${p => p.theme.purple300};\n  }\n  &:after {\n    content: ']';\n    font-weight: bold;\n    color: ${p => p.theme.purple300};\n  }\n\n  ${Value} {\n    color: ${p => p.theme.purple300};\n  }\n`;\n\nconst LogicGroup = styled(({children, ...props}) => (\n  <span {...props}>\n    <span>(</span>\n    {children}\n    <span>)</span>\n  </span>\n))`\n  > span:first-child,\n  > span:last-child {\n    position: relative;\n    color: transparent;\n\n    &:before {\n      position: absolute;\n      top: -5px;\n      color: ${p => p.theme.pink300};\n      font-size: 16px;\n      font-weight: bold;\n    }\n  }\n\n  > span:first-child:before {\n    left: -3px;\n    content: '(';\n  }\n  > span:last-child:before {\n    right: -3px;\n    content: ')';\n  }\n`;\n","import {LocationRange} from 'pegjs';\n\nimport {allOperators, Token, TokenResult} from './parser';\n\n/**\n * Used internally within treeResultLocator to stop recursion once we've\n * located a matched result.\n */\nclass TokenResultFound extends Error {\n  result: any;\n\n  constructor(result: any) {\n    super();\n    this.result = result;\n  }\n}\n\n/**\n * Used as the marker to skip token traversal in treeResultLocator\n */\nconst skipTokenMarker = Symbol('Returned to skip visiting a token');\n\ntype VisitorFn = (opts: {\n  /**\n   * Call this to return the provided value as the result of treeResultLocator\n   */\n  returnResult: (result: any) => TokenResultFound;\n  /**\n   * Return this to skip visiting any inner tokens\n   */\n  skipToken: typeof skipTokenMarker;\n  /**\n   * The token being visited\n   */\n  token: TokenResult<Token>;\n}) => null | TokenResultFound | typeof skipTokenMarker;\n\ntype TreeResultLocatorOpts = {\n  /**\n   * The value to return when returnValue was never called and all nodes of the\n   * search tree were visited.\n   */\n  noResultValue: any;\n  /**\n   * The tree to visit\n   */\n  tree: TokenResult<Token>[];\n  /**\n   * A function used to check if we've found the result in the node we're\n   * visiting. May also indicate that we want to skip any further traversal of\n   * inner nodes.\n   */\n  visitorTest: VisitorFn;\n};\n\n/**\n * Utility function to visit every Token node within an AST tree (in DFS order)\n * and apply a test method that may choose to return some value from that node.\n *\n * You must call the `returnValue` method for a result to be returned.\n *\n * When returnValue is never called and all nodes of the search tree have been\n * visited the noResultValue will be returned.\n */\nexport function treeResultLocator<T>({\n  tree,\n  visitorTest,\n  noResultValue,\n}: TreeResultLocatorOpts): T {\n  const returnResult = (result: any) => new TokenResultFound(result);\n\n  const nodeVisitor = (token: TokenResult<Token> | null) => {\n    if (token === null) {\n      return;\n    }\n\n    const result = visitorTest({token, returnResult, skipToken: skipTokenMarker});\n\n    // Bubble the result back up.\n    //\n    // XXX: Using a throw here is a bit easier than threading the return value\n    // back up through the recursive call tree.\n    if (result instanceof TokenResultFound) {\n      throw result;\n    }\n\n    // Don't traverse into any nested tokens\n    if (result === skipTokenMarker) {\n      return;\n    }\n\n    switch (token.type) {\n      case Token.Filter:\n        nodeVisitor(token.key);\n        nodeVisitor(token.value);\n        break;\n      case Token.KeyExplicitTag:\n        nodeVisitor(token.key);\n        break;\n      case Token.KeyAggregate:\n        nodeVisitor(token.name);\n        token.args && nodeVisitor(token.args);\n        nodeVisitor(token.argsSpaceBefore);\n        nodeVisitor(token.argsSpaceAfter);\n        break;\n      case Token.LogicGroup:\n        token.inner.forEach(nodeVisitor);\n        break;\n      case Token.KeyAggregateArgs:\n        token.args.forEach(v => nodeVisitor(v.value));\n        break;\n      case Token.ValueNumberList:\n      case Token.ValueTextList:\n        token.items.forEach((v: any) => nodeVisitor(v.value));\n        break;\n      default:\n    }\n  };\n\n  try {\n    tree.forEach(nodeVisitor);\n  } catch (error) {\n    if (error instanceof TokenResultFound) {\n      return error.result;\n    }\n\n    throw error;\n  }\n\n  return noResultValue;\n}\n\ntype TreeTransformerOpts = {\n  /**\n   * The function used to transform each node\n   */\n  transform: (token: TokenResult<Token>) => any;\n  /**\n   * The tree to transform\n   */\n  tree: TokenResult<Token>[];\n};\n\n/**\n * Utility function to visit every Token node within an AST tree and apply\n * a transform to those nodes.\n */\nexport function treeTransformer({tree, transform}: TreeTransformerOpts) {\n  const nodeVisitor = (token: TokenResult<Token> | null) => {\n    if (token === null) {\n      return null;\n    }\n\n    switch (token.type) {\n      case Token.Filter:\n        return transform({\n          ...token,\n          key: nodeVisitor(token.key),\n          value: nodeVisitor(token.value),\n        });\n      case Token.KeyExplicitTag:\n        return transform({\n          ...token,\n          key: nodeVisitor(token.key),\n        });\n      case Token.KeyAggregate:\n        return transform({\n          ...token,\n          name: nodeVisitor(token.name),\n          args: token.args ? nodeVisitor(token.args) : token.args,\n          argsSpaceBefore: nodeVisitor(token.argsSpaceBefore),\n          argsSpaceAfter: nodeVisitor(token.argsSpaceAfter),\n        });\n      case Token.LogicGroup:\n        return transform({\n          ...token,\n          inner: token.inner.map(nodeVisitor),\n        });\n      case Token.KeyAggregateArgs:\n        return transform({\n          ...token,\n          args: token.args.map(v => ({...v, value: nodeVisitor(v.value)})),\n        });\n      case Token.ValueNumberList:\n      case Token.ValueTextList:\n        return transform({\n          ...token,\n          // TODO(ts): Not sure why `v` cannot be inferred here\n          items: token.items.map((v: any) => ({...v, value: nodeVisitor(v.value)})),\n        });\n\n      default:\n        return transform(token);\n    }\n  };\n\n  return tree.map(nodeVisitor);\n}\n\ntype GetKeyNameOpts = {\n  /**\n   * Include arguments in aggregate key names\n   */\n  aggregateWithArgs?: boolean;\n};\n\n/**\n * Utility to get the string name of any type of key.\n */\nexport const getKeyName = (\n  key: TokenResult<Token.KeySimple | Token.KeyExplicitTag | Token.KeyAggregate>,\n  options: GetKeyNameOpts = {}\n) => {\n  const {aggregateWithArgs} = options;\n  switch (key.type) {\n    case Token.KeySimple:\n      return key.value;\n    case Token.KeyExplicitTag:\n      return key.key.value;\n    case Token.KeyAggregate:\n      return aggregateWithArgs\n        ? `${key.name.value}(${key.args ? key.args.text : ''})`\n        : key.name.value;\n    default:\n      return '';\n  }\n};\n\nexport function isWithinToken(\n  node: {location: LocationRange} | null | undefined,\n  position: number\n) {\n  if (!node) {\n    return false;\n  }\n\n  return position >= node.location.start.offset && position <= node.location.end.offset;\n}\n\nexport function isOperator(value: string) {\n  return allOperators.some(op => op === value);\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {browserHistory, withRouter, WithRouterProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {openModal} from 'sentry/actionCreators/modal';\nimport {pinSearch, unpinSearch} from 'sentry/actionCreators/savedSearches';\nimport Access from 'sentry/components/acl/access';\nimport Button from 'sentry/components/button';\nimport MenuItem from 'sentry/components/menuItem';\nimport {IconAdd, IconPin, IconSliders} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {SavedSearch, SavedSearchType} from 'sentry/types';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport CreateSavedSearchModal from 'sentry/views/issueList/createSavedSearchModal';\n\nimport SmartSearchBar from './index';\nimport {removeSpace} from './utils';\n\ntype SmartSearchBarProps = React.ComponentProps<typeof SmartSearchBar>;\n\ntype ActionItem = NonNullable<SmartSearchBarProps['actionBarItems']>[number];\ntype ActionProps = React.ComponentProps<ActionItem['Action']>;\n\ntype PinSearchActionOpts = {\n  /**\n   * The current issue sort\n   */\n  sort: string;\n  /**\n   * The currently pinned search\n   */\n  pinnedSearch?: SavedSearch;\n};\n\n/**\n * The Pin Search action toggles the current as a pinned search\n */\nexport function makePinSearchAction({pinnedSearch, sort}: PinSearchActionOpts) {\n  const PinSearchAction = ({\n    menuItemVariant,\n    savedSearchType,\n    organization,\n    api,\n    query,\n    location,\n  }: ActionProps & WithRouterProps) => {\n    const onTogglePinnedSearch = async (evt: React.MouseEvent) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n\n      if (savedSearchType === undefined) {\n        return;\n      }\n\n      const {cursor: _cursor, page: _page, ...currentQuery} = location.query;\n\n      trackAdvancedAnalyticsEvent('search.pin', {\n        organization,\n        action: !!pinnedSearch ? 'unpin' : 'pin',\n        search_type: savedSearchType === SavedSearchType.ISSUE ? 'issues' : 'events',\n        query: pinnedSearch?.query ?? query,\n      });\n\n      if (!!pinnedSearch) {\n        unpinSearch(api, organization.slug, savedSearchType, pinnedSearch).then(() => {\n          browserHistory.push({\n            ...location,\n            pathname: `/organizations/${organization.slug}/issues/`,\n            query: {\n              ...currentQuery,\n              query: pinnedSearch.query,\n              sort: pinnedSearch.sort,\n            },\n          });\n        });\n        return;\n      }\n\n      const resp = await pinSearch(\n        api,\n        organization.slug,\n        savedSearchType,\n        removeSpace(query),\n        sort\n      );\n\n      if (!resp || !resp.id) {\n        return;\n      }\n\n      browserHistory.push({\n        ...location,\n        pathname: `/organizations/${organization.slug}/issues/searches/${resp.id}/`,\n        query: currentQuery,\n      });\n    };\n\n    const pinTooltip = !!pinnedSearch ? t('Unpin this search') : t('Pin this search');\n\n    return menuItemVariant ? (\n      <MenuItem\n        withBorder\n        data-test-id=\"pin-icon\"\n        icon={<IconPin isSolid={!!pinnedSearch} size=\"xs\" />}\n        onClick={onTogglePinnedSearch}\n      >\n        {!!pinnedSearch ? t('Unpin Search') : t('Pin Search')}\n      </MenuItem>\n    ) : (\n      <ActionButton\n        title={pinTooltip}\n        disabled={!query}\n        aria-label={pinTooltip}\n        onClick={onTogglePinnedSearch}\n        isActive={!!pinnedSearch}\n        data-test-id=\"pin-icon\"\n        icon={<IconPin isSolid={!!pinnedSearch} size=\"xs\" />}\n      />\n    );\n  };\n\n  return {key: 'pinSearch', Action: withRouter(PinSearchAction)};\n}\n\ntype SaveSearchActionOpts = {\n  /**\n   * The current issue sort\n   */\n  sort: string;\n};\n\n/**\n * The Save Search action triggers the create saved search modal from the\n * current query.\n */\nexport function makeSaveSearchAction({sort}: SaveSearchActionOpts) {\n  const SavedSearchAction = ({menuItemVariant, query, organization}: ActionProps) => {\n    const onClick = () =>\n      openModal(deps => (\n        <CreateSavedSearchModal {...deps} {...{organization, query, sort}} />\n      ));\n\n    return (\n      <Access organization={organization} access={['org:write']}>\n        {({hasAccess}) => {\n          const title = hasAccess\n            ? t('Add to organization saved searches')\n            : t('You do not have permission to create a saved search');\n\n          return menuItemVariant ? (\n            <MenuItem\n              onClick={onClick}\n              disabled={!hasAccess}\n              icon={<IconAdd size=\"xs\" />}\n              title={!hasAccess ? title : undefined}\n              withBorder\n            >\n              {t('Create Saved Search')}\n            </MenuItem>\n          ) : (\n            <ActionButton\n              onClick={onClick}\n              disabled={!hasAccess}\n              icon={<IconAdd size=\"xs\" />}\n              title={title}\n              aria-label={title}\n              data-test-id=\"save-current-search\"\n            />\n          );\n        }}\n      </Access>\n    );\n  };\n\n  return {key: 'saveSearch', Action: SavedSearchAction};\n}\n\ntype SearchBuilderActionOpts = {\n  onSidebarToggle: React.MouseEventHandler;\n};\n\n/**\n * The Search Builder action toggles the Issue Stream search builder\n */\nexport function makeSearchBuilderAction({onSidebarToggle}: SearchBuilderActionOpts) {\n  const SearchBuilderAction = ({menuItemVariant}: ActionProps) =>\n    menuItemVariant ? (\n      <MenuItem withBorder icon={<IconSliders size=\"xs\" />} onClick={onSidebarToggle}>\n        {t('Toggle sidebar')}\n      </MenuItem>\n    ) : (\n      <ActionButton\n        title={t('Toggle search builder')}\n        tooltipProps={{containerDisplayMode: 'inline-flex'}}\n        aria-label={t('Toggle search builder')}\n        onClick={onSidebarToggle}\n        icon={<IconSliders size=\"xs\" />}\n      />\n    );\n\n  return {key: 'searchBuilder', Action: SearchBuilderAction};\n}\n\nexport const ActionButton = styled(Button)<{isActive?: boolean}>`\n  color: ${p => (p.isActive ? p.theme.blue300 : p.theme.gray300)};\n  width: 18px;\n\n  &,\n  &:hover,\n  &:focus {\n    background: transparent;\n  }\n\n  &:hover {\n    color: ${p => p.theme.gray400};\n  }\n`;\n\nActionButton.defaultProps = {\n  type: 'button',\n  borderless: true,\n  size: 'zero',\n};\n","import {Component, createRef} from 'react';\nimport TextareaAutosize from 'react-autosize-textarea';\n// eslint-disable-next-line no-restricted-imports\nimport {withRouter, WithRouterProps} from 'react-router';\nimport isPropValid from '@emotion/is-prop-valid';\nimport styled from '@emotion/styled';\nimport * as Sentry from '@sentry/react';\nimport debounce from 'lodash/debounce';\n\nimport {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport {fetchRecentSearches, saveRecentSearch} from 'sentry/actionCreators/savedSearches';\nimport {Client} from 'sentry/api';\nimport ButtonBar from 'sentry/components/buttonBar';\nimport DropdownLink from 'sentry/components/dropdownLink';\nimport {normalizeDateTimeParams} from 'sentry/components/organizations/pageFilters/parse';\nimport {\n  FilterType,\n  ParseResult,\n  parseSearch,\n  TermOperator,\n  Token,\n  TokenResult,\n} from 'sentry/components/searchSyntax/parser';\nimport HighlightQuery from 'sentry/components/searchSyntax/renderer';\nimport {\n  getKeyName,\n  isOperator,\n  isWithinToken,\n  treeResultLocator,\n} from 'sentry/components/searchSyntax/utils';\nimport {\n  DEFAULT_DEBOUNCE_DURATION,\n  MAX_AUTOCOMPLETE_RELEASES,\n  NEGATION_OPERATOR,\n} from 'sentry/constants';\nimport {IconClose, IconEllipsis, IconSearch} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport MemberListStore from 'sentry/stores/memberListStore';\nimport space from 'sentry/styles/space';\nimport {Organization, SavedSearchType, Tag, User} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport {callIfFunction} from 'sentry/utils/callIfFunction';\nimport {FieldValueType, getFieldDefinition} from 'sentry/utils/fields';\nimport getDynamicComponent from 'sentry/utils/getDynamicComponent';\nimport withApi from 'sentry/utils/withApi';\nimport withOrganization from 'sentry/utils/withOrganization';\n\nimport {ActionButton} from './actions';\nimport SearchBarDatePicker from './searchBarDatePicker';\nimport SearchDropdown from './searchDropdown';\nimport SearchHotkeysListener from './searchHotkeysListener';\nimport {\n  AutocompleteGroup,\n  ItemType,\n  SearchGroup,\n  SearchItem,\n  Shortcut,\n  ShortcutType,\n} from './types';\nimport {\n  addSpace,\n  createSearchGroups,\n  filterKeysFromQuery,\n  generateOperatorEntryMap,\n  getDateTagAutocompleteGroups,\n  getSearchGroupWithItemMarkedActive,\n  getTagItemsFromKeys,\n  getValidOps,\n  removeSpace,\n  shortcuts,\n} from './utils';\n\n/**\n * The max width in pixels of the search bar at which the buttons will\n * have overflowed into the dropdown.\n */\nconst ACTION_OVERFLOW_WIDTH = 400;\n\n/**\n * Actions are moved to the overflow dropdown after each pixel step is reached.\n */\nconst ACTION_OVERFLOW_STEPS = 75;\n\nconst makeQueryState = (query: string) => ({\n  query,\n  parsedQuery: parseSearch(query),\n});\n\nconst generateOpAutocompleteGroup = (\n  validOps: readonly TermOperator[],\n  tagName: string\n): AutocompleteGroup => {\n  const operatorMap = generateOperatorEntryMap(tagName);\n  const operatorItems = validOps.map(op => operatorMap[op]);\n  return {\n    searchItems: operatorItems,\n    recentSearchItems: undefined,\n    tagName: '',\n    type: ItemType.TAG_OPERATOR,\n  };\n};\n\nconst escapeValue = (value: string): string => {\n  // Wrap in quotes if there is a space\n  return value.includes(' ') || value.includes('\"')\n    ? `\"${value.replace(/\"/g, '\\\\\"')}\"`\n    : value;\n};\n\ntype ActionProps = {\n  api: Client;\n  /**\n   * The organization\n   */\n  organization: Organization;\n  /**\n   * The current query\n   */\n  query: string;\n  /**\n   * Render the actions as a menu item\n   */\n  menuItemVariant?: boolean;\n  /**\n   * The saved search type passed to the search bar\n   */\n  savedSearchType?: SavedSearchType;\n};\n\ntype ActionBarItem = {\n  /**\n   * The action component to render\n   */\n  Action: React.ComponentType<ActionProps>;\n  /**\n   * Name of the action\n   */\n  key: string;\n};\n\ntype Props = WithRouterProps & {\n  api: Client;\n  organization: Organization;\n  /**\n   * Additional components to render as actions on the right of the search bar\n   */\n  actionBarItems?: ActionBarItem[];\n  className?: string;\n\n  defaultQuery?: string;\n  /**\n   * Search items to display when there's no tag key. Is a tuple of search\n   * items and recent search items\n   */\n  defaultSearchItems?: [SearchItem[], SearchItem[]];\n  /**\n   * Disabled control (e.g. read-only)\n   */\n  disabled?: boolean;\n  dropdownClassName?: string;\n  /**\n   * If true, excludes the environment tag from the autocompletion list. This\n   * is because we don't want to treat environment as a tag in some places such\n   * as the stream view where it is a top level concept\n   */\n  excludeEnvironment?: boolean;\n  /**\n   * List user's recent searches\n   */\n  hasRecentSearches?: boolean;\n  /**\n   * Allows additional content to be played before the search bar and icon\n   */\n  inlineLabel?: React.ReactNode;\n  /**\n   * Maximum height for the search dropdown menu\n   */\n  maxMenuHeight?: number;\n  /**\n   * Used to enforce length on the query\n   */\n  maxQueryLength?: number;\n  /**\n   * Maximum number of search items to display or a falsey value for no\n   * maximum\n   */\n  maxSearchItems?: number;\n  /**\n   * While the data is unused, this list of members can be updated to\n   * trigger re-renders.\n   */\n  members?: User[];\n  /**\n   * Called when the search input is blurred.\n   * Note that the input may be blurred when the user selects an autocomplete\n   * value - if you don't want that, onClose may be a better option.\n   */\n  onBlur?: (value: string) => void;\n  /**\n   * Called when the search input changes\n   */\n  onChange?: (value: string, e: React.ChangeEvent) => void;\n  /**\n   * Called when the user has closed the search dropdown.\n   * Occurs on escape, tab, or clicking outside the component.\n   */\n  onClose?: (value: string) => void;\n  /**\n   * Get a list of recent searches for the current query\n   */\n  onGetRecentSearches?: (query: string) => Promise<SearchItem[]>;\n  /**\n   * Get a list of tag values for the passed tag\n   */\n  onGetTagValues?: (tag: Tag, query: string, params: object) => Promise<string[]>;\n  /**\n   * Called on key down\n   */\n  onKeyDown?: (evt: React.KeyboardEvent<HTMLTextAreaElement>) => void;\n  /**\n   * Called when a recent search is saved\n   */\n  onSavedRecentSearch?: (query: string) => void;\n  /**\n   * Called when the user makes a search\n   */\n  onSearch?: (query: string) => void;\n  /**\n   * Input placeholder\n   */\n  placeholder?: string;\n  /**\n   * Prepare query value before filtering dropdown items\n   */\n  prepareQuery?: (query: string) => string;\n  query?: string | null;\n  /**\n   * If this is defined, attempt to save search term scoped to the user and\n   * the current org\n   */\n  savedSearchType?: SavedSearchType;\n  /**\n   * Indicates the usage of the search bar for analytics\n   */\n  searchSource?: string;\n  /**\n   * Type of supported tags\n   */\n  supportedTagType?: ItemType;\n  /**\n   * Map of tags\n   */\n  supportedTags?: {[key: string]: Tag};\n  /**\n   * Wrap the input with a form. Useful if search bar is used within a parent\n   * form\n   */\n  useFormWrapper?: boolean;\n};\n\ntype State = {\n  /**\n   * Index of the focused search item\n   */\n  activeSearchItem: number;\n  flatSearchItems: SearchItem[];\n  inputHasFocus: boolean;\n  loading: boolean;\n  /**\n   * The number of actions that are not in the overflow menu.\n   */\n  numActionsVisible: number;\n  /**\n   * The query parsed into an AST. If the query fails to parse this will be\n   * null.\n   */\n  parsedQuery: ParseResult | null;\n  /**\n   * The current search query in the input\n   */\n  query: string;\n  searchGroups: SearchGroup[];\n  /**\n   * The current search term (or 'key') that that we will be showing\n   * autocompletion for.\n   */\n  searchTerm: string;\n\n  /**\n   * Boolean indicating if dropdown should be shown\n   */\n  showDropdown: boolean;\n  tags: Record<string, string>;\n  /**\n   * Indicates that we have a query that we've already determined not to have\n   * any values. This is used to stop the autocompleter from querying if we\n   * know we will find nothing.\n   */\n  noValueQuery?: string;\n  /**\n   * The query in the input since we last updated our autocomplete list.\n   */\n  previousQuery?: string;\n};\n\nclass SmartSearchBar extends Component<Props, State> {\n  static defaultProps = {\n    defaultQuery: '',\n    query: null,\n    onSearch: function () {},\n    excludeEnvironment: false,\n    placeholder: t('Search for events, users, tags, and more'),\n    supportedTags: {},\n    defaultSearchItems: [[], []],\n    useFormWrapper: true,\n    savedSearchType: SavedSearchType.ISSUE,\n  };\n\n  state: State = {\n    query: this.initialQuery,\n    showDropdown: false,\n    parsedQuery: parseSearch(this.initialQuery),\n    searchTerm: '',\n    searchGroups: [],\n    flatSearchItems: [],\n    activeSearchItem: -1,\n    tags: {},\n    inputHasFocus: false,\n    loading: false,\n    numActionsVisible: this.props.actionBarItems?.length ?? 0,\n  };\n\n  componentDidMount() {\n    if (!window.ResizeObserver) {\n      return;\n    }\n\n    if (this.containerRef.current === null) {\n      return;\n    }\n\n    this.inputResizeObserver = new ResizeObserver(this.updateActionsVisible);\n    this.inputResizeObserver.observe(this.containerRef.current);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const {query} = this.props;\n    const {query: lastQuery} = prevProps;\n\n    if (query !== lastQuery && (defined(query) || defined(lastQuery))) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState(makeQueryState(addSpace(query ?? undefined)));\n    }\n  }\n\n  componentWillUnmount() {\n    this.inputResizeObserver?.disconnect();\n    document.removeEventListener('pointerup', this.onBackgroundPointerUp);\n  }\n\n  get initialQuery() {\n    const {query, defaultQuery} = this.props;\n    return query !== null ? addSpace(query) : defaultQuery ?? '';\n  }\n\n  /**\n   * Ref to the search element itself\n   */\n  searchInput = createRef<HTMLTextAreaElement>();\n\n  /**\n   * Ref to the search container\n   */\n  containerRef = createRef<HTMLDivElement>();\n\n  /**\n   * Used to determine when actions should be moved to the action overflow menu\n   */\n  inputResizeObserver: ResizeObserver | null = null;\n\n  /**\n   * Only closes the dropdown when pointer events occur outside of this component\n   */\n  onBackgroundPointerUp = (e: PointerEvent) => {\n    if (this.containerRef.current?.contains(e.target as Node)) {\n      return;\n    }\n\n    this.close();\n  };\n\n  /**\n   * Updates the numActionsVisible count as the search bar is resized\n   */\n  updateActionsVisible = (entries: ResizeObserverEntry[]) => {\n    if (entries.length === 0) {\n      return;\n    }\n\n    const entry = entries[0];\n    const {width} = entry.contentRect;\n    const actionCount = this.props.actionBarItems?.length ?? 0;\n\n    const numActionsVisible = Math.min(\n      actionCount,\n      Math.floor(Math.max(0, width - ACTION_OVERFLOW_WIDTH) / ACTION_OVERFLOW_STEPS)\n    );\n\n    if (this.state.numActionsVisible === numActionsVisible) {\n      return;\n    }\n\n    this.setState({numActionsVisible});\n  };\n\n  blur() {\n    if (!this.searchInput.current) {\n      return;\n    }\n    this.searchInput.current.blur();\n    this.close();\n  }\n\n  async doSearch() {\n    this.blur();\n\n    const query = removeSpace(this.state.query);\n    const {organization, savedSearchType, searchSource} = this.props;\n\n    if (!this.hasValidSearch) {\n      trackAdvancedAnalyticsEvent('search.search_with_invalid', {\n        organization,\n        query,\n        search_type: savedSearchType === 0 ? 'issues' : 'events',\n        search_source: searchSource,\n      });\n      return;\n    }\n\n    const {onSearch, onSavedRecentSearch, api} = this.props;\n    trackAdvancedAnalyticsEvent('search.searched', {\n      organization,\n      query,\n      search_type: savedSearchType === 0 ? 'issues' : 'events',\n      search_source: searchSource,\n    });\n\n    callIfFunction(onSearch, query);\n\n    // Only save recent search query if we have a savedSearchType (also 0 is a valid value)\n    // Do not save empty string queries (i.e. if they clear search)\n    if (typeof savedSearchType === 'undefined' || !query) {\n      return;\n    }\n\n    try {\n      await saveRecentSearch(api, organization.slug, savedSearchType, query);\n\n      if (onSavedRecentSearch) {\n        onSavedRecentSearch(query);\n      }\n    } catch (err) {\n      // Silently capture errors if it fails to save\n      Sentry.captureException(err);\n    }\n  }\n\n  moveToNextToken = (filterTokens: TokenResult<Token.Filter>[]) => {\n    const token = this.cursorToken;\n\n    if (this.searchInput.current && filterTokens.length > 0) {\n      this.searchInput.current.focus();\n\n      let offset = filterTokens[0].location.end.offset;\n      if (token) {\n        const tokenIndex = filterTokens.findIndex(tok => tok === token);\n        if (tokenIndex !== -1 && tokenIndex + 1 < filterTokens.length) {\n          offset = filterTokens[tokenIndex + 1].location.end.offset;\n        }\n      }\n\n      this.searchInput.current.selectionStart = offset;\n      this.searchInput.current.selectionEnd = offset;\n      this.updateAutoCompleteItems();\n    }\n  };\n\n  deleteToken = () => {\n    const {query} = this.state;\n    const token = this.cursorToken ?? undefined;\n    const filterTokens = this.filterTokens;\n    const hasExecCommand = typeof document.execCommand === 'function';\n\n    if (token && filterTokens.length > 0) {\n      const index = filterTokens.findIndex(tok => tok === token) ?? -1;\n      const newQuery =\n        // We trim to remove any remaining spaces\n        query.slice(0, token.location.start.offset).trim() +\n        (index > 0 && index < filterTokens.length - 1 ? ' ' : '') +\n        query.slice(token.location.end.offset).trim();\n\n      if (this.searchInput.current) {\n        // Only use exec command if exists\n        this.searchInput.current.focus();\n\n        this.searchInput.current.selectionStart = 0;\n        this.searchInput.current.selectionEnd = query.length;\n\n        // Because firefox doesn't support inserting an empty string, we insert a newline character instead\n        // But because of this, only on firefox, if you delete the last token you won't be able to undo.\n        if (\n          (navigator.userAgent.toLowerCase().includes('firefox') &&\n            newQuery.length === 0) ||\n          !hasExecCommand ||\n          !document.execCommand('insertText', false, newQuery)\n        ) {\n          // This will run either when newQuery is empty on firefox or when execCommand fails.\n          this.updateQuery(newQuery);\n        }\n      }\n    }\n  };\n\n  negateToken = () => {\n    const {query} = this.state;\n    const token = this.cursorToken ?? undefined;\n    const hasExecCommand = typeof document.execCommand === 'function';\n\n    if (token && token.type === Token.Filter) {\n      if (token.negated) {\n        if (this.searchInput.current) {\n          this.searchInput.current.focus();\n\n          const tokenCursorOffset = this.cursorPosition - token.key.location.start.offset;\n\n          // Select the whole token so we can replace it.\n          this.searchInput.current.selectionStart = token.location.start.offset;\n          this.searchInput.current.selectionEnd = token.location.end.offset;\n\n          // We can't call insertText with an empty string on Firefox, so we have to do this.\n          if (\n            !hasExecCommand ||\n            !document.execCommand('insertText', false, token.text.slice(1))\n          ) {\n            // Fallback when execCommand fails\n            const newQuery =\n              query.slice(0, token.location.start.offset) +\n              query.slice(token.key.location.start.offset);\n            this.updateQuery(newQuery, this.cursorPosition - 1);\n          }\n\n          // Return the cursor to where it should be\n          const newCursorPosition = token.location.start.offset + tokenCursorOffset;\n          this.searchInput.current.selectionStart = newCursorPosition;\n          this.searchInput.current.selectionEnd = newCursorPosition;\n        }\n      } else {\n        if (this.searchInput.current) {\n          this.searchInput.current.focus();\n\n          const tokenCursorOffset = this.cursorPosition - token.key.location.start.offset;\n\n          this.searchInput.current.selectionStart = token.location.start.offset;\n          this.searchInput.current.selectionEnd = token.location.start.offset;\n\n          if (!hasExecCommand || !document.execCommand('insertText', false, '!')) {\n            // Fallback when execCommand fails\n            const newQuery =\n              query.slice(0, token.key.location.start.offset) +\n              '!' +\n              query.slice(token.key.location.start.offset);\n            this.updateQuery(newQuery, this.cursorPosition + 1);\n          }\n\n          // Return the cursor to where it should be, +1 for the ! character we added\n          const newCursorPosition = token.location.start.offset + tokenCursorOffset + 1;\n          this.searchInput.current.selectionStart = newCursorPosition;\n          this.searchInput.current.selectionEnd = newCursorPosition;\n        }\n      }\n    }\n  };\n\n  logShortcutEvent = (shortcutType: ShortcutType, shortcutMethod: 'click' | 'hotkey') => {\n    const {searchSource, savedSearchType, organization} = this.props;\n    const {query} = this.state;\n    trackAdvancedAnalyticsEvent('search.shortcut_used', {\n      organization,\n      search_type: savedSearchType === 0 ? 'issues' : 'events',\n      search_source: searchSource,\n      shortcut_method: shortcutMethod,\n      shortcut_type: shortcutType,\n      query,\n    });\n  };\n\n  runShortcutOnClick = (shortcut: Shortcut) => {\n    this.runShortcut(shortcut);\n    this.logShortcutEvent(shortcut.shortcutType, 'click');\n  };\n\n  runShortcutOnHotkeyPress = (shortcut: Shortcut) => {\n    this.runShortcut(shortcut);\n    this.logShortcutEvent(shortcut.shortcutType, 'hotkey');\n  };\n\n  runShortcut = (shortcut: Shortcut) => {\n    const token = this.cursorToken;\n    const filterTokens = this.filterTokens;\n\n    const {shortcutType, canRunShortcut} = shortcut;\n\n    if (canRunShortcut(token, this.filterTokens.length)) {\n      switch (shortcutType) {\n        case ShortcutType.Delete: {\n          this.deleteToken();\n          break;\n        }\n        case ShortcutType.Negate: {\n          this.negateToken();\n          break;\n        }\n        case ShortcutType.Next: {\n          this.moveToNextToken(filterTokens);\n          break;\n        }\n        case ShortcutType.Previous: {\n          this.moveToNextToken(filterTokens.reverse());\n          break;\n        }\n        default:\n          break;\n      }\n    }\n  };\n\n  onSubmit = (evt: React.FormEvent) => {\n    evt.preventDefault();\n    this.doSearch();\n  };\n\n  clearSearch = () => {\n    this.setState(makeQueryState(''), () => {\n      this.close();\n      callIfFunction(this.props.onSearch, this.state.query);\n    });\n  };\n\n  close = () => {\n    this.setState({showDropdown: false});\n    callIfFunction(this.props.onClose, this.state.query);\n    document.removeEventListener('pointerup', this.onBackgroundPointerUp);\n  };\n\n  open = () => {\n    this.setState({showDropdown: true});\n    document.addEventListener('pointerup', this.onBackgroundPointerUp);\n  };\n\n  onQueryFocus = () => {\n    this.open();\n    this.setState({inputHasFocus: true});\n  };\n\n  onQueryBlur = (e: React.FocusEvent<HTMLTextAreaElement>) => {\n    this.setState({inputHasFocus: false});\n    callIfFunction(this.props.onBlur, e.target.value);\n  };\n\n  onQueryChange = (evt: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const query = evt.target.value.replace('\\n', '');\n\n    this.setState(makeQueryState(query), this.updateAutoCompleteItems);\n    callIfFunction(this.props.onChange, evt.target.value, evt);\n  };\n\n  /**\n   * Prevent pasting extra spaces from formatted text\n   */\n  onPaste = (evt: React.ClipboardEvent<HTMLTextAreaElement>) => {\n    // Cancel paste\n    evt.preventDefault();\n\n    // Get text representation of clipboard\n    const text = evt.clipboardData.getData('text/plain').replace('\\n', '').trim();\n\n    // Create new query\n    const currentQuery = this.state.query;\n    const cursorPosStart = this.searchInput.current!.selectionStart;\n    const cursorPosEnd = this.searchInput.current!.selectionEnd;\n    const textBefore = currentQuery.substring(0, cursorPosStart);\n    const textAfter = currentQuery.substring(cursorPosEnd, currentQuery.length);\n    const mergedText = `${textBefore}${text}${textAfter}`;\n\n    // Insert text manually\n    this.setState(makeQueryState(mergedText), () => {\n      this.updateAutoCompleteItems();\n      // Update cursor position after updating text\n      const newCursorPosition = cursorPosStart + text.length;\n      this.searchInput.current!.selectionStart = newCursorPosition;\n      this.searchInput.current!.selectionEnd = newCursorPosition;\n    });\n    callIfFunction(this.props.onChange, mergedText, evt);\n  };\n\n  onInputClick = () => {\n    this.open();\n    this.updateAutoCompleteItems();\n  };\n\n  /**\n   * Handle keyboard navigation\n   */\n  onKeyDown = (evt: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    const {onKeyDown} = this.props;\n    const {key} = evt;\n\n    callIfFunction(onKeyDown, evt);\n\n    const hasSearchGroups = this.state.searchGroups.length > 0;\n    const isSelectingDropdownItems = this.state.activeSearchItem !== -1;\n\n    if (!this.state.showDropdown && key !== 'Escape') {\n      this.open();\n    }\n\n    if ((key === 'ArrowDown' || key === 'ArrowUp') && hasSearchGroups) {\n      evt.preventDefault();\n\n      const {flatSearchItems, activeSearchItem} = this.state;\n      let searchGroups = [...this.state.searchGroups];\n\n      const currIndex = isSelectingDropdownItems ? activeSearchItem : 0;\n      const totalItems = flatSearchItems.length;\n\n      // Move the selected index up/down\n      const nextActiveSearchItem =\n        key === 'ArrowUp'\n          ? (currIndex - 1 + totalItems) % totalItems\n          : isSelectingDropdownItems\n          ? (currIndex + 1) % totalItems\n          : 0;\n\n      // Clear previous selection\n      const prevItem = flatSearchItems[currIndex];\n      searchGroups = getSearchGroupWithItemMarkedActive(searchGroups, prevItem, false);\n\n      // Set new selection\n      const activeItem = flatSearchItems[nextActiveSearchItem];\n      searchGroups = getSearchGroupWithItemMarkedActive(searchGroups, activeItem, true);\n\n      this.setState({searchGroups, activeSearchItem: nextActiveSearchItem});\n    }\n\n    if (\n      (key === 'Tab' || key === 'Enter') &&\n      isSelectingDropdownItems &&\n      hasSearchGroups\n    ) {\n      evt.preventDefault();\n\n      const {activeSearchItem, flatSearchItems} = this.state;\n\n      const item = flatSearchItems[activeSearchItem];\n\n      if (item) {\n        if (item.callback) {\n          item.callback();\n        } else {\n          this.onAutoComplete(item.value ?? '', item);\n        }\n      }\n      return;\n    }\n\n    // If not selecting an item, allow tab to exit search and close the dropdown\n    if (key === 'Tab' && !isSelectingDropdownItems) {\n      this.close();\n      return;\n    }\n\n    if (key === 'Enter' && !isSelectingDropdownItems) {\n      this.doSearch();\n      return;\n    }\n\n    const cursorToken = this.cursorToken;\n    if (\n      key === '[' &&\n      cursorToken?.type === Token.Filter &&\n      cursorToken.value.text.length === 0 &&\n      isWithinToken(cursorToken.value, this.cursorPosition)\n    ) {\n      const {query} = this.state;\n      evt.preventDefault();\n      let clauseStart: null | number = null;\n      let clauseEnd: null | number = null;\n      // the new text that will exist between clauseStart and clauseEnd\n      const replaceToken = '[]';\n      const location = cursorToken.value.location;\n      const keyLocation = cursorToken.key.location;\n      // Include everything after the ':'\n      clauseStart = keyLocation.end.offset + 1;\n      clauseEnd = location.end.offset + 1;\n      const beforeClause = query.substring(0, clauseStart);\n      let endClause = query.substring(clauseEnd);\n      // Add space before next clause if it exists\n      if (endClause) {\n        endClause = ` ${endClause}`;\n      }\n      const newQuery = `${beforeClause}${replaceToken}${endClause}`;\n      // Place cursor between inserted brackets\n      this.updateQuery(newQuery, beforeClause.length + replaceToken.length - 1);\n      return;\n    }\n  };\n\n  onKeyUp = (evt: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (evt.key === 'ArrowLeft' || evt.key === 'ArrowRight') {\n      this.updateAutoCompleteItems();\n    }\n\n    // Other keys are managed at onKeyDown function\n    if (evt.key !== 'Escape') {\n      return;\n    }\n\n    evt.preventDefault();\n\n    if (!this.state.showDropdown) {\n      this.blur();\n      return;\n    }\n\n    const {flatSearchItems, activeSearchItem} = this.state;\n    const isSelectingDropdownItems = this.state.activeSearchItem > -1;\n\n    let searchGroups = [...this.state.searchGroups];\n    if (isSelectingDropdownItems) {\n      searchGroups = getSearchGroupWithItemMarkedActive(\n        searchGroups,\n        flatSearchItems[activeSearchItem],\n        false\n      );\n    }\n\n    this.setState({\n      activeSearchItem: -1,\n      searchGroups,\n    });\n    this.close();\n  };\n\n  /**\n   * Check if any filters are invalid within the search query\n   */\n  get hasValidSearch() {\n    const {parsedQuery} = this.state;\n\n    // If we fail to parse be optimistic that it's valid\n    if (parsedQuery === null) {\n      return true;\n    }\n\n    return treeResultLocator<boolean>({\n      tree: parsedQuery,\n      noResultValue: true,\n      visitorTest: ({token, returnResult, skipToken}) =>\n        token.type !== Token.Filter\n          ? null\n          : token.invalid\n          ? returnResult(false)\n          : skipToken,\n    });\n  }\n\n  /**\n   * Get the active filter or free text actively focused.\n   */\n  get cursorToken() {\n    const matchedTokens = [Token.Filter, Token.FreeText] as const;\n    return this.findTokensAtCursor(matchedTokens);\n  }\n\n  /**\n   * Get the active parsed text value\n   */\n  get cursorValue() {\n    const matchedTokens = [Token.ValueText] as const;\n    return this.findTokensAtCursor(matchedTokens);\n  }\n\n  /**\n   * Get the active filter\n   */\n  get cursorFilter() {\n    const matchedTokens = [Token.Filter] as const;\n    return this.findTokensAtCursor(matchedTokens);\n  }\n\n  get cursorValueIsoDate(): TokenResult<Token.ValueIso8601Date> | null {\n    const matchedTokens = [Token.ValueIso8601Date] as const;\n    return this.findTokensAtCursor(matchedTokens);\n  }\n\n  get cursorValueRelativeDate() {\n    const matchedTokens = [Token.ValueRelativeDate] as const;\n    return this.findTokensAtCursor(matchedTokens);\n  }\n\n  get currentFieldDefinition() {\n    if (!this.cursorToken || this.cursorToken.type !== Token.Filter) {\n      return null;\n    }\n\n    const tagName = getKeyName(this.cursorToken.key, {aggregateWithArgs: true});\n\n    return getFieldDefinition(tagName);\n  }\n\n  /**\n   * Determines when the date picker should be shown instead of normal dropdown options.\n   * This should return true when the cursor is within a date tag value and the user has\n   * typed in an operator (or already has a date value).\n   */\n  get shouldShowDatePicker() {\n    if (\n      !this.state.showDropdown ||\n      !this.cursorToken ||\n      this.currentFieldDefinition?.valueType !== FieldValueType.DATE ||\n      this.cursorValueRelativeDate ||\n      !(\n        this.cursorToken.type === Token.Filter &&\n        isWithinToken(this.cursorToken.value, this.cursorPosition)\n      )\n    ) {\n      return false;\n    }\n\n    const textValue = this.cursorFilter?.value?.text ?? '';\n\n    if (\n      // Cursor is in a valid ISO date value\n      this.cursorValueIsoDate ||\n      // Cursor is in a value that has an operator\n      this.cursorFilter?.operator ||\n      // Cursor is in raw text value that matches one of the non-empty operators\n      (textValue && isOperator(textValue))\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  get shouldShowAutocomplete() {\n    return this.state.showDropdown && !this.shouldShowDatePicker;\n  }\n\n  /**\n   * Get the current cursor position within the input\n   */\n  get cursorPosition() {\n    if (!this.searchInput.current) {\n      return -1;\n    }\n\n    return this.searchInput.current.selectionStart ?? -1;\n  }\n\n  /**\n   * Get the search term at the current cursor position\n   */\n  get cursorSearchTerm() {\n    const cursorPosition = this.cursorPosition;\n    const cursorToken = this.cursorToken;\n\n    if (!cursorToken) {\n      return null;\n    }\n\n    const LIMITER_CHARS = [' ', ':'];\n\n    const innerStart = cursorPosition - cursorToken.location.start.offset;\n\n    let tokenStart = innerStart;\n    while (tokenStart > 0 && !LIMITER_CHARS.includes(cursorToken.text[tokenStart - 1])) {\n      tokenStart--;\n    }\n    let tokenEnd = innerStart;\n    while (\n      tokenEnd < cursorToken.text.length &&\n      !LIMITER_CHARS.includes(cursorToken.text[tokenEnd])\n    ) {\n      tokenEnd++;\n    }\n\n    let searchTerm = cursorToken.text.slice(tokenStart, tokenEnd);\n\n    if (searchTerm.startsWith(NEGATION_OPERATOR)) {\n      tokenStart++;\n    }\n    searchTerm = searchTerm.replace(new RegExp(`^${NEGATION_OPERATOR}`), '');\n\n    return {\n      end: cursorToken.location.start.offset + tokenEnd,\n      searchTerm,\n      start: cursorToken.location.start.offset + tokenStart,\n    };\n  }\n\n  get filterTokens(): TokenResult<Token.Filter>[] {\n    return (this.state.parsedQuery?.filter(tok => tok.type === Token.Filter) ??\n      []) as TokenResult<Token.Filter>[];\n  }\n\n  /**\n   * Finds tokens that exist at the current cursor position\n   * @param matchedTokens acceptable list of tokens\n   */\n  findTokensAtCursor<T extends readonly Token[]>(matchedTokens: T) {\n    const {parsedQuery} = this.state;\n\n    if (parsedQuery === null) {\n      return null;\n    }\n\n    const cursor = this.cursorPosition;\n\n    return treeResultLocator<TokenResult<T[number]> | null>({\n      tree: parsedQuery,\n      noResultValue: null,\n      visitorTest: ({token, returnResult, skipToken}) =>\n        !matchedTokens.includes(token.type)\n          ? null\n          : isWithinToken(token, cursor)\n          ? returnResult(token)\n          : skipToken,\n    });\n  }\n\n  /**\n   * Returns array of possible key values that substring match `query`\n   */\n  getTagKeys(searchTerm: string): [SearchItem[], ItemType] {\n    const {prepareQuery, supportedTagType} = this.props;\n\n    const supportedTags = this.props.supportedTags ?? {};\n\n    let tagKeys = Object.keys(supportedTags).sort((a, b) => a.localeCompare(b));\n\n    if (searchTerm) {\n      const preparedSearchTerm = prepareQuery ? prepareQuery(searchTerm) : searchTerm;\n\n      tagKeys = filterKeysFromQuery(tagKeys, preparedSearchTerm);\n    }\n\n    // If the environment feature is active and excludeEnvironment = true\n    // then remove the environment key\n    if (this.props.excludeEnvironment) {\n      tagKeys = tagKeys.filter(key => key !== 'environment');\n    }\n\n    const tagItems = getTagItemsFromKeys(tagKeys, supportedTags);\n\n    return [tagItems, supportedTagType ?? ItemType.TAG_KEY];\n  }\n\n  /**\n   * Returns array of tag values that substring match `query`; invokes `callback`\n   * with data when ready\n   */\n  getTagValues = debounce(\n    async (tag: Tag, query: string): Promise<SearchItem[]> => {\n      // Strip double quotes if there are any\n      query = query.replace(/\"/g, '').trim();\n\n      if (!this.props.onGetTagValues) {\n        return [];\n      }\n\n      if (\n        this.state.noValueQuery !== undefined &&\n        query.startsWith(this.state.noValueQuery)\n      ) {\n        return [];\n      }\n\n      const {location} = this.props;\n      const endpointParams = normalizeDateTimeParams(location.query);\n\n      this.setState({loading: true});\n      let values: string[] = [];\n\n      try {\n        values = await this.props.onGetTagValues(tag, query, endpointParams);\n        this.setState({loading: false});\n      } catch (err) {\n        this.setState({loading: false});\n        Sentry.captureException(err);\n        return [];\n      }\n\n      if (tag.key === 'release:' && !values.includes('latest')) {\n        values.unshift('latest');\n      }\n\n      const noValueQuery = values.length === 0 && query.length > 0 ? query : undefined;\n      this.setState({noValueQuery});\n\n      return values.map(value => {\n        const escapedValue = escapeValue(value);\n        return {\n          value: escapedValue,\n          desc: escapedValue,\n          type: ItemType.TAG_VALUE,\n        };\n      });\n    },\n    DEFAULT_DEBOUNCE_DURATION,\n    {leading: true}\n  );\n\n  /**\n   * Returns array of tag values that substring match `query`; invokes `callback`\n   * with results\n   */\n  getPredefinedTagValues = (tag: Tag, query: string): SearchItem[] =>\n    (tag.values ?? [])\n      .filter(value => value.indexOf(query) > -1)\n      .map((value, i) => {\n        const escapedValue = escapeValue(value);\n        return {\n          value: escapedValue,\n          desc: escapedValue,\n          type: ItemType.TAG_VALUE,\n          ignoreMaxSearchItems: tag.maxSuggestedValues\n            ? i < tag.maxSuggestedValues\n            : false,\n        };\n      });\n\n  /**\n   * Get recent searches\n   */\n  getRecentSearches = debounce(\n    async () => {\n      const {savedSearchType, hasRecentSearches, onGetRecentSearches} = this.props;\n\n      // `savedSearchType` can be 0\n      if (!defined(savedSearchType) || !hasRecentSearches) {\n        return [];\n      }\n\n      const fetchFn = onGetRecentSearches || this.fetchRecentSearches;\n      return await fetchFn(this.state.query);\n    },\n    DEFAULT_DEBOUNCE_DURATION,\n    {leading: true}\n  );\n\n  fetchRecentSearches = async (fullQuery: string): Promise<SearchItem[]> => {\n    const {api, organization, savedSearchType} = this.props;\n    if (savedSearchType === undefined) {\n      return [];\n    }\n\n    try {\n      const recentSearches: any[] = await fetchRecentSearches(\n        api,\n        organization.slug,\n        savedSearchType,\n        fullQuery\n      );\n\n      // If `recentSearches` is undefined or not an array, the function will\n      // return an array anyway\n      return recentSearches.map(searches => ({\n        desc: searches.query,\n        value: searches.query,\n        type: ItemType.RECENT_SEARCH,\n      }));\n    } catch (e) {\n      Sentry.captureException(e);\n    }\n\n    return [];\n  };\n\n  getReleases = debounce(\n    async (tag: Tag, query: string) => {\n      const releasePromise = this.fetchReleases(query);\n\n      const tags = this.getPredefinedTagValues(tag, query);\n      const tagValues = tags.map<SearchItem>(v => ({\n        ...v,\n        type: ItemType.FIRST_RELEASE,\n      }));\n\n      const releases = await releasePromise;\n      const releaseValues = releases.map<SearchItem>((r: any) => ({\n        value: r.shortVersion,\n        desc: r.shortVersion,\n        type: ItemType.FIRST_RELEASE,\n      }));\n\n      return [...tagValues, ...releaseValues];\n    },\n    DEFAULT_DEBOUNCE_DURATION,\n    {leading: true}\n  );\n\n  /**\n   * Fetches latest releases from a organization/project. Returns an empty array\n   * if an error is encountered.\n   */\n  fetchReleases = async (releaseVersion: string): Promise<any[]> => {\n    const {api, location, organization} = this.props;\n\n    const project = location && location.query ? location.query.projectId : undefined;\n\n    const url = `/organizations/${organization.slug}/releases/`;\n    const fetchQuery: {[key: string]: string | number} = {\n      per_page: MAX_AUTOCOMPLETE_RELEASES,\n    };\n\n    if (releaseVersion) {\n      fetchQuery.query = releaseVersion;\n    }\n\n    if (project) {\n      fetchQuery.project = project;\n    }\n\n    try {\n      return await api.requestPromise(url, {\n        method: 'GET',\n        query: fetchQuery,\n      });\n    } catch (e) {\n      addErrorMessage(t('Unable to fetch releases'));\n      Sentry.captureException(e);\n    }\n\n    return [];\n  };\n\n  async generateTagAutocompleteGroup(tagName: string): Promise<AutocompleteGroup> {\n    const [tagKeys, tagType] = this.getTagKeys(tagName);\n    const recentSearches = await this.getRecentSearches();\n\n    return {\n      searchItems: tagKeys,\n      recentSearchItems: recentSearches ?? [],\n      tagName,\n      type: tagType,\n    };\n  }\n\n  generateValueAutocompleteGroup = async (\n    tagName: string,\n    query: string\n  ): Promise<AutocompleteGroup | null> => {\n    const {\n      prepareQuery,\n      excludeEnvironment,\n      organization,\n      savedSearchType,\n      searchSource,\n    } = this.props;\n    const supportedTags = this.props.supportedTags ?? {};\n\n    const preparedQuery =\n      typeof prepareQuery === 'function' ? prepareQuery(query) : query;\n\n    // filter existing items immediately, until API can return\n    // with actual tag value results\n    const filteredSearchGroups = !preparedQuery\n      ? this.state.searchGroups\n      : this.state.searchGroups.filter(\n          item => item.value && item.value.indexOf(preparedQuery) !== -1\n        );\n\n    this.setState({\n      searchTerm: query,\n      searchGroups: filteredSearchGroups,\n    });\n\n    const tag = supportedTags[tagName];\n\n    if (!tag) {\n      trackAdvancedAnalyticsEvent('search.invalid_field', {\n        organization,\n        search_type: savedSearchType === 0 ? 'issues' : 'events',\n        search_source: searchSource,\n        attempted_field_name: tagName,\n      });\n\n      return {\n        searchItems: [\n          {\n            type: ItemType.INVALID_TAG,\n            desc: tagName,\n            callback: () =>\n              window.open(\n                'https://docs.sentry.io/product/sentry-basics/search/searchable-properties/'\n              ),\n          },\n        ],\n        recentSearchItems: [],\n        tagName,\n        type: ItemType.INVALID_TAG,\n      };\n    }\n\n    // Ignore the environment tag if the feature is active and\n    // excludeEnvironment = true\n    if (excludeEnvironment && tagName === 'environment') {\n      return null;\n    }\n\n    const fetchTagValuesFn =\n      tag.key === 'firstRelease'\n        ? this.getReleases\n        : tag.predefined\n        ? this.getPredefinedTagValues\n        : this.getTagValues;\n\n    const [tagValues, recentSearches] = await Promise.all([\n      fetchTagValuesFn(tag, preparedQuery),\n      this.getRecentSearches(),\n    ]);\n\n    return {\n      searchItems: tagValues ?? [],\n      recentSearchItems: recentSearches ?? [],\n      tagName: tag.key,\n      type: ItemType.TAG_VALUE,\n    };\n  };\n\n  showDefaultSearches = async () => {\n    const {query} = this.state;\n    const [defaultSearchItems, defaultRecentItems] = this.props.defaultSearchItems!;\n\n    // Always clear searchTerm on showing default state.\n    this.setState({searchTerm: ''});\n\n    if (!defaultSearchItems.length) {\n      // Update searchTerm, otherwise <SearchDropdown> will have wrong state\n      // (e.g. if you delete a query, the last letter will be highlighted if `searchTerm`\n      // does not get updated)\n\n      const [tagKeys, tagType] = this.getTagKeys('');\n      const recentSearches = await this.getRecentSearches();\n\n      if (this.state.query === query) {\n        this.updateAutoCompleteState(tagKeys, recentSearches ?? [], '', tagType);\n      }\n\n      return;\n    }\n\n    this.updateAutoCompleteState(\n      defaultSearchItems,\n      defaultRecentItems,\n      '',\n      ItemType.DEFAULT\n    );\n    return;\n  };\n\n  updateAutoCompleteFromAst = async () => {\n    const cursor = this.cursorPosition;\n    const cursorToken = this.cursorToken;\n\n    if (!cursorToken) {\n      this.showDefaultSearches();\n      return;\n    }\n\n    if (cursorToken.type === Token.Filter) {\n      const tagName = getKeyName(cursorToken.key, {aggregateWithArgs: true});\n      // check if we are on the tag, value, or operator\n      if (isWithinToken(cursorToken.value, cursor)) {\n        const node = cursorToken.value;\n        const cursorValue = this.cursorValue;\n        let searchText = cursorValue?.text ?? node.text;\n        if (searchText === '[]' || cursorValue === null) {\n          searchText = '';\n        }\n\n        const fieldDefinition = getFieldDefinition(tagName);\n        const isDate = fieldDefinition?.valueType === FieldValueType.DATE;\n\n        if (isDate) {\n          const groups = getDateTagAutocompleteGroups(tagName);\n\n          this.updateAutoCompleteStateMultiHeader(groups);\n\n          return;\n        }\n\n        const valueGroup = await this.generateValueAutocompleteGroup(tagName, searchText);\n        const autocompleteGroups = valueGroup ? [valueGroup] : [];\n        // show operator group if at beginning of value\n        if (cursor === node.location.start.offset) {\n          const opGroup = generateOpAutocompleteGroup(getValidOps(cursorToken), tagName);\n          if (valueGroup?.type !== ItemType.INVALID_TAG && !isDate) {\n            autocompleteGroups.unshift(opGroup);\n          }\n        }\n\n        if (cursor === this.cursorPosition) {\n          this.updateAutoCompleteStateMultiHeader(autocompleteGroups);\n        }\n\n        return;\n      }\n\n      if (isWithinToken(cursorToken.key, cursor)) {\n        const node = cursorToken.key;\n        const autocompleteGroups = [await this.generateTagAutocompleteGroup(tagName)];\n        // show operator group if at end of key\n        if (cursor === node.location.end.offset) {\n          const opGroup = generateOpAutocompleteGroup(getValidOps(cursorToken), tagName);\n          autocompleteGroups.unshift(opGroup);\n        }\n\n        if (cursor === this.cursorPosition) {\n          this.setState({\n            searchTerm: tagName,\n          });\n          this.updateAutoCompleteStateMultiHeader(autocompleteGroups);\n        }\n        return;\n      }\n\n      // show operator autocomplete group\n      const opGroup = generateOpAutocompleteGroup(getValidOps(cursorToken), tagName);\n      this.updateAutoCompleteStateMultiHeader([opGroup]);\n      return;\n    }\n\n    const cursorSearchTerm = this.cursorSearchTerm;\n    if (cursorToken.type === Token.FreeText && cursorSearchTerm) {\n      const autocompleteGroups = [\n        await this.generateTagAutocompleteGroup(cursorSearchTerm.searchTerm),\n      ];\n\n      if (cursor === this.cursorPosition) {\n        this.setState({\n          searchTerm: cursorSearchTerm.searchTerm,\n        });\n        this.updateAutoCompleteStateMultiHeader(autocompleteGroups);\n      }\n      return;\n    }\n  };\n\n  updateAutoCompleteItems = () => {\n    this.updateAutoCompleteFromAst();\n  };\n\n  /**\n   * Updates autocomplete dropdown items and autocomplete index state\n   *\n   * @param searchItems List of search item objects with keys: title, desc, value\n   * @param recentSearchItems List of recent search items, same format as searchItem\n   * @param tagName The current tag name in scope\n   * @param type Defines the type/state of the dropdown menu items\n   */\n  updateAutoCompleteState(\n    searchItems: SearchItem[],\n    recentSearchItems: SearchItem[],\n    tagName: string,\n    type: ItemType\n  ) {\n    const {hasRecentSearches, maxSearchItems, maxQueryLength} = this.props;\n    const {query} = this.state;\n\n    const queryCharsLeft =\n      maxQueryLength && query ? maxQueryLength - query.length : undefined;\n\n    const searchGroups = createSearchGroups(\n      searchItems,\n      hasRecentSearches ? recentSearchItems : undefined,\n      tagName,\n      type,\n      maxSearchItems,\n      queryCharsLeft,\n      true\n    );\n\n    this.setState(searchGroups);\n  }\n\n  /**\n   * Updates autocomplete dropdown items and autocomplete index state\n   *\n   * @param groups Groups that will be used to populate the autocomplete dropdown\n   */\n  updateAutoCompleteStateMultiHeader = (groups: AutocompleteGroup[]) => {\n    const {hasRecentSearches, maxSearchItems, maxQueryLength} = this.props;\n    const {query} = this.state;\n    const queryCharsLeft =\n      maxQueryLength && query ? maxQueryLength - query.length : undefined;\n\n    const searchGroups = groups\n      .map(({searchItems, recentSearchItems, tagName, type}) =>\n        createSearchGroups(\n          searchItems,\n          hasRecentSearches ? recentSearchItems : undefined,\n          tagName,\n          type,\n          maxSearchItems,\n          queryCharsLeft,\n          false\n        )\n      )\n      .reduce(\n        (acc, item) => ({\n          searchGroups: [...acc.searchGroups, ...item.searchGroups],\n          flatSearchItems: [...acc.flatSearchItems, ...item.flatSearchItems],\n          activeSearchItem: -1,\n        }),\n        {\n          searchGroups: [] as SearchGroup[],\n          flatSearchItems: [] as SearchItem[],\n          activeSearchItem: -1,\n        }\n      );\n\n    this.setState(searchGroups);\n  };\n\n  updateQuery = (newQuery: string, cursorPosition?: number) =>\n    this.setState(makeQueryState(newQuery), () => {\n      // setting a new input value will lose focus; restore it\n      if (this.searchInput.current) {\n        this.searchInput.current.focus();\n        if (cursorPosition) {\n          this.searchInput.current.selectionStart = cursorPosition;\n          this.searchInput.current.selectionEnd = cursorPosition;\n        }\n      }\n      // then update the autocomplete box with new items\n      this.updateAutoCompleteItems();\n      this.props.onChange?.(newQuery, new MouseEvent('click') as any);\n    });\n\n  onAutoCompleteFromAst = (replaceText: string, item: SearchItem) => {\n    const cursor = this.cursorPosition;\n    const {query} = this.state;\n\n    const cursorToken = this.cursorToken;\n\n    if (!cursorToken) {\n      this.updateQuery(`${query}${replaceText}`);\n      return;\n    }\n\n    // the start and end of what to replace\n    let clauseStart: null | number = null;\n    let clauseEnd: null | number = null;\n    // the new text that will exist between clauseStart and clauseEnd\n    let replaceToken = replaceText;\n    if (cursorToken.type === Token.Filter) {\n      if (item.type === ItemType.TAG_OPERATOR) {\n        trackAdvancedAnalyticsEvent('search.operator_autocompleted', {\n          organization: this.props.organization,\n          query: removeSpace(query),\n          search_operator: replaceText,\n          search_type: this.props.savedSearchType === 0 ? 'issues' : 'events',\n        });\n        const valueLocation = cursorToken.value.location;\n        clauseStart = cursorToken.location.start.offset;\n        clauseEnd = valueLocation.start.offset;\n        if (replaceText === '!:') {\n          replaceToken = `!${cursorToken.key.text}:`;\n        } else {\n          replaceToken = `${cursorToken.key.text}${replaceText}`;\n        }\n      } else if (isWithinToken(cursorToken.value, cursor)) {\n        const valueToken = this.cursorValue ?? cursorToken.value;\n        const location = valueToken.location;\n\n        if (cursorToken.filter === FilterType.TextIn) {\n          // Current value can be null when adding a 2nd value\n          //              cursor\n          // key:[value1, ]\n          const currentValueNull = this.cursorValue === null;\n          clauseStart = currentValueNull\n            ? this.cursorPosition\n            : valueToken.location.start.offset;\n          clauseEnd = currentValueNull\n            ? this.cursorPosition\n            : valueToken.location.end.offset;\n        } else {\n          const keyLocation = cursorToken.key.location;\n          clauseStart = keyLocation.end.offset + 1;\n          clauseEnd = location.end.offset + 1;\n          // The user tag often contains : within its value and we need to quote it.\n          if (getKeyName(cursorToken.key) === 'user') {\n            replaceToken = `\"${replaceText.trim()}\"`;\n          }\n          // handle using autocomplete with key:[]\n          if (valueToken.text === '[]') {\n            clauseStart += 1;\n            clauseEnd -= 2;\n            // For ISO date values, we want to keep the cursor within the token\n          } else if (item.type !== ItemType.TAG_VALUE_ISO_DATE) {\n            replaceToken += ' ';\n          }\n        }\n      } else if (isWithinToken(cursorToken.key, cursor)) {\n        const location = cursorToken.key.location;\n        clauseStart = location.start.offset;\n        // If the token is a key, then trim off the end to avoid duplicate ':'\n        clauseEnd = location.end.offset + 1;\n      }\n    }\n\n    const cursorSearchTerm = this.cursorSearchTerm;\n    if (cursorToken.type === Token.FreeText && cursorSearchTerm) {\n      clauseStart = cursorSearchTerm.start;\n      clauseEnd = cursorSearchTerm.end;\n    }\n\n    if (clauseStart !== null && clauseEnd !== null) {\n      const beforeClause = query.substring(0, clauseStart);\n      const endClause = query.substring(clauseEnd);\n      // Adds a space between the replaceToken and endClause when necessary\n      const replaceTokenEndClauseJoiner =\n        !endClause ||\n        endClause.startsWith(' ') ||\n        replaceToken.endsWith(' ') ||\n        replaceToken.endsWith(':')\n          ? ''\n          : ' ';\n      const newQuery = `${beforeClause}${replaceToken}${replaceTokenEndClauseJoiner}${endClause}`;\n      this.updateQuery(newQuery, beforeClause.length + replaceToken.length);\n    }\n  };\n\n  onAutoComplete = (replaceText: string, item: SearchItem) => {\n    if (item.type === ItemType.RECENT_SEARCH) {\n      trackAdvancedAnalyticsEvent('search.searched', {\n        organization: this.props.organization,\n        query: replaceText,\n        search_type: this.props.savedSearchType === 0 ? 'issues' : 'events',\n        search_source: 'recent_search',\n      });\n\n      this.setState(makeQueryState(replaceText), () => {\n        // Propagate onSearch and save to recent searches\n        this.doSearch();\n      });\n\n      return;\n    }\n\n    this.onAutoCompleteFromAst(replaceText, item);\n  };\n\n  onAutoCompleteIsoDate = (isoDate: string) => {\n    const dateItem = {type: ItemType.TAG_VALUE_ISO_DATE};\n\n    if (\n      this.cursorFilter?.filter === FilterType.Date ||\n      this.cursorFilter?.filter === FilterType.SpecificDate\n    ) {\n      this.onAutoCompleteFromAst(`${this.cursorFilter.operator}${isoDate}`, dateItem);\n    } else if (this.cursorFilter?.filter === FilterType.Text) {\n      const valueText = this.cursorFilter.value.text;\n\n      if (valueText && isOperator(valueText)) {\n        this.onAutoCompleteFromAst(`${valueText}${isoDate}`, dateItem);\n      }\n    }\n  };\n\n  get showSearchDropdown(): boolean {\n    return this.state.loading || this.state.searchGroups.length > 0;\n  }\n\n  render() {\n    const {\n      api,\n      className,\n      savedSearchType,\n      dropdownClassName,\n      actionBarItems,\n      organization,\n      placeholder,\n      disabled,\n      useFormWrapper,\n      inlineLabel,\n      maxQueryLength,\n      maxMenuHeight,\n    } = this.props;\n\n    const {\n      query,\n      parsedQuery,\n      searchGroups,\n      searchTerm,\n      inputHasFocus,\n      numActionsVisible,\n      loading,\n    } = this.state;\n\n    const input = (\n      <SearchInput\n        type=\"text\"\n        placeholder={placeholder}\n        id=\"smart-search-input\"\n        data-test-id=\"smart-search-input\"\n        name=\"query\"\n        ref={this.searchInput}\n        autoComplete=\"off\"\n        value={query}\n        onFocus={this.onQueryFocus}\n        onBlur={this.onQueryBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}\n        onChange={this.onQueryChange}\n        onClick={this.onInputClick}\n        onPaste={this.onPaste}\n        disabled={disabled}\n        maxLength={maxQueryLength}\n        spellCheck={false}\n      />\n    );\n\n    // Segment actions into visible and overflowed groups\n    const actionItems = actionBarItems ?? [];\n    const actionProps = {\n      api,\n      organization,\n      query,\n      savedSearchType,\n    };\n\n    const visibleActions = actionItems\n      .slice(0, numActionsVisible)\n      .map(({key, Action}) => <Action key={key} {...actionProps} />);\n\n    const overflowedActions = actionItems\n      .slice(numActionsVisible)\n      .map(({key, Action}) => <Action key={key} {...actionProps} menuItemVariant />);\n\n    const cursor = this.cursorPosition;\n\n    const visibleShortcuts = shortcuts.filter(\n      shortcut =>\n        shortcut.hotkeys &&\n        shortcut.canRunShortcut(this.cursorToken, this.filterTokens.length)\n    );\n\n    return (\n      <Container\n        ref={this.containerRef}\n        className={className}\n        inputHasFocus={inputHasFocus}\n        data-test-id=\"smart-search-bar\"\n      >\n        <SearchHotkeysListener\n          visibleShortcuts={visibleShortcuts}\n          runShortcut={this.runShortcutOnHotkeyPress}\n        />\n        <SearchLabel htmlFor=\"smart-search-input\" aria-label={t('Search events')}>\n          <IconSearch />\n          {inlineLabel}\n        </SearchLabel>\n\n        <InputWrapper>\n          <Highlight>\n            {parsedQuery !== null ? (\n              <HighlightQuery\n                parsedQuery={parsedQuery}\n                cursorPosition={this.state.showDropdown ? cursor : -1}\n              />\n            ) : (\n              query\n            )}\n          </Highlight>\n          {useFormWrapper ? <form onSubmit={this.onSubmit}>{input}</form> : input}\n        </InputWrapper>\n\n        <ActionsBar gap={0.5}>\n          {query !== '' && (\n            <ActionButton\n              onClick={this.clearSearch}\n              icon={<IconClose size=\"xs\" />}\n              title={t('Clear search')}\n              aria-label={t('Clear search')}\n            />\n          )}\n          {visibleActions}\n          {overflowedActions.length > 0 && (\n            <DropdownLink\n              anchorRight\n              caret={false}\n              title={\n                <ActionButton\n                  aria-label={t('Show more')}\n                  icon={<VerticalEllipsisIcon size=\"xs\" />}\n                />\n              }\n            >\n              {overflowedActions}\n            </DropdownLink>\n          )}\n        </ActionsBar>\n\n        {this.shouldShowDatePicker && (\n          <SearchBarDatePicker\n            date={this.cursorValueIsoDate?.value}\n            dateString={this.cursorValueIsoDate?.text}\n            handleSelectDateTime={value => {\n              this.onAutoCompleteIsoDate(value);\n            }}\n          />\n        )}\n\n        {this.shouldShowAutocomplete && (\n          <SearchDropdown\n            className={dropdownClassName}\n            items={searchGroups}\n            onClick={this.onAutoComplete}\n            loading={loading}\n            searchSubstring={searchTerm}\n            runShortcut={this.runShortcutOnClick}\n            visibleShortcuts={visibleShortcuts}\n            maxMenuHeight={maxMenuHeight}\n          />\n        )}\n      </Container>\n    );\n  }\n}\n\ntype ContainerState = {\n  members: ReturnType<typeof MemberListStore.getAll>;\n};\n\nclass SmartSearchBarContainer extends Component<Props, ContainerState> {\n  state: ContainerState = {\n    members: MemberListStore.getAll(),\n  };\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  unsubscribe = MemberListStore.listen(\n    (members: ContainerState['members']) => this.setState({members}),\n    undefined\n  );\n\n  render() {\n    // SmartSearchBar doesn't use members, but we forward it to cause a re-render.\n    return <SmartSearchBar {...this.props} members={this.state.members} />;\n  }\n}\n\nexport default withApi(withRouter(withOrganization(SmartSearchBarContainer)));\n\nexport {SmartSearchBar, Props as SmartSearchBarProps};\n\nconst Container = styled('div')<{inputHasFocus: boolean}>`\n  border: 1px solid ${p => p.theme.border};\n  box-shadow: inset ${p => p.theme.dropShadowLight};\n  background: ${p => p.theme.background};\n  padding: 7px ${space(1)};\n  position: relative;\n  display: grid;\n  grid-template-columns: max-content 1fr max-content;\n  gap: ${space(1)};\n  align-items: start;\n\n  border-radius: ${p => p.theme.borderRadius};\n\n  .show-sidebar & {\n    background: ${p => p.theme.backgroundSecondary};\n  }\n\n  ${p =>\n    p.inputHasFocus &&\n    `\n    border-color: ${p.theme.focusBorder};\n    box-shadow: 0 0 0 1px ${p.theme.focusBorder};\n  `}\n`;\n\nconst SearchLabel = styled('label')`\n  display: flex;\n  padding: ${space(0.5)} 0;\n  margin: 0;\n  color: ${p => p.theme.gray300};\n`;\n\nconst InputWrapper = styled('div')`\n  position: relative;\n`;\n\nconst Highlight = styled('div')`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  user-select: none;\n  white-space: pre-wrap;\n  word-break: break-word;\n  line-height: 25px;\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-family: ${p => p.theme.text.familyMono};\n`;\n\nconst SearchInput = styled(\n  getDynamicComponent<typeof TextareaAutosize>({\n    value: TextareaAutosize,\n    fixed: 'textarea',\n  }),\n  {\n    shouldForwardProp: prop => typeof prop === 'string' && isPropValid(prop),\n  }\n)`\n  position: relative;\n  display: flex;\n  resize: none;\n  outline: none;\n  border: 0;\n  width: 100%;\n  padding: 0;\n  line-height: 25px;\n  margin-bottom: -1px;\n  background: transparent;\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-family: ${p => p.theme.text.familyMono};\n  caret-color: ${p => p.theme.subText};\n  color: transparent;\n\n  &::selection {\n    background: rgba(0, 0, 0, 0.2);\n  }\n  &::placeholder {\n    color: ${p => p.theme.formPlaceholder};\n  }\n\n  [disabled] {\n    color: ${p => p.theme.disabled};\n  }\n`;\n\nconst ActionsBar = styled(ButtonBar)`\n  height: ${space(2)};\n  margin: ${space(0.5)} 0;\n`;\n\nconst VerticalEllipsisIcon = styled(IconEllipsis)`\n  transform: rotate(90deg);\n`;\n","import {useEffect, useRef, useState} from 'react';\nimport styled from '@emotion/styled';\nimport format from 'date-fns/format';\nimport type {Moment} from 'moment';\n\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {DEFAULT_DAY_START_TIME, setDateToTime} from 'sentry/utils/dates';\n\nimport {DatePicker} from '../calendar';\nimport Checkbox from '../checkbox';\n\nimport SearchBarFlyout from './searchBarFlyout';\n\ntype SearchBarDatePickerProps = {\n  handleSelectDateTime: (value: string) => void;\n  date?: Moment;\n  dateString?: string;\n};\n\ntype TimeInputProps = {\n  setTime: (newTime: string) => void;\n  time: string;\n};\n\nconst TZ_OFFSET_REGEX = /[+-]\\d\\d:\\d\\d$/;\nconst TIME_REGEX = /T\\d\\d:\\d\\d:\\d\\d/;\n\nconst ISO_FORMAT = \"yyyy-MM-dd'T'HH:mm:ss\";\nconst ISO_FORMAT_WITH_TIMEZONE = ISO_FORMAT + 'xxx';\n\nconst isUtcIsoDate = (isoDateTime?: string) => {\n  if (!isoDateTime) {\n    return false;\n  }\n\n  return !TZ_OFFSET_REGEX.test(isoDateTime);\n};\n\nconst applyChanges = ({\n  date = new Date(),\n  timeString = DEFAULT_DAY_START_TIME,\n  handleSelectDateTime,\n  utc = false,\n}: {\n  handleSelectDateTime: (isoDateString: string) => void;\n  date?: Date;\n  timeString?: string;\n  utc?: boolean;\n}) => {\n  const newDate = setDateToTime(date, timeString, {local: true});\n\n  handleSelectDateTime(format(newDate, utc ? ISO_FORMAT : ISO_FORMAT_WITH_TIMEZONE));\n};\n\nconst parseIncomingDateString = (incomingDateString?: string) => {\n  if (!incomingDateString) {\n    return undefined;\n  }\n\n  // For consistent date parsing, remove timezone from the incoming date string\n  const strippedTimeZone = incomingDateString\n    .replace(TZ_OFFSET_REGEX, '')\n    .replace(/Z$/, '');\n\n  if (TIME_REGEX.test(incomingDateString)) {\n    return new Date(strippedTimeZone);\n  }\n\n  return new Date(strippedTimeZone + 'T00:00:00');\n};\n\nconst SearchBarDatePicker = ({\n  dateString,\n  handleSelectDateTime,\n}: SearchBarDatePickerProps) => {\n  const incomingDate = parseIncomingDateString(dateString);\n\n  const time = incomingDate ? format(incomingDate, 'HH:mm:ss') : DEFAULT_DAY_START_TIME;\n\n  const utc = isUtcIsoDate(dateString);\n\n  return (\n    <SearchBarFlyout\n      onMouseDown={e => e.stopPropagation()}\n      data-test-id=\"search-bar-date-picker\"\n    >\n      <DatePicker\n        date={incomingDate}\n        onChange={newDate => {\n          if (newDate instanceof Date) {\n            applyChanges({\n              date: newDate,\n              timeString: time,\n              utc,\n              handleSelectDateTime,\n            });\n          }\n        }}\n      />\n      <DatePickerFooter>\n        <TimeInput\n          time={time}\n          setTime={newTime => {\n            applyChanges({\n              date: incomingDate,\n              timeString: newTime,\n              utc,\n              handleSelectDateTime,\n            });\n          }}\n        />\n        <UtcPickerLabel>\n          {t('Use UTC')}\n          <Checkbox\n            onChange={e => {\n              applyChanges({\n                date: incomingDate,\n                timeString: time,\n                utc: e.target.checked,\n                handleSelectDateTime,\n              });\n            }}\n            checked={utc}\n          />\n        </UtcPickerLabel>\n      </DatePickerFooter>\n    </SearchBarFlyout>\n  );\n};\n\n/**\n * This component keeps track of its own state because updates bring focus\n * back to the search bar. We make sure to keep focus within the input\n * until the user is done making changes.\n */\nconst TimeInput = ({time, setTime}: TimeInputProps) => {\n  const [localTime, setLocalTime] = useState(time);\n  const [isFocused, setIsFocused] = useState(false);\n  const timeInputRef = useRef<HTMLInputElement | null>(null);\n\n  useEffect(() => {\n    setLocalTime(time);\n  }, [time]);\n\n  return (\n    <Input\n      ref={timeInputRef}\n      aria-label=\"Time\"\n      type=\"time\"\n      data-test-id=\"search-bar-date-picker-time-input\"\n      onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n        const newStartTime = e.target.value || DEFAULT_DAY_START_TIME;\n        setLocalTime(newStartTime);\n\n        if (!isFocused) {\n          setTime(newStartTime);\n        }\n      }}\n      onBlur={() => {\n        setIsFocused(false);\n        setTime(localTime);\n      }}\n      onFocus={() => setIsFocused(true)}\n      onKeyDown={e => {\n        if (e.key === 'Enter') {\n          timeInputRef.current?.blur();\n        }\n      }}\n      onClick={e => {\n        e.stopPropagation();\n      }}\n      value={localTime}\n      step={1}\n    />\n  );\n};\n\nconst Input = styled('input')`\n  border-radius: 4px;\n  padding: 0 ${space(1)};\n  background: ${p => p.theme.backgroundSecondary};\n  border: 1px solid ${p => p.theme.border};\n  color: ${p => p.theme.gray300};\n  box-shadow: none;\n`;\n\nconst DatePickerFooter = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: ${space(1)} ${space(3)} ${space(3)} ${space(3)};\n`;\n\nconst UtcPickerLabel = styled('label')`\n  color: ${p => p.theme.gray300};\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin: 0;\n  font-weight: normal;\n  user-select: none;\n  cursor: pointer;\n\n  input {\n    margin: 0 0 0 0.5em;\n    cursor: pointer;\n  }\n`;\n\nexport default SearchBarDatePicker;\n","import styled from '@emotion/styled';\n\nimport space from 'sentry/styles/space';\n\ntype SearchBarFlyoutProps = {\n  fullWidth?: boolean;\n};\n\nconst SearchBarFlyout = styled('div')<SearchBarFlyoutProps>`\n  /* Container has a border that we need to account for */\n  position: absolute;\n  top: 100%;\n  left: -1px;\n  ${p => (p.fullWidth ? 'right: -1px' : '')};\n  z-index: ${p => p.theme.zIndex.dropdown};\n  overflow: hidden;\n  margin-top: ${space(1)};\n  background: ${p => p.theme.background};\n  box-shadow: ${p => p.theme.dropShadowHeavy};\n  border: 1px solid ${p => p.theme.border};\n  border-radius: ${p => p.theme.borderRadius};\n`;\n\nexport default SearchBarFlyout;\n","import {Fragment, PureComponent} from 'react';\nimport styled from '@emotion/styled';\nimport color from 'color';\n\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {parseSearch} from 'sentry/components/searchSyntax/parser';\nimport HighlightQuery from 'sentry/components/searchSyntax/renderer';\nimport {IconOpen} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {FieldKind} from 'sentry/utils/fields';\n\nimport Button from '../button';\nimport HotkeysLabel from '../hotkeysLabel';\nimport Tag from '../tag';\n\nimport SearchBarFlyout from './searchBarFlyout';\nimport {ItemType, SearchGroup, SearchItem, Shortcut} from './types';\n\nconst getDropdownItemKey = (item: SearchItem) =>\n  `${item.value || item.desc || item.title}-${\n    item.children && item.children.length > 0 ? getDropdownItemKey(item.children[0]) : ''\n  }`;\n\ntype Props = {\n  items: SearchGroup[];\n  loading: boolean;\n  onClick: (value: string, item: SearchItem) => void;\n  searchSubstring: string;\n  className?: string;\n  maxMenuHeight?: number;\n  onIconClick?: (value: string) => void;\n  runShortcut?: (shortcut: Shortcut) => void;\n  visibleShortcuts?: Shortcut[];\n};\n\nclass SearchDropdown extends PureComponent<Props> {\n  static defaultProps = {\n    searchSubstring: '',\n    onClick: function () {},\n  };\n\n  render() {\n    const {\n      className,\n      loading,\n      items,\n      runShortcut,\n      visibleShortcuts,\n      maxMenuHeight,\n      searchSubstring,\n      onClick,\n      onIconClick,\n    } = this.props;\n\n    return (\n      <SearchBarFlyout className={className} fullWidth>\n        {loading ? (\n          <LoadingWrapper key=\"loading\" data-test-id=\"search-autocomplete-loading\">\n            <LoadingIndicator mini />\n          </LoadingWrapper>\n        ) : (\n          <SearchItemsList maxMenuHeight={maxMenuHeight}>\n            {items.map(item => {\n              const isEmpty = item.children && !item.children.length;\n\n              // Hide header if `item.children` is defined, an array, and is empty\n              return (\n                <Fragment key={item.title}>\n                  {item.type === 'header' && <HeaderItem group={item} />}\n                  {item.children &&\n                    item.children.map(child => (\n                      <DropdownItem\n                        key={getDropdownItemKey(child)}\n                        item={child}\n                        searchSubstring={searchSubstring}\n                        onClick={onClick}\n                        onIconClick={onIconClick}\n                      />\n                    ))}\n                  {isEmpty && <Info>{t('No items found')}</Info>}\n                </Fragment>\n              );\n            })}\n          </SearchItemsList>\n        )}\n\n        <DropdownFooter>\n          <ShortcutsRow>\n            {runShortcut &&\n              visibleShortcuts?.map(shortcut => {\n                return (\n                  <ShortcutButtonContainer\n                    key={shortcut.text}\n                    onClick={() => runShortcut(shortcut)}\n                  >\n                    <HotkeyGlyphWrapper>\n                      <HotkeysLabel\n                        value={\n                          shortcut.hotkeys?.display ?? shortcut.hotkeys?.actual ?? []\n                        }\n                      />\n                    </HotkeyGlyphWrapper>\n                    <IconWrapper>{shortcut.icon}</IconWrapper>\n                    <HotkeyTitle>{shortcut.text}</HotkeyTitle>\n                  </ShortcutButtonContainer>\n                );\n              })}\n          </ShortcutsRow>\n          <Button size=\"xs\" href=\"https://docs.sentry.io/product/sentry-basics/search/\">\n            Read the docs\n          </Button>\n        </DropdownFooter>\n      </SearchBarFlyout>\n    );\n  }\n}\n\nexport default SearchDropdown;\n\ntype HeaderItemProps = {\n  group: SearchGroup;\n};\n\nconst HeaderItem = ({group}: HeaderItemProps) => {\n  return (\n    <SearchDropdownGroup key={group.title}>\n      <SearchDropdownGroupTitle>\n        {group.icon}\n        {group.title && group.title}\n        {group.desc && <span>{group.desc}</span>}\n      </SearchDropdownGroupTitle>\n    </SearchDropdownGroup>\n  );\n};\n\ntype HighlightedRestOfWordsProps = {\n  combinedRestWords: string;\n  firstWord: string;\n  searchSubstring: string;\n  hasSplit?: boolean;\n  isFirstWordHidden?: boolean;\n};\n\nconst HighlightedRestOfWords = ({\n  combinedRestWords,\n  searchSubstring,\n  firstWord,\n  isFirstWordHidden,\n  hasSplit,\n}: HighlightedRestOfWordsProps) => {\n  const remainingSubstr =\n    searchSubstring.indexOf(firstWord) === -1\n      ? searchSubstring\n      : searchSubstring.slice(firstWord.length + 1);\n  const descIdx = combinedRestWords.indexOf(remainingSubstr);\n\n  if (descIdx > -1) {\n    return (\n      <RestOfWordsContainer isFirstWordHidden={isFirstWordHidden} hasSplit={hasSplit}>\n        .{combinedRestWords.slice(0, descIdx)}\n        <strong>\n          {combinedRestWords.slice(descIdx, descIdx + remainingSubstr.length)}\n        </strong>\n        {combinedRestWords.slice(descIdx + remainingSubstr.length)}\n      </RestOfWordsContainer>\n    );\n  }\n  return (\n    <RestOfWordsContainer isFirstWordHidden={isFirstWordHidden} hasSplit={hasSplit}>\n      .{combinedRestWords}\n    </RestOfWordsContainer>\n  );\n};\n\ntype ItemTitleProps = {\n  item: SearchItem;\n  searchSubstring: string;\n\n  isChild?: boolean;\n};\n\nconst ItemTitle = ({item, searchSubstring, isChild}: ItemTitleProps) => {\n  if (!item.title) {\n    return null;\n  }\n\n  const fullWord = item.title;\n\n  const words = item.kind !== FieldKind.FUNCTION ? fullWord.split('.') : [fullWord];\n  const [firstWord, ...restWords] = words;\n  const isFirstWordHidden = isChild;\n\n  const combinedRestWords = restWords.length > 0 ? restWords.join('.') : null;\n\n  const hasSingleField = item.type === ItemType.LINK;\n\n  if (searchSubstring) {\n    const idx =\n      restWords.length === 0\n        ? fullWord.toLowerCase().indexOf(searchSubstring.split('.')[0])\n        : fullWord.toLowerCase().indexOf(searchSubstring);\n\n    // Below is the logic to make the current query bold inside the result.\n    if (idx !== -1) {\n      return (\n        <SearchItemTitleWrapper hasSingleField={hasSingleField}>\n          {!isFirstWordHidden && (\n            <FirstWordWrapper>\n              {firstWord.slice(0, idx)}\n              <strong>{firstWord.slice(idx, idx + searchSubstring.length)}</strong>\n              {firstWord.slice(idx + searchSubstring.length)}\n            </FirstWordWrapper>\n          )}\n          {combinedRestWords && (\n            <HighlightedRestOfWords\n              firstWord={firstWord}\n              isFirstWordHidden={isFirstWordHidden}\n              searchSubstring={searchSubstring}\n              combinedRestWords={combinedRestWords}\n              hasSplit={words.length > 1}\n            />\n          )}\n        </SearchItemTitleWrapper>\n      );\n    }\n  }\n\n  return (\n    <SearchItemTitleWrapper>\n      {!isFirstWordHidden && <FirstWordWrapper>{firstWord}</FirstWordWrapper>}\n      {combinedRestWords && (\n        <RestOfWordsContainer\n          isFirstWordHidden={isFirstWordHidden}\n          hasSplit={words.length > 1}\n        >\n          .{combinedRestWords}\n        </RestOfWordsContainer>\n      )}\n    </SearchItemTitleWrapper>\n  );\n};\n\ntype KindTagProps = {kind: FieldKind; deprecated?: boolean};\n\nconst KindTag = ({kind, deprecated}: KindTagProps) => {\n  let text, tagType;\n  switch (kind) {\n    case FieldKind.FUNCTION:\n      text = 'f(x)';\n      tagType = 'success';\n      break;\n    case FieldKind.MEASUREMENT:\n      text = 'field';\n      tagType = 'highlight';\n      break;\n    case FieldKind.BREAKDOWN:\n      text = 'field';\n      tagType = 'highlight';\n      break;\n    case FieldKind.TAG:\n      text = kind;\n      tagType = 'warning';\n      break;\n    case FieldKind.NUMERIC_METRICS:\n      text = 'f(x)';\n      tagType = 'success';\n      break;\n    case FieldKind.FIELD:\n    default:\n      text = kind;\n  }\n\n  if (deprecated) {\n    text = 'deprecated';\n    tagType = 'error';\n  }\n\n  return <Tag type={tagType}>{text}</Tag>;\n};\n\ntype DropdownItemProps = {\n  item: SearchItem;\n  onClick: (value: string, item: SearchItem) => void;\n  searchSubstring: string;\n  isChild?: boolean;\n  onIconClick?: any;\n};\n\nconst DropdownItem = ({\n  item,\n  isChild,\n  searchSubstring,\n  onClick,\n  onIconClick,\n}: DropdownItemProps) => {\n  const isDisabled = item.value === null;\n\n  let children: React.ReactNode;\n  if (item.type === ItemType.RECENT_SEARCH) {\n    children = <QueryItem item={item} />;\n  } else if (item.type === ItemType.INVALID_TAG) {\n    children = (\n      <Invalid>\n        {tct(\"The field [field] isn't supported here. \", {\n          field: <strong>{item.desc}</strong>,\n        })}\n        {tct('[highlight:See all searchable properties in the docs.]', {\n          highlight: <Highlight />,\n        })}\n      </Invalid>\n    );\n  } else if (item.type === ItemType.LINK) {\n    children = (\n      <Fragment>\n        <ItemTitle item={item} isChild={isChild} searchSubstring={searchSubstring} />\n        {onIconClick && (\n          <IconOpen\n            onClick={e => {\n              // stop propagation so the item-level onClick doesn't get called\n              e.stopPropagation();\n              onIconClick(item.value);\n            }}\n          />\n        )}\n      </Fragment>\n    );\n  } else {\n    children = (\n      <Fragment>\n        <ItemTitle item={item} isChild={isChild} searchSubstring={searchSubstring} />\n        {item.desc && <Value hasDocs={!!item.documentation}>{item.desc}</Value>}\n        <DropdownDocumentation\n          documentation={item.documentation}\n          searchSubstring={searchSubstring}\n        />\n        <TagWrapper>\n          {item.kind && !isChild && (\n            <KindTag kind={item.kind} deprecated={item.deprecated} />\n          )}\n        </TagWrapper>\n      </Fragment>\n    );\n  }\n\n  return (\n    <Fragment>\n      <SearchListItem\n        className={`${isChild ? 'group-child' : ''} ${item.active ? 'active' : ''}`}\n        data-test-id=\"search-autocomplete-item\"\n        onClick={\n          !isDisabled ? item.callback ?? onClick.bind(this, item.value, item) : undefined\n        }\n        ref={element => item.active && element?.scrollIntoView?.({block: 'nearest'})}\n        isGrouped={isChild}\n        isDisabled={isDisabled}\n      >\n        {children}\n      </SearchListItem>\n      {!isChild &&\n        item.children?.map(child => (\n          <DropdownItem\n            key={getDropdownItemKey(child)}\n            item={child}\n            onClick={onClick}\n            searchSubstring={searchSubstring}\n            isChild\n          />\n        ))}\n    </Fragment>\n  );\n};\n\ntype DropdownDocumentationProps = {\n  searchSubstring: string;\n  documentation?: React.ReactNode;\n};\n\nconst DropdownDocumentation = ({\n  documentation,\n  searchSubstring,\n}: DropdownDocumentationProps) => {\n  if (documentation && typeof documentation === 'string') {\n    const startIndex =\n      documentation.toLocaleLowerCase().indexOf(searchSubstring.toLocaleLowerCase()) ??\n      -1;\n    if (startIndex !== -1) {\n      const endIndex = startIndex + searchSubstring.length;\n\n      return (\n        <Documentation>\n          {documentation.slice(0, startIndex)}\n          <strong>{documentation.slice(startIndex, endIndex)}</strong>\n          {documentation.slice(endIndex)}\n        </Documentation>\n      );\n    }\n  }\n\n  return <Documentation>{documentation}</Documentation>;\n};\n\ntype QueryItemProps = {item: SearchItem};\n\nconst QueryItem = ({item}: QueryItemProps) => {\n  if (!item.value) {\n    return null;\n  }\n\n  const parsedQuery = parseSearch(item.value);\n\n  if (!parsedQuery) {\n    return null;\n  }\n\n  return (\n    <QueryItemWrapper>\n      <HighlightQuery parsedQuery={parsedQuery} />\n    </QueryItemWrapper>\n  );\n};\n\nconst LoadingWrapper = styled('div')`\n  display: flex;\n  justify-content: center;\n  padding: ${space(1)};\n`;\n\nconst Info = styled('div')`\n  display: flex;\n  padding: ${space(1)} ${space(2)};\n  font-size: ${p => p.theme.fontSizeLarge};\n  color: ${p => p.theme.gray300};\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${p => p.theme.innerBorder};\n  }\n`;\n\nconst ListItem = styled('li')`\n  &:not(:first-child):not(.group-child) {\n    border-top: 1px solid ${p => p.theme.innerBorder};\n  }\n`;\n\nconst SearchDropdownGroup = styled(ListItem)``;\n\nconst SearchDropdownGroupTitle = styled('header')`\n  display: flex;\n  align-items: center;\n\n  background-color: ${p => p.theme.backgroundSecondary};\n  color: ${p => p.theme.gray300};\n  font-weight: normal;\n  font-size: ${p => p.theme.fontSizeMedium};\n\n  margin: 0;\n  padding: ${space(1)} ${space(2)};\n\n  & > svg {\n    margin-right: ${space(1)};\n  }\n`;\n\nconst SearchItemsList = styled('ul')<{maxMenuHeight?: number}>`\n  padding-left: 0;\n  list-style: none;\n  margin-bottom: 0;\n  ${p => {\n    if (p.maxMenuHeight !== undefined) {\n      return `\n        max-height: ${p.maxMenuHeight}px;\n        overflow-y: scroll;\n      `;\n    }\n\n    return `\n      height: auto;\n    `;\n  }}\n`;\n\nconst SearchListItem = styled(ListItem)<{isDisabled?: boolean; isGrouped?: boolean}>`\n  scroll-margin: 40px 0;\n  font-size: ${p => p.theme.fontSizeLarge};\n  padding: 4px ${space(2)};\n\n  min-height: ${p => (p.isGrouped ? '30px' : '36px')};\n\n  ${p => {\n    if (!p.isDisabled) {\n      return `\n        cursor: pointer;\n\n        &:hover,\n        &.active {\n          background: ${p.theme.hover};\n        }\n      `;\n    }\n\n    return '';\n  }}\n\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n`;\n\nconst SearchItemTitleWrapper = styled('div')<{hasSingleField?: boolean}>`\n  display: flex;\n  flex-grow: 1;\n  flex-shrink: 0;\n  max-width: ${p => (p.hasSingleField ? '75%' : 'min(280px, 50%)')};\n\n  color: ${p => p.theme.textColor};\n  font-weight: normal;\n  font-size: ${p => p.theme.fontSizeMedium};\n  margin: 0;\n  line-height: ${p => p.theme.text.lineHeightHeading};\n\n  ${p => p.theme.overflowEllipsis};\n`;\n\nconst RestOfWordsContainer = styled('span')<{\n  hasSplit?: boolean;\n  isFirstWordHidden?: boolean;\n}>`\n  color: ${p => (p.hasSplit ? p.theme.blue400 : p.theme.textColor)};\n  margin-left: ${p => (p.isFirstWordHidden ? space(1) : '0px')};\n`;\n\nconst FirstWordWrapper = styled('span')`\n  font-weight: medium;\n`;\n\nconst TagWrapper = styled('span')`\n  width: 5%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nconst Documentation = styled('span')`\n  font-size: ${p => p.theme.fontSizeMedium};\n  font-family: ${p => p.theme.text.family};\n  color: ${p => p.theme.gray300};\n  display: flex;\n  flex: 2;\n  padding: 0 ${space(1)};\n\n  white-space: pre;\n\n  @media (max-width: ${p => p.theme.breakpoints.small}) {\n    display: none;\n  }\n`;\n\nconst DropdownFooter = styled(`div`)`\n  width: 100%;\n  min-height: 45px;\n  background-color: ${p => p.theme.backgroundSecondary};\n  border-top: 1px solid ${p => p.theme.innerBorder};\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: ${space(1)};\n  flex-wrap: wrap;\n  gap: ${space(1)};\n`;\n\nconst ShortcutsRow = styled('div')`\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n`;\n\nconst ShortcutButtonContainer = styled('div')`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: auto;\n  padding: 0 ${space(1.5)};\n\n  cursor: pointer;\n\n  :hover {\n    border-radius: ${p => p.theme.borderRadius};\n    background-color: ${p => color(p.theme.hover).darken(0.02).string()};\n  }\n`;\n\nconst HotkeyGlyphWrapper = styled('span')`\n  color: ${p => p.theme.gray300};\n  margin-right: ${space(0.5)};\n\n  @media (max-width: ${p => p.theme.breakpoints.small}) {\n    display: none;\n  }\n`;\n\nconst IconWrapper = styled('span')`\n  display: none;\n\n  @media (max-width: ${p => p.theme.breakpoints.small}) {\n    display: flex;\n    margin-right: ${space(0.5)};\n    align-items: center;\n    justify-content: center;\n  }\n`;\n\nconst HotkeyTitle = styled(`span`)`\n  font-size: ${p => p.theme.fontSizeSmall};\n`;\n\nconst Invalid = styled(`span`)`\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-family: ${p => p.theme.text.family};\n  color: ${p => p.theme.gray400};\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n\n  span {\n    white-space: pre;\n  }\n`;\n\nconst Highlight = styled(`strong`)`\n  color: ${p => p.theme.linkColor};\n`;\n\nconst QueryItemWrapper = styled('span')`\n  font-size: ${p => p.theme.fontSizeSmall};\n  width: 100%;\n  gap: ${space(1)};\n  display: flex;\n  white-space: nowrap;\n  word-break: normal;\n  font-family: ${p => p.theme.text.familyMono};\n`;\n\nconst Value = styled('span')<{hasDocs?: boolean}>`\n  font-family: ${p => p.theme.text.familyMono};\n  font-size: ${p => p.theme.fontSizeSmall};\n\n  max-width: ${p => (p.hasDocs ? '280px' : 'none')};\n\n  ${p => p.theme.overflowEllipsis};\n`;\n","import {useHotkeys} from 'sentry/utils/useHotkeys';\n\nimport {Shortcut} from './types';\n\nconst SearchHotkeysListener = ({\n  visibleShortcuts,\n  runShortcut,\n}: {\n  runShortcut: (shortcut: Shortcut) => void;\n  visibleShortcuts: Shortcut[];\n}) => {\n  useHotkeys(\n    visibleShortcuts\n      .filter(shortcut => typeof shortcut.hotkeys !== 'undefined')\n      .map(shortcut => ({\n        match: shortcut.hotkeys?.actual ?? [],\n        callback: e => {\n          e.preventDefault();\n          runShortcut(shortcut);\n        },\n      })),\n    [visibleShortcuts]\n  );\n\n  return null;\n};\n\nexport default SearchHotkeysListener;\n","import {FieldKind} from 'sentry/utils/fields';\n\nimport {Token, TokenResult} from '../searchSyntax/parser';\n\nexport enum ItemType {\n  DEFAULT = 'default',\n  TAG_KEY = 'tag-key',\n  TAG_VALUE = 'tag-value',\n  TAG_VALUE_ISO_DATE = 'tag-value-iso-date',\n  TAG_OPERATOR = 'tag-operator',\n  FIRST_RELEASE = 'first-release',\n  INVALID_TAG = 'invalid-tag',\n  RECENT_SEARCH = 'recent-search',\n  PROPERTY = 'property',\n  LINK = 'link',\n}\n\nexport type SearchGroup = {\n  children: SearchItem[];\n  icon: React.ReactNode;\n  title: string;\n  type: ItemType | 'header';\n  desc?: string;\n  value?: string;\n};\n\nexport type SearchItem = {\n  active?: boolean;\n  /**\n   * Call a callback instead of setting a value in the search query\n   */\n  callback?: () => void;\n  /**\n   * Child search items, we only support 1 level of nesting though.\n   */\n  children?: SearchItem[];\n  deprecated?: boolean;\n  desc?: string;\n  documentation?: React.ReactNode;\n  ignoreMaxSearchItems?: boolean;\n  kind?: FieldKind;\n  title?: string;\n  type?: ItemType;\n  /**\n   * A value of null means that this item is not selectable in the search dropdown\n   */\n  value?: string | null;\n};\n\nexport type Tag = {\n  desc: string;\n  key: string;\n  predefined: boolean;\n  values: string[];\n};\n\nexport enum ShortcutType {\n  Delete = 'delete',\n  Negate = 'negate',\n  Next = 'next',\n  Previous = 'previous',\n}\n\nexport type Shortcut = {\n  canRunShortcut: (\n    token: TokenResult<Token> | null | undefined,\n    filterTokenCount: number\n  ) => boolean;\n  icon: React.ReactNode;\n  shortcutType: ShortcutType;\n  text: string;\n  hotkeys?: {\n    actual: string[] | string;\n    display?: string[] | string;\n  };\n};\n\nexport type AutocompleteGroup = {\n  recentSearchItems: SearchItem[] | undefined;\n  searchItems: SearchItem[];\n  tagName: string;\n  type: ItemType;\n};\n","// eslint-disable-next-line simple-import-sort/imports\nimport {\n  filterTypeConfig,\n  interchangeableFilterOperators,\n  TermOperator,\n  Token,\n  TokenResult,\n} from 'sentry/components/searchSyntax/parser';\nimport {\n  IconArrow,\n  IconClock,\n  IconDelete,\n  IconExclamation,\n  IconStar,\n  IconTag,\n  IconToggle,\n  IconUser,\n} from 'sentry/icons';\nimport {t} from 'sentry/locale';\n\nimport {\n  AutocompleteGroup,\n  ItemType,\n  SearchGroup,\n  SearchItem,\n  Shortcut,\n  ShortcutType,\n} from './types';\nimport {Tag} from 'sentry/types';\nimport {FieldKind, FieldValueType, getFieldDefinition} from 'sentry/utils/fields';\n\nexport function addSpace(query = '') {\n  if (query.length !== 0 && query[query.length - 1] !== ' ') {\n    return query + ' ';\n  }\n\n  return query;\n}\n\nexport function removeSpace(query = '') {\n  if (query[query.length - 1] === ' ') {\n    return query.slice(0, query.length - 1);\n  }\n\n  return query;\n}\n\n/**\n * Given a query, and the current cursor position, return the string-delimiting\n * index of the search term designated by the cursor.\n */\nexport function getLastTermIndex(query: string, cursor: number) {\n  // TODO: work with quoted-terms\n  const cursorOffset = query.slice(cursor).search(/\\s|$/);\n  return cursor + (cursorOffset === -1 ? 0 : cursorOffset);\n}\n\n/**\n * Returns an array of query terms, including incomplete terms\n *\n * e.g. [\"is:unassigned\", \"browser:\\\"Chrome 33.0\\\"\", \"assigned\"]\n */\nexport function getQueryTerms(query: string, cursor: number) {\n  return query.slice(0, cursor).match(/\\S+:\"[^\"]*\"?|\\S+/g);\n}\n\nfunction getTitleForType(type: ItemType) {\n  if (type === ItemType.TAG_VALUE) {\n    return t('Values');\n  }\n\n  if (type === ItemType.RECENT_SEARCH) {\n    return t('Recent Searches');\n  }\n\n  if (type === ItemType.DEFAULT) {\n    return t('Common Search Terms');\n  }\n\n  if (type === ItemType.TAG_OPERATOR) {\n    return t('Operator Helpers');\n  }\n\n  if (type === ItemType.PROPERTY) {\n    return t('Properties');\n  }\n\n  return t('Keys');\n}\n\nfunction getIconForTypeAndTag(type: ItemType, tagName: string) {\n  if (type === ItemType.RECENT_SEARCH) {\n    return <IconClock size=\"xs\" />;\n  }\n\n  if (type === ItemType.DEFAULT) {\n    return <IconStar size=\"xs\" />;\n  }\n\n  // Change based on tagName and default to \"icon-tag\"\n  switch (tagName) {\n    case 'is':\n      return <IconToggle size=\"xs\" />;\n    case 'assigned':\n    case 'bookmarks':\n      return <IconUser size=\"xs\" />;\n    case 'firstSeen':\n    case 'lastSeen':\n    case 'event.timestamp':\n      return <IconClock size=\"xs\" />;\n    default:\n      return <IconTag size=\"xs\" />;\n  }\n}\n\nconst filterSearchItems = (\n  searchItems: SearchItem[],\n  recentSearchItems?: SearchItem[],\n  maxSearchItems?: number,\n  queryCharsLeft?: number\n) => {\n  if (maxSearchItems && maxSearchItems > 0) {\n    searchItems = searchItems.filter(\n      (value: SearchItem, index: number) =>\n        index < maxSearchItems || value.ignoreMaxSearchItems\n    );\n  }\n\n  if (queryCharsLeft || queryCharsLeft === 0) {\n    searchItems = searchItems.flatMap(item => {\n      if (!item.children) {\n        if (!item.value || item.value.length <= queryCharsLeft) {\n          return [item];\n        }\n        return [];\n      }\n\n      const newItem = {\n        ...item,\n        children: item.children.filter(\n          child => !child.value || child.value.length <= queryCharsLeft\n        ),\n      };\n\n      if (newItem.children.length === 0) {\n        return [];\n      }\n\n      return [newItem];\n    });\n    searchItems = searchItems.filter(\n      (value: SearchItem) => !value.value || value.value.length <= queryCharsLeft\n    );\n\n    if (recentSearchItems) {\n      recentSearchItems = recentSearchItems.filter(\n        (value: SearchItem) => !value.value || value.value.length <= queryCharsLeft\n      );\n    }\n  }\n\n  return {searchItems, recentSearchItems};\n};\n\nexport function createSearchGroups(\n  searchItems: SearchItem[],\n  recentSearchItems: SearchItem[] | undefined,\n  tagName: string,\n  type: ItemType,\n  maxSearchItems?: number,\n  queryCharsLeft?: number,\n  isDefaultState?: boolean\n) {\n  const fieldDefinition = getFieldDefinition(tagName);\n\n  const activeSearchItem = 0;\n  const {searchItems: filteredSearchItems, recentSearchItems: filteredRecentSearchItems} =\n    filterSearchItems(searchItems, recentSearchItems, maxSearchItems, queryCharsLeft);\n\n  const searchGroup: SearchGroup = {\n    title: getTitleForType(type),\n    type: type === ItemType.INVALID_TAG ? type : 'header',\n    icon: getIconForTypeAndTag(type, tagName),\n    children: [...filteredSearchItems],\n  };\n\n  const recentSearchGroup: SearchGroup | undefined =\n    filteredRecentSearchItems && filteredRecentSearchItems.length > 0\n      ? {\n          title: t('Recent Searches'),\n          type: 'header',\n          icon: <IconClock size=\"xs\" />,\n          children: [...filteredRecentSearchItems],\n        }\n      : undefined;\n\n  if (searchGroup.children && !!searchGroup.children.length) {\n    searchGroup.children[activeSearchItem] = {\n      ...searchGroup.children[activeSearchItem],\n    };\n  }\n\n  const flatSearchItems = filteredSearchItems.flatMap(item => {\n    if (item.children) {\n      if (!item.value) {\n        return [...item.children];\n      }\n      return [item, ...item.children];\n    }\n    return [item];\n  });\n\n  if (fieldDefinition?.valueType === FieldValueType.DATE) {\n    if (type === ItemType.TAG_OPERATOR) {\n      return {\n        searchGroups: [],\n        flatSearchItems: [],\n        activeSearchItem: -1,\n      };\n    }\n  }\n\n  if (isDefaultState) {\n    // Recent searches first in default state.\n    return {\n      searchGroups: [...(recentSearchGroup ? [recentSearchGroup] : []), searchGroup],\n      flatSearchItems: [\n        ...(recentSearchItems ? recentSearchItems : []),\n        ...flatSearchItems,\n      ],\n      activeSearchItem: -1,\n    };\n  }\n\n  return {\n    searchGroups: [searchGroup, ...(recentSearchGroup ? [recentSearchGroup] : [])],\n    flatSearchItems: [\n      ...flatSearchItems,\n      ...(recentSearchItems ? recentSearchItems : []),\n    ],\n    activeSearchItem: -1,\n  };\n}\n\nexport function generateOperatorEntryMap(tag: string) {\n  return {\n    [TermOperator.Default]: {\n      type: ItemType.TAG_OPERATOR,\n      value: ':',\n      desc: `${tag}:${t('[value]')}`,\n      documentation: 'is equal to',\n    },\n    [TermOperator.GreaterThanEqual]: {\n      type: ItemType.TAG_OPERATOR,\n      value: ':>=',\n      desc: `${tag}:${t('>=[value]')}`,\n      documentation: 'is greater than or equal to',\n    },\n    [TermOperator.LessThanEqual]: {\n      type: ItemType.TAG_OPERATOR,\n      value: ':<=',\n      desc: `${tag}:${t('<=[value]')}`,\n      documentation: 'is less than or equal to',\n    },\n    [TermOperator.GreaterThan]: {\n      type: ItemType.TAG_OPERATOR,\n      value: ':>',\n      desc: `${tag}:${t('>[value]')}`,\n      documentation: 'is greater than',\n    },\n    [TermOperator.LessThan]: {\n      type: ItemType.TAG_OPERATOR,\n      value: ':<',\n      desc: `${tag}:${t('<[value]')}`,\n      documentation: 'is less than',\n    },\n    [TermOperator.Equal]: {\n      type: ItemType.TAG_OPERATOR,\n      value: ':=',\n      desc: `${tag}:${t('=[value]')}`,\n      documentation: 'is equal to',\n    },\n    [TermOperator.NotEqual]: {\n      type: ItemType.TAG_OPERATOR,\n      value: '!:',\n      desc: `!${tag}:${t('[value]')}`,\n      documentation: 'is not equal to',\n    },\n  };\n}\n\nexport function getValidOps(\n  filterToken: TokenResult<Token.Filter>\n): readonly TermOperator[] {\n  // If the token is invalid we want to use the possible expected types as our filter type\n  const validTypes = filterToken.invalid?.expectedType ?? [filterToken.filter];\n\n  // Determine any interchangeable filter types for our valid types\n  const interchangeableTypes = validTypes.map(\n    type => interchangeableFilterOperators[type] ?? []\n  );\n\n  // Combine all types\n  const allValidTypes = [...new Set([...validTypes, ...interchangeableTypes.flat()])];\n\n  // Find all valid operations\n  const validOps = new Set<TermOperator>(\n    allValidTypes.map(type => filterTypeConfig[type].validOps).flat()\n  );\n\n  return [...validOps];\n}\n\nexport const shortcuts: Shortcut[] = [\n  {\n    text: 'Delete',\n    shortcutType: ShortcutType.Delete,\n    hotkeys: {\n      actual: 'ctrl+option+backspace',\n    },\n    icon: <IconDelete size=\"xs\" color=\"gray300\" />,\n    canRunShortcut: token => {\n      return token?.type === Token.Filter;\n    },\n  },\n  {\n    text: 'Exclude',\n    shortcutType: ShortcutType.Negate,\n    hotkeys: {\n      actual: 'ctrl+option+1',\n    },\n    icon: <IconExclamation size=\"xs\" color=\"gray300\" />,\n    canRunShortcut: token => {\n      return token?.type === Token.Filter && !token.negated;\n    },\n  },\n  {\n    text: 'Include',\n    shortcutType: ShortcutType.Negate,\n    hotkeys: {\n      actual: 'ctrl+option+1',\n    },\n    icon: <IconExclamation size=\"xs\" color=\"gray300\" />,\n    canRunShortcut: token => {\n      return token?.type === Token.Filter && token.negated;\n    },\n  },\n\n  {\n    text: 'Previous',\n    shortcutType: ShortcutType.Previous,\n    hotkeys: {\n      actual: 'ctrl+option+left',\n    },\n    icon: <IconArrow direction=\"left\" size=\"xs\" color=\"gray300\" />,\n    canRunShortcut: (token, count) => {\n      return count > 1 || (count > 0 && token?.type !== Token.Filter);\n    },\n  },\n  {\n    text: 'Next',\n    shortcutType: ShortcutType.Next,\n    hotkeys: {\n      actual: 'ctrl+option+right',\n    },\n    icon: <IconArrow direction=\"right\" size=\"xs\" color=\"gray300\" />,\n    canRunShortcut: (token, count) => {\n      return count > 1 || (count > 0 && token?.type !== Token.Filter);\n    },\n  },\n];\n\nconst getItemTitle = (key: string, kind: FieldKind) => {\n  if (kind === FieldKind.FUNCTION) {\n    // Replace the function innards with ... for cleanliness\n    return key.replace(/\\(.*\\)/g, '(...)');\n  }\n\n  return key;\n};\n\n/**\n * Groups tag keys based on the \".\" character in their key.\n * For example, \"device.arch\" and \"device.name\" will be grouped together as children of \"device\", a non-interactive parent.\n * The parent will become interactive if there exists a key \"device\".\n */\nexport const getTagItemsFromKeys = (\n  tagKeys: string[],\n  supportedTags: {\n    [key: string]: Tag;\n  }\n) => {\n  return [...tagKeys].reduce((groups, key) => {\n    const keyWithColon = `${key}:`;\n    const sections = key.split('.');\n\n    const definition =\n      supportedTags[key]?.kind === FieldKind.FUNCTION\n        ? getFieldDefinition(key.split('(')[0])\n        : getFieldDefinition(key);\n    const kind = supportedTags[key]?.kind ?? definition?.kind ?? FieldKind.FIELD;\n\n    const item: SearchItem = {\n      value: keyWithColon,\n      title: getItemTitle(key, kind),\n      documentation: definition?.desc ?? '-',\n      kind,\n      deprecated: definition?.deprecated,\n    };\n\n    const lastGroup = groups.at(-1);\n\n    const [title] = sections;\n\n    if (kind !== FieldKind.FUNCTION && lastGroup) {\n      if (lastGroup.children && lastGroup.title === title) {\n        lastGroup.children.push(item);\n        return groups;\n      }\n\n      if (lastGroup.title && lastGroup.title.split('.')[0] === title) {\n        if (lastGroup.title === title) {\n          return [\n            ...groups.slice(0, -1),\n            {\n              title,\n              value: lastGroup.value,\n              documentation: lastGroup.documentation,\n              kind: lastGroup.kind,\n              children: [item],\n            },\n          ];\n        }\n\n        // Add a blank parent if the last group's full key is not the same as the title\n        return [\n          ...groups.slice(0, -1),\n          {\n            title,\n            value: null,\n            documentation: '-',\n            kind: lastGroup.kind,\n            children: [lastGroup, item],\n          },\n        ];\n      }\n    }\n\n    return [...groups, item];\n  }, [] as SearchItem[]);\n};\n\n/**\n * Sets an item as active within a search group array and returns new search groups without mutating.\n * the item is compared via value, so this function assumes that each value is unique.\n */\nexport const getSearchGroupWithItemMarkedActive = (\n  searchGroups: SearchGroup[],\n  currentItem: SearchItem,\n  active: boolean\n) => {\n  return searchGroups.map(group => ({\n    ...group,\n    children: group.children?.map(item => {\n      if (item.value === currentItem.value) {\n        return {\n          ...item,\n          active,\n        };\n      }\n\n      if (item.children && item.children.length > 0) {\n        return {\n          ...item,\n          children: item.children.map(child => {\n            if (child.value === currentItem.value) {\n              return {\n                ...child,\n                active,\n              };\n            }\n\n            return child;\n          }),\n        };\n      }\n\n      return item;\n    }),\n  }));\n};\n\n/**\n * Filter tag keys based on the query and the key, description, and associated keywords of each tag.\n */\nexport const filterKeysFromQuery = (tagKeys: string[], searchTerm: string): string[] =>\n  tagKeys\n    .flatMap(key => {\n      const keyWithoutFunctionPart = key.replaceAll(/\\(.*\\)/g, '');\n      const definition = getFieldDefinition(keyWithoutFunctionPart);\n      const lowerCasedSearchTerm = searchTerm.toLocaleLowerCase();\n\n      const combinedKeywords = [\n        ...(definition?.desc ? [definition.desc] : []),\n        ...(definition?.keywords ?? []),\n      ]\n        .join(' ')\n        .toLocaleLowerCase();\n\n      const matchedInKey = keyWithoutFunctionPart.includes(lowerCasedSearchTerm);\n      const matchedInKeywords = combinedKeywords.includes(lowerCasedSearchTerm);\n\n      if (!matchedInKey && !matchedInKeywords) {\n        return [];\n      }\n\n      return [{matchedInKey, matchedInKeywords, key}];\n    })\n    .sort((a, b) => {\n      // Sort by matched in key first, then by matched in keywords\n      if (a.matchedInKey && !b.matchedInKey) {\n        return -1;\n      }\n\n      if (b.matchedInKey && !a.matchedInKey) {\n        return 1;\n      }\n\n      return a.key < b.key ? -1 : 1;\n    })\n    .map(({key}) => key);\n\nconst DATE_SUGGESTED_VALUES = [\n  {\n    title: t('Last hour'),\n    value: '-1h',\n    desc: '-1h',\n    type: ItemType.TAG_VALUE,\n  },\n  {\n    title: t('Last 24 hours'),\n    value: '-24h',\n    desc: '-24h',\n    type: ItemType.TAG_VALUE,\n  },\n  {\n    title: t('Last 7 days'),\n    value: '-7d',\n    desc: '-7d',\n    type: ItemType.TAG_VALUE,\n  },\n  {\n    title: t('Last 14 days'),\n    value: '-14d',\n    desc: '-14d',\n    type: ItemType.TAG_VALUE,\n  },\n  {\n    title: t('Last 30 days'),\n    value: '-30d',\n    desc: '-30d',\n    type: ItemType.TAG_VALUE,\n  },\n  {\n    title: t('After a custom datetime'),\n    value: '>',\n    desc: '>YYYY-MM-DDThh:mm:ss',\n    type: ItemType.TAG_VALUE_ISO_DATE,\n  },\n  {\n    title: t('Before a custom datetime'),\n    value: '<',\n    desc: '<YYYY-MM-DDThh:mm:ss',\n    type: ItemType.TAG_VALUE_ISO_DATE,\n  },\n  {\n    title: t('At a custom datetime'),\n    value: '=',\n    desc: '=YYYY-MM-DDThh:mm:ss',\n    type: ItemType.TAG_VALUE_ISO_DATE,\n  },\n];\n\nexport const getDateTagAutocompleteGroups = (tagName: string): AutocompleteGroup[] => {\n  return [\n    {\n      searchItems: DATE_SUGGESTED_VALUES,\n      recentSearchItems: [],\n      tagName,\n      type: ItemType.TAG_VALUE,\n    },\n  ];\n};\n","import styled from '@emotion/styled';\n\ntype Props = {\n  children: React.ReactNode;\n  className?: string;\n  ['data-test-id']?: string;\n  /**\n   * Change which side of the text is elided.\n   * Default: 'right'\n   *\n   * BROWSER COMPAT:\n   * When set to `left` the intention is for something like: `...xample.com/foo/`\n   * In Chrome & Firefox this is what happens.\n   *\n   * In Safari (July 2022) you will see this instead: `...https://example.co`.\n   *\n   * See: https://stackoverflow.com/a/24800788\n   */\n  ellipsisDirection?: 'left' | 'right';\n  isParagraph?: boolean;\n};\n\nconst TextOverflow = styled(\n  ({\n    children,\n    className,\n    ellipsisDirection,\n    isParagraph,\n    ['data-test-id']: dataTestId,\n  }: Props) => {\n    const Component = isParagraph ? 'p' : 'div';\n    if (ellipsisDirection === 'left') {\n      return (\n        <Component className={className} data-test-id={dataTestId}>\n          <bdi>{children}</bdi>\n        </Component>\n      );\n    }\n    return (\n      <Component className={className} data-test-id={dataTestId}>\n        {children}\n      </Component>\n    );\n  }\n)`\n  ${p => p.theme.overflowEllipsis}\n  ${p =>\n    p.ellipsisDirection === 'left' &&\n    `\n      direction: rtl;\n      text-align: left;\n    `};\n  width: auto;\n  line-height: 1.2;\n`;\n\nTextOverflow.defaultProps = {\n  ellipsisDirection: 'right',\n  isParagraph: false,\n};\n\nexport default TextOverflow;\n","import {createStore} from 'reflux';\n\nimport {defined} from 'sentry/utils';\nimport localStorage from 'sentry/utils/localStorage';\nimport {Theme} from 'sentry/utils/theme';\n\nimport {CommonStoreDefinition} from './types';\n\ntype Alert = {\n  message: React.ReactNode;\n  type: keyof Theme['alert'];\n  expireAfter?: number;\n  id?: string;\n  key?: number;\n  neverExpire?: boolean;\n  noDuplicates?: boolean;\n  onClose?: () => void;\n  opaque?: boolean;\n  url?: string;\n};\n\ninterface InternalAlertStoreDefinition {\n  alerts: Alert[];\n  count: number;\n}\ninterface AlertStoreDefinition\n  extends CommonStoreDefinition<Alert[]>,\n    InternalAlertStoreDefinition {\n  addAlert(alert: Alert): void;\n  closeAlert(alert: Alert, duration?: number): void;\n  init(): void;\n}\n\nconst storeConfig: AlertStoreDefinition = {\n  alerts: [],\n  count: 0,\n\n  init() {\n    this.alerts = [];\n    this.count = 0;\n  },\n\n  addAlert(alert) {\n    const alertAlreadyExists = this.alerts.some(a => a.id === alert.id);\n    if (alertAlreadyExists && alert.noDuplicates) {\n      return;\n    }\n\n    if (defined(alert.id)) {\n      const mutedData = localStorage.getItem('alerts:muted');\n      if (typeof mutedData === 'string' && mutedData.length) {\n        const expirations: Record<string, number> = JSON.parse(mutedData);\n\n        // Remove any objects that have passed their mute duration.\n        const now = Math.floor(new Date().valueOf() / 1000);\n        for (const key in expirations) {\n          if (expirations.hasOwnProperty(key) && expirations[key] < now) {\n            delete expirations[key];\n          }\n        }\n        localStorage.setItem('alerts:muted', JSON.stringify(expirations));\n\n        if (expirations.hasOwnProperty(alert.id)) {\n          return;\n        }\n      }\n    } else {\n      if (!defined(alert.expireAfter)) {\n        alert.expireAfter = 5000;\n      }\n    }\n\n    if (alert.expireAfter && !alert.neverExpire) {\n      window.setTimeout(() => {\n        this.closeAlert(alert);\n      }, alert.expireAfter);\n    }\n\n    alert.key = this.count++;\n\n    // intentionally recreate array via concat because of Reflux\n    // \"bug\" where React components are given same reference to tracked\n    // data objects, and don't *see* that values have changed\n    this.alerts = this.alerts.concat([alert]);\n    this.trigger(this.alerts);\n  },\n\n  closeAlert(alert, duration = 60 * 60 * 7 * 24) {\n    if (defined(alert.id) && defined(duration)) {\n      const expiry = Math.floor(new Date().valueOf() / 1000) + duration;\n      const mutedData = localStorage.getItem('alerts:muted');\n\n      let expirations: Record<string, number> = {};\n      if (typeof mutedData === 'string' && expirations.length) {\n        expirations = JSON.parse(mutedData);\n      }\n      expirations[alert.id] = expiry;\n      localStorage.setItem('alerts:muted', JSON.stringify(expirations));\n    }\n\n    // TODO(dcramer): we need some animations here for closing alerts\n    this.alerts = this.alerts.filter(item => alert !== item);\n    this.trigger(this.alerts);\n  },\n\n  getState() {\n    return this.alerts;\n  },\n};\n\nconst AlertStore = createStore(storeConfig);\nexport default AlertStore;\n","import isArray from 'lodash/isArray';\nimport {createStore} from 'reflux';\n\nimport {Indicator} from 'sentry/actionCreators/indicator';\nimport {t} from 'sentry/locale';\nimport IndicatorStore from 'sentry/stores/indicatorStore';\nimport {\n  Activity,\n  BaseGroup,\n  Group,\n  GroupCollapseRelease,\n  GroupRelease,\n  GroupStats,\n} from 'sentry/types';\nimport {makeSafeRefluxStore} from 'sentry/utils/makeSafeRefluxStore';\n\nimport {CommonStoreDefinition} from './types';\n\nfunction showAlert(msg: string, type: Indicator['type']) {\n  IndicatorStore.addMessage(msg, type, {duration: 4000});\n}\n\ntype ChangeId = string;\n\ntype Change = {\n  data: any;\n  itemId: string;\n};\n\ntype Item = BaseGroup | Group | GroupCollapseRelease;\n\ntype ItemIds = string[] | undefined;\n\ninterface InternalDefinition {\n  addActivity: (groupId: string, data: Activity, index?: number) => void;\n  indexOfActivity: (groupId: string, id: string) => number;\n  items: Item[];\n\n  pendingChanges: Map<ChangeId, Change>;\n  removeActivity: (groupId: string, id: string) => number;\n  statuses: Record<string, Record<string, boolean>>;\n  updateActivity: (groupId: string, id: string, data: Partial<Activity>) => void;\n}\n\ninterface GroupStoreDefinition extends CommonStoreDefinition<Item[]>, InternalDefinition {\n  add: (items: Item[]) => void;\n  addStatus: (id: string, status: string) => void;\n  clearStatus: (id: string, status: string) => void;\n\n  get: (id: string) => Item | undefined;\n  getAllItemIds: () => string[];\n  getAllItems: () => Item[];\n\n  hasStatus: (id: string, status: string) => boolean;\n  init: () => void;\n\n  itemIdsOrAll(itemIds: ItemIds): string[];\n\n  loadInitialData: (items: Item[]) => void;\n\n  onAssignTo: (changeId: string, itemId: string, data: any) => void;\n  onAssignToError: (changeId: string, itemId: string, error: Error) => void;\n  onAssignToSuccess: (changeId: string, itemId: string, response: any) => void;\n\n  onDelete: (changeId: string, itemIds: ItemIds) => void;\n  onDeleteError: (changeId: string, itemIds: ItemIds, error: Error) => void;\n  onDeleteSuccess: (changeId: string, itemIds: ItemIds, response: any) => void;\n\n  onDiscard: (changeId: string, itemId: string) => void;\n  onDiscardError: (changeId: string, itemId: string, response: any) => void;\n  onDiscardSuccess: (changeId: string, itemId: string, response: any) => void;\n\n  onMerge: (changeId: string, itemIds: ItemIds) => void;\n  onMergeError: (changeId: string, itemIds: ItemIds, response: any) => void;\n  onMergeSuccess: (changeId: string, itemIds: ItemIds, response: any) => void;\n\n  onPopulateReleases: (itemId: string, releaseData: GroupRelease) => void;\n  onPopulateStats: (itemIds: ItemIds, response: GroupStats[]) => void;\n\n  onUpdate: (changeId: string, itemIds: ItemIds, data: any) => void;\n  onUpdateError: (changeId: string, itemIds: ItemIds, silent: boolean) => void;\n  onUpdateSuccess: (changeId: string, itemIds: ItemIds, response: Partial<Group>) => void;\n\n  remove: (itemIds: ItemIds) => void;\n\n  reset: () => void;\n}\n\nconst storeConfig: GroupStoreDefinition = {\n  pendingChanges: new Map(),\n  items: [],\n  statuses: {},\n\n  init() {\n    this.reset();\n  },\n\n  reset() {\n    this.pendingChanges = new Map();\n    this.items = [];\n    this.statuses = {};\n  },\n\n  // TODO(dcramer): this should actually come from an action of some sorts\n  loadInitialData(items) {\n    this.reset();\n\n    const itemIds = new Set<string>();\n    items.forEach(item => {\n      itemIds.add(item.id);\n      this.items.push(item);\n    });\n\n    this.trigger(itemIds);\n  },\n\n  add(items) {\n    if (!isArray(items)) {\n      items = [items];\n    }\n\n    const itemsById: Record<string, Item> = {};\n    const itemIds = new Set<string>();\n    items.forEach(item => {\n      itemsById[item.id] = item;\n      itemIds.add(item.id);\n    });\n\n    // See if any existing items are updated by this new set of items\n    this.items.forEach((item, idx) => {\n      if (itemsById[item.id]) {\n        this.items[idx] = {\n          ...item,\n          ...itemsById[item.id],\n        };\n        delete itemsById[item.id];\n      }\n    });\n\n    // New items\n    const newItems = items.filter(item => itemsById.hasOwnProperty(item.id));\n    this.items = this.items.concat(newItems);\n\n    this.trigger(itemIds);\n  },\n\n  /**\n   * If itemIds is undefined, returns all ids in the store\n   */\n  itemIdsOrAll(itemIds: ItemIds) {\n    return itemIds === undefined ? this.getAllItemIds() : itemIds;\n  },\n\n  remove(itemIds) {\n    this.items = this.items.filter(item => !itemIds?.includes(item.id));\n\n    this.trigger(new Set(itemIds));\n  },\n\n  addStatus(id, status) {\n    if (this.statuses[id] === undefined) {\n      this.statuses[id] = {};\n    }\n    this.statuses[id][status] = true;\n  },\n\n  clearStatus(id, status) {\n    if (this.statuses[id] === undefined) {\n      return;\n    }\n    this.statuses[id][status] = false;\n  },\n\n  hasStatus(id, status) {\n    return this.statuses[id]?.[status] || false;\n  },\n\n  indexOfActivity(groupId, id) {\n    const group = this.get(groupId);\n    if (!group) {\n      return -1;\n    }\n\n    for (let i = 0; i < group.activity.length; i++) {\n      if (group.activity[i].id === id) {\n        return i;\n      }\n    }\n    return -1;\n  },\n\n  addActivity(id, data, index = -1) {\n    const group = this.get(id);\n    if (!group) {\n      return;\n    }\n\n    // insert into beginning by default\n    if (index === -1) {\n      group.activity.unshift(data);\n    } else {\n      group.activity.splice(index, 0, data);\n    }\n    if (data.type === 'note') {\n      group.numComments++;\n    }\n\n    this.trigger(new Set([id]));\n  },\n\n  updateActivity(groupId, id, data) {\n    const group = this.get(groupId);\n    if (!group) {\n      return;\n    }\n\n    const index = this.indexOfActivity(groupId, id);\n    if (index === -1) {\n      return;\n    }\n\n    // Here, we want to merge the new `data` being passed in\n    // into the existing `data` object. This effectively\n    // allows passing in an object of only changes.\n    group.activity[index].data = Object.assign(group.activity[index].data, data);\n    this.trigger(new Set([group.id]));\n  },\n\n  removeActivity(groupId, id) {\n    const group = this.get(groupId);\n    if (!group) {\n      return -1;\n    }\n\n    const index = this.indexOfActivity(group.id, id);\n    if (index === -1) {\n      return -1;\n    }\n\n    const activity = group.activity.splice(index, 1);\n\n    if (activity[0].type === 'note') {\n      group.numComments--;\n    }\n\n    this.trigger(new Set([group.id]));\n    return index;\n  },\n\n  get(id) {\n    return this.getAllItems().find(item => item.id === id);\n  },\n\n  getAllItemIds() {\n    return this.items.map(item => item.id);\n  },\n\n  getAllItems() {\n    // Merge pending changes into the existing group items. This gives the\n    // apperance of optimistic updates\n    const pendingById: Record<string, Change[]> = {};\n\n    this.pendingChanges.forEach(change => {\n      const existing = pendingById[change.itemId] ?? [];\n      pendingById[change.itemId] = [...existing, change];\n    });\n\n    // Merge pending changes into the item if it has them\n    return this.items.map(item =>\n      pendingById[item.id] === undefined\n        ? item\n        : {\n            ...item,\n            ...pendingById[item.id].reduce((a, change) => ({...a, ...change.data}), {}),\n          }\n    );\n  },\n\n  getState() {\n    return this.getAllItems();\n  },\n\n  onAssignTo(_changeId, itemId, _data) {\n    this.addStatus(itemId, 'assignTo');\n    this.trigger(new Set([itemId]));\n  },\n\n  // TODO(dcramer): This is not really the best place for this\n  onAssignToError(_changeId, itemId, _error) {\n    this.clearStatus(itemId, 'assignTo');\n    showAlert(t('Unable to change assignee. Please try again.'), 'error');\n  },\n\n  onAssignToSuccess(_changeId, itemId, response) {\n    const item = this.get(itemId);\n    if (!item) {\n      return;\n    }\n    item.assignedTo = response.assignedTo;\n    this.clearStatus(itemId, 'assignTo');\n    this.trigger(new Set([itemId]));\n  },\n\n  onDelete(_changeId, itemIds) {\n    const ids = this.itemIdsOrAll(itemIds);\n    ids.forEach(itemId => this.addStatus(itemId, 'delete'));\n    this.trigger(new Set(ids));\n  },\n\n  onDeleteError(_changeId, itemIds, _response) {\n    showAlert(t('Unable to delete events. Please try again.'), 'error');\n\n    if (!itemIds) {\n      return;\n    }\n\n    itemIds.forEach(itemId => this.clearStatus(itemId, 'delete'));\n    this.trigger(new Set(itemIds));\n  },\n\n  onDeleteSuccess(_changeId, itemIds, _response) {\n    const ids = this.itemIdsOrAll(itemIds);\n\n    if (ids.length > 1) {\n      showAlert(t(`Deleted ${ids.length} Issues`), 'success');\n    } else {\n      const shortId = ids.map(item => GroupStore.get(item)?.shortId).join('');\n      showAlert(t(`Deleted ${shortId}`), 'success');\n    }\n\n    const itemIdSet = new Set(ids);\n    ids.forEach(itemId => {\n      delete this.statuses[itemId];\n      this.clearStatus(itemId, 'delete');\n    });\n    this.items = this.items.filter(item => !itemIdSet.has(item.id));\n    this.trigger(new Set(ids));\n  },\n\n  onDiscard(_changeId, itemId) {\n    this.addStatus(itemId, 'discard');\n    this.trigger(new Set([itemId]));\n  },\n\n  onDiscardError(_changeId, itemId, _response) {\n    this.clearStatus(itemId, 'discard');\n    showAlert(t('Unable to discard event. Please try again.'), 'error');\n    this.trigger(new Set([itemId]));\n  },\n\n  onDiscardSuccess(_changeId, itemId, _response) {\n    delete this.statuses[itemId];\n    this.clearStatus(itemId, 'discard');\n    this.items = this.items.filter(item => item.id !== itemId);\n    showAlert(t('Similar events will be filtered and discarded.'), 'success');\n    this.trigger(new Set([itemId]));\n  },\n\n  onMerge(_changeId, itemIds) {\n    const ids = this.itemIdsOrAll(itemIds);\n\n    ids.forEach(itemId => this.addStatus(itemId, 'merge'));\n    // XXX(billy): Not sure if this is a bug or not but do we need to publish all itemIds?\n    // Seems like we only need to publish parent id\n    this.trigger(new Set(ids));\n  },\n\n  onMergeError(_changeId, itemIds, _response) {\n    const ids = this.itemIdsOrAll(itemIds);\n\n    ids.forEach(itemId => this.clearStatus(itemId, 'merge'));\n    showAlert(t('Unable to merge events. Please try again.'), 'error');\n    this.trigger(new Set(ids));\n  },\n\n  onMergeSuccess(_changeId, itemIds, response) {\n    const ids = this.itemIdsOrAll(itemIds); // everything on page\n\n    ids.forEach(itemId => this.clearStatus(itemId, 'merge'));\n\n    // Remove all but parent id (items were merged into this one)\n    const mergedIdSet = new Set(ids);\n\n    // Looks like the `PUT /api/0/projects/:orgId/:projectId/issues/` endpoint\n    // actually returns a 204, so there is no `response` body\n    this.items = this.items.filter(\n      item =>\n        !mergedIdSet.has(item.id) ||\n        (response && response.merge && item.id === response.merge.parent)\n    );\n\n    if (ids.length > 0) {\n      showAlert(t(`Merged ${ids.length} Issues`), 'success');\n    }\n\n    this.trigger(new Set(ids));\n  },\n\n  onUpdate(changeId, itemIds, data) {\n    const ids = this.itemIdsOrAll(itemIds);\n\n    ids.forEach(itemId => {\n      this.addStatus(itemId, 'update');\n      this.pendingChanges.set(changeId, {itemId, data});\n    });\n\n    this.trigger(new Set(ids));\n  },\n\n  onUpdateError(changeId, itemIds, failSilently) {\n    const ids = this.itemIdsOrAll(itemIds);\n\n    this.pendingChanges.delete(changeId);\n    ids.forEach(itemId => this.clearStatus(itemId, 'update'));\n\n    if (!failSilently) {\n      showAlert(t('Unable to update events. Please try again.'), 'error');\n    }\n\n    this.trigger(new Set(ids));\n  },\n\n  onUpdateSuccess(changeId, itemIds, response) {\n    const ids = this.itemIdsOrAll(itemIds);\n\n    this.items.forEach((item, idx) => {\n      if (ids.includes(item.id)) {\n        this.items[idx] = {\n          ...item,\n          ...response,\n        };\n        this.clearStatus(item.id, 'update');\n      }\n    });\n    this.pendingChanges.delete(changeId);\n    this.trigger(new Set(ids));\n  },\n\n  onPopulateStats(itemIds, response) {\n    // Organize stats by id\n    const groupStatsMap = response.reduce<Record<string, GroupStats>>(\n      (map, stats) => ({...map, [stats.id]: stats}),\n      {}\n    );\n\n    this.items.forEach((item, idx) => {\n      if (itemIds?.includes(item.id)) {\n        this.items[idx] = {\n          ...item,\n          ...groupStatsMap[item.id],\n        };\n      }\n    });\n    this.trigger(new Set(itemIds));\n  },\n\n  onPopulateReleases(itemId, releaseData) {\n    this.items.forEach((item, idx) => {\n      if (item.id === itemId) {\n        this.items[idx] = {\n          ...item,\n          ...releaseData,\n        };\n      }\n    });\n    this.trigger(new Set([itemId]));\n  },\n};\n\nconst GroupStore = createStore(makeSafeRefluxStore(storeConfig));\nexport default GroupStore;\n","import {createStore, StoreDefinition} from 'reflux';\n\nimport {User} from 'sentry/types';\nimport {makeSafeRefluxStore} from 'sentry/utils/makeSafeRefluxStore';\n\ninterface MemberListStoreDefinition extends StoreDefinition {\n  getAll(): User[];\n  getByEmail(email: string): User | undefined;\n  getById(id: string): User | undefined;\n  init(): void;\n  isLoaded(): boolean;\n  loadInitialData(items: User[]): void;\n  loaded: boolean;\n  state: User[];\n}\n\nconst storeConfig: MemberListStoreDefinition = {\n  // listenables: MemberActions,\n\n  loaded: false,\n  state: [],\n\n  init() {\n    this.state = [];\n    this.loaded = false;\n  },\n\n  // TODO(dcramer): this should actually come from an action of some sorts\n  loadInitialData(items: User[]) {\n    this.state = items;\n    this.loaded = true;\n    this.trigger(this.state, 'initial');\n  },\n\n  isLoaded() {\n    return this.loaded;\n  },\n\n  getById(id) {\n    if (!this.state) {\n      return undefined;\n    }\n\n    id = '' + id;\n    for (let i = 0; i < this.state.length; i++) {\n      if (this.state[i].id === id) {\n        return this.state[i];\n      }\n    }\n    return undefined;\n  },\n\n  getByEmail(email) {\n    if (!this.state) {\n      return undefined;\n    }\n\n    email = email.toLowerCase();\n    for (let i = 0; i < this.state.length; i++) {\n      if (this.state[i].email.toLowerCase() === email) {\n        return this.state[i];\n      }\n    }\n    return undefined;\n  },\n\n  getAll() {\n    return this.state;\n  },\n};\n\nconst MemberListStore = createStore(makeSafeRefluxStore(storeConfig));\nexport default MemberListStore;\n","import {createStore} from 'reflux';\n\nimport {Tag, TagCollection} from 'sentry/types';\nimport {SEMVER_TAGS} from 'sentry/utils/discover/fields';\nimport {FieldKey, ISSUE_FIELDS} from 'sentry/utils/fields';\nimport {makeSafeRefluxStore} from 'sentry/utils/makeSafeRefluxStore';\n\nimport {CommonStoreDefinition} from './types';\n\n// This list is only used on issues. Events/discover\n// have their own field list that exists elsewhere.\n// contexts.key and contexts.value omitted on purpose.\nconst BUILTIN_TAGS = ISSUE_FIELDS.reduce<TagCollection>((acc, tag) => {\n  acc[tag] = {key: tag, name: tag};\n  return acc;\n}, {});\n\ninterface TagStoreDefinition extends CommonStoreDefinition<TagCollection> {\n  getIssueAttributes(): TagCollection;\n  getIssueTags(): TagCollection;\n  getStateTags(): TagCollection;\n  loadTagsSuccess(data: Tag[]): void;\n  reset(): void;\n  state: TagCollection;\n}\n\nconst storeConfig: TagStoreDefinition = {\n  state: {},\n  unsubscribeListeners: [],\n\n  init() {\n    this.state = {};\n  },\n\n  /**\n   * Gets only predefined issue attributes\n   */\n  getIssueAttributes() {\n    // TODO(mitsuhiko): what do we do with translations here?\n    const isSuggestions = [\n      'resolved',\n      'unresolved',\n      'ignored',\n      'assigned',\n      'for_review',\n      'unassigned',\n      'linked',\n      'unlinked',\n    ];\n\n    const sortedTagKeys = Object.keys(this.state).sort((a, b) => {\n      return a.toLowerCase().localeCompare(b.toLowerCase());\n    });\n\n    return {\n      [FieldKey.IS]: {\n        key: FieldKey.IS,\n        name: 'Status',\n        values: isSuggestions,\n        maxSuggestedValues: isSuggestions.length,\n        predefined: true,\n      },\n      [FieldKey.HAS]: {\n        key: FieldKey.HAS,\n        name: 'Has Tag',\n        values: sortedTagKeys,\n        predefined: true,\n      },\n      [FieldKey.ASSIGNED]: {\n        key: FieldKey.ASSIGNED,\n        name: 'Assigned To',\n        values: [],\n        predefined: true,\n      },\n      [FieldKey.BOOKMARKS]: {\n        key: FieldKey.BOOKMARKS,\n        name: 'Bookmarked By',\n        values: [],\n        predefined: true,\n      },\n      [FieldKey.LAST_SEEN]: {\n        key: FieldKey.LAST_SEEN,\n        name: 'Last Seen',\n        values: [],\n        predefined: false,\n      },\n      [FieldKey.FIRST_SEEN]: {\n        key: FieldKey.FIRST_SEEN,\n        name: 'First Seen',\n        values: [],\n        predefined: false,\n      },\n      [FieldKey.FIRST_RELEASE]: {\n        key: FieldKey.FIRST_RELEASE,\n        name: 'First Release',\n        values: ['latest'],\n        predefined: true,\n      },\n      [FieldKey.EVENT_TIMESTAMP]: {\n        key: FieldKey.EVENT_TIMESTAMP,\n        name: 'Event Timestamp',\n        values: [],\n        predefined: true,\n      },\n      [FieldKey.TIMES_SEEN]: {\n        key: FieldKey.TIMES_SEEN,\n        name: 'Times Seen',\n        isInput: true,\n        // Below values are required or else SearchBar will attempt to get values // This is required or else SearchBar will attempt to get values\n        values: [],\n        predefined: true,\n      },\n      [FieldKey.ASSIGNED_OR_SUGGESTED]: {\n        key: FieldKey.ASSIGNED_OR_SUGGESTED,\n        name: 'Assigned or Suggested',\n        isInput: true,\n        values: [],\n        predefined: true,\n      },\n    };\n  },\n\n  /**\n   * Get all tags including builtin issue tags and issue attributes\n   */\n  getIssueTags() {\n    return {\n      ...BUILTIN_TAGS,\n      ...SEMVER_TAGS,\n      // State tags should overwrite built ins.\n      ...this.state,\n      // We want issue attributes to overwrite any built in and state tags\n      ...this.getIssueAttributes(),\n    };\n  },\n\n  /**\n   * Get only tags loaded from the backend\n   */\n  getStateTags() {\n    return this.getState();\n  },\n\n  getState() {\n    return this.state;\n  },\n\n  reset() {\n    this.state = {};\n    this.trigger(this.state);\n  },\n\n  loadTagsSuccess(data) {\n    const newTags = data.reduce<TagCollection>((acc, tag) => {\n      acc[tag.key] = {\n        values: [],\n        ...tag,\n      };\n\n      return acc;\n    }, {});\n\n    this.state = {...this.state, ...newTags};\n    this.trigger(this.state);\n  },\n};\n\nconst TagStore = createStore(makeSafeRefluxStore(storeConfig));\nexport default TagStore;\n","import {OrganizationSummary} from 'sentry/types';\n\nimport EventView, {EventData} from './eventView';\n\n/**\n * Create a slug that can be used with discover details views\n * or as a reference event for event-stats requests\n */\nexport function generateEventSlug(eventData: EventData): string {\n  const id = eventData.id || eventData.latest_event;\n  const projectSlug = eventData.project || eventData['project.name'];\n\n  return `${projectSlug}:${id}`;\n}\n\n/**\n * Create a URL to an event details view.\n */\nexport function eventDetailsRoute({\n  eventSlug,\n  orgSlug,\n}: {\n  eventSlug: string;\n  orgSlug: string;\n}): string {\n  return `/organizations/${orgSlug}/discover/${eventSlug}/`;\n}\n\n/**\n * Create a URL target to event details with an event view in the query string.\n */\nexport function eventDetailsRouteWithEventView({\n  orgSlug,\n  eventSlug,\n  eventView,\n}: {\n  eventSlug: string;\n  eventView: EventView;\n  orgSlug: string;\n}) {\n  const pathname = eventDetailsRoute({\n    orgSlug,\n    eventSlug,\n  });\n\n  return {\n    pathname,\n    query: eventView.generateQueryStringObject(),\n  };\n}\n\n/**\n * Get the URL for the discover entry page which changes based on organization\n * feature flags.\n */\nexport function getDiscoverLandingUrl(organization: OrganizationSummary): string {\n  if (organization.features.includes('discover-query')) {\n    return `/organizations/${organization.slug}/discover/queries/`;\n  }\n  return `/organizations/${organization.slug}/discover/results/`;\n}\n","import {FunctionComponent} from 'react';\n\n/**\n * Returns a replacement component, this function is mocked in tests and will use the second argument.\n * (This only happens during tests)\n */\nexport default function getDynamicComponent<Original extends FunctionComponent>({\n  value,\n}: {\n  fixed: 'textarea';\n  value: Original;\n}): Original {\n  // Overridden with fixed in tests.\n  return value;\n}\n","// key maps and utils retrieved from https://github.com/jaywcjlove/hotkeys\n\n/**\n * Includes a lot of leftover unused codes for the future in case we\n * want glyphs for them\n */\nconst keyNameCodeMapping = {\n  backspace: 8,\n  tab: 9,\n  clear: 12,\n  enter: 13,\n  return: 13,\n  esc: 27,\n  escape: 27,\n  space: 32,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  del: 46,\n  delete: 46,\n  ins: 45,\n  insert: 45,\n  home: 36,\n  end: 35,\n  pageup: 33,\n  pagedown: 34,\n  capslock: 20,\n  num_0: 96,\n  num_1: 97,\n  num_2: 98,\n  num_3: 99,\n  num_4: 100,\n  num_5: 101,\n  num_6: 102,\n  num_7: 103,\n  num_8: 104,\n  num_9: 105,\n  num_multiply: 106,\n  num_add: 107,\n  num_enter: 108,\n  num_subtract: 109,\n  num_decimal: 110,\n  num_divide: 111,\n  '': 20,\n  ',': 188,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '-': 189,\n  '=': 187,\n  ';': 186,\n  \"'\": 222,\n  '[': 219,\n  ']': 221,\n  '\\\\': 220,\n};\n\n// Modifier Keys\nconst modifierNameKeyCodeMapping = {\n  // shiftKey\n  '': 16,\n  shift: 16,\n  // altKey\n  '': 18,\n  alt: 18,\n  option: 18,\n  // ctrlKey\n  '': 17,\n  ctrl: 17,\n  control: 17,\n  // metaKey\n  '': 91,\n  cmd: 91,\n  command: 91,\n};\n\nexport const getKeyCode = (x: string): number =>\n  keyNameCodeMapping[x.toLowerCase()] ||\n  modifierNameKeyCodeMapping[x.toLowerCase()] ||\n  x.toUpperCase().charCodeAt(0);\n","import Cookies from 'js-cookie';\n\nimport ConfigStore from 'sentry/stores/configStore';\n\nconst SUPERUSER_COOKIE_NAME = 'su';\n\n/**\n * Checking for just isSuperuser on a config object may not be enough as backend often checks for *active* superuser.\n * We therefore check both isSuperuser flag AND superuser session cookie.\n */\nexport function isActiveSuperuser() {\n  const {isSuperuser} = ConfigStore.get('user') || {};\n\n  if (isSuperuser) {\n    /**\n     * Superuser cookie cannot be checked for existence as it is HttpOnly.\n     * As a workaround, we try to change it to something else and if that fails we can assume that it's being present.\n     * There may be an edgecase where it's present and expired but for current usage it's not a big deal.\n     */\n    Cookies.set(SUPERUSER_COOKIE_NAME, 'test');\n\n    if (Cookies.get(SUPERUSER_COOKIE_NAME) === undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","import {Fragment} from 'react';\n\nimport useTeams from 'sentry/utils/useTeams';\n\ntype RenderProps = ReturnType<typeof useTeams>;\n\ntype Props = Parameters<typeof useTeams>[0] & {\n  children: (props: RenderProps) => React.ReactNode;\n};\n\n/**\n * This is a utility component to leverage the useTeams hook to provide\n * a render props component which returns teams through a variety of inputs\n * such as a list of slugs or user teams.\n */\nfunction Teams({children, ...props}: Props) {\n  const renderProps = useTeams(props);\n\n  return <Fragment>{children(renderProps)}</Fragment>;\n}\n\nexport default Teams;\n","import {useCallback, useEffect, useMemo} from 'react';\n\nimport {getKeyCode} from './getKeyCode';\n\nconst isKeyPressed = (key: string, evt: KeyboardEvent): boolean => {\n  const keyCode = getKeyCode(key);\n  switch (keyCode) {\n    case getKeyCode('command'):\n      return evt.metaKey;\n    case getKeyCode('shift'):\n      return evt.shiftKey;\n    case getKeyCode('ctrl'):\n      return evt.ctrlKey;\n    case getKeyCode('alt'):\n      return evt.altKey;\n    default:\n      return keyCode === evt.keyCode;\n  }\n};\n\n/**\n * Pass in the hotkey combinations under match and the corresponding callback function to be called.\n * Separate key names with +. For example, 'command+alt+shift+x'\n * Alternate matchings as an array: ['command+alt+backspace', 'ctrl+alt+delete']\n *\n * Note: you can only use one non-modifier (keys other than shift, ctrl, alt, command) key at a time.\n */\nexport function useHotkeys(\n  hotkeys: {callback: (e: KeyboardEvent) => void; match: string[] | string}[],\n  deps: React.DependencyList\n): void {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const memoizedHotkeys = useMemo(() => hotkeys, deps);\n\n  const onKeyDown = useCallback(\n    (evt: KeyboardEvent) => {\n      for (const set of memoizedHotkeys) {\n        const keysets = Array.isArray(set.match) ? set.match : [set.match];\n        for (const keyset of keysets) {\n          const keys = keyset.split('+');\n\n          if (keys.every(key => isKeyPressed(key, evt))) {\n            set.callback(evt);\n            return;\n          }\n        }\n      }\n    },\n    [memoizedHotkeys]\n  );\n\n  useEffect(() => {\n    document.addEventListener('keydown', onKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [onKeyDown]);\n}\n","import {useEffect, useMemo, useRef, useState} from 'react';\nimport uniqBy from 'lodash/uniqBy';\n\nimport {fetchUserTeams} from 'sentry/actionCreators/teams';\nimport TeamActions from 'sentry/actions/teamActions';\nimport {Client} from 'sentry/api';\nimport OrganizationStore from 'sentry/stores/organizationStore';\nimport TeamStore from 'sentry/stores/teamStore';\nimport {useLegacyStore} from 'sentry/stores/useLegacyStore';\nimport {Team} from 'sentry/types';\nimport {isActiveSuperuser} from 'sentry/utils/isActiveSuperuser';\nimport parseLinkHeader from 'sentry/utils/parseLinkHeader';\nimport RequestError from 'sentry/utils/requestError/requestError';\nimport useApi from 'sentry/utils/useApi';\n\ntype State = {\n  /**\n   * The error that occurred if fetching failed\n   */\n  fetchError: null | RequestError;\n  /**\n   * This is state for when fetching data from API\n   */\n  fetching: boolean;\n  /**\n   * Indicates that Team results (from API) are paginated and there are more\n   * Teams that are not in the initial response.\n   */\n  hasMore: null | boolean;\n  /**\n   * Reflects whether or not the initial fetch for the requested teams was\n   * fulfilled\n   */\n  initiallyLoaded: boolean;\n  /**\n   * The last query we searched. Used to validate the cursor\n   */\n  lastSearch: null | string;\n  /**\n   * Pagination\n   */\n  nextCursor?: null | string;\n};\n\ntype Result = {\n  /**\n   * This is an action provided to consumers for them to request more teams\n   * to be loaded. Additional teams will be fetched and loaded into the store.\n   */\n  loadMore: (searchTerm?: string) => Promise<void>;\n  /**\n   * This is an action provided to consumers for them to update the current\n   * teams result set using a simple search query.\n   *\n   * Will always add new options into the store.\n   */\n  onSearch: (searchTerm: string) => Promise<void>;\n  /**\n   * The loaded teams list\n   */\n  teams: Team[];\n} & Pick<State, 'fetching' | 'hasMore' | 'fetchError' | 'initiallyLoaded'>;\n\ntype Options = {\n  /**\n   * When provided, fetches specified teams by id if necessary and only provides those teams.\n   */\n  ids?: string[];\n  /**\n   * Number of teams to return when not using `props.slugs`\n   */\n  limit?: number;\n  /**\n   * When true, fetches user's teams if necessary and only provides user's\n   * teams (isMember = true).\n   */\n  provideUserTeams?: boolean;\n  /**\n   * When provided, fetches specified teams by slug if necessary and only provides those teams.\n   */\n  slugs?: string[];\n};\n\ntype FetchTeamOptions = {\n  cursor?: State['nextCursor'];\n  ids?: string[];\n  lastSearch?: State['lastSearch'];\n  limit?: Options['limit'];\n  search?: State['lastSearch'];\n  slugs?: string[];\n};\n\n/**\n * Helper function to actually load teams\n */\nasync function fetchTeams(\n  api: Client,\n  orgId: string,\n  {slugs, ids, search, limit, lastSearch, cursor}: FetchTeamOptions = {}\n) {\n  const query: {\n    cursor?: typeof cursor;\n    per_page?: number;\n    query?: string;\n  } = {};\n\n  if (slugs !== undefined && slugs.length > 0) {\n    query.query = slugs.map(slug => `slug:${slug}`).join(' ');\n  }\n\n  if (ids !== undefined && ids.length > 0) {\n    query.query = ids.map(id => `id:${id}`).join(' ');\n  }\n\n  if (search) {\n    query.query = `${query.query ?? ''} ${search}`.trim();\n  }\n\n  const isSameSearch = lastSearch === search || (!lastSearch && !search);\n\n  if (isSameSearch && cursor) {\n    query.cursor = cursor;\n  }\n\n  if (limit !== undefined) {\n    query.per_page = limit;\n  }\n\n  let hasMore: null | boolean = false;\n  let nextCursor: null | string = null;\n  const [data, , resp] = await api.requestPromise(`/organizations/${orgId}/teams/`, {\n    includeAllArgs: true,\n    query,\n  });\n\n  const pageLinks = resp?.getResponseHeader('Link');\n  if (pageLinks) {\n    const paginationObject = parseLinkHeader(pageLinks);\n    hasMore = paginationObject?.next?.results;\n    nextCursor = paginationObject?.next?.cursor;\n  }\n\n  return {results: data, hasMore, nextCursor};\n}\n\n// TODO: Paging for items which have already exist in the store is not\n// correctly implemented.\n\n/**\n * Provides teams from the TeamStore\n *\n * This hook also provides a way to select specific slugs to ensure they are\n * loaded, as well as search (type-ahead) for more slugs that may not be in the\n * TeamsStore.\n *\n * NOTE: It is NOT guaranteed that all teams for an organization will be\n * loaded, so you should use this hook with the intention of providing specific\n * slugs, or loading more through search.\n *\n */\nfunction useTeams({limit, slugs, ids, provideUserTeams}: Options = {}) {\n  const api = useApi();\n  const {organization} = useLegacyStore(OrganizationStore);\n  const store = useLegacyStore(TeamStore);\n\n  const orgId = organization?.slug;\n\n  const storeSlugs = new Set(store.teams.map(t => t.slug));\n  const slugsToLoad = slugs?.filter(slug => !storeSlugs.has(slug)) ?? [];\n  const storeIds = new Set(store.teams.map(t => t.id));\n  const idsToLoad = ids?.filter(id => !storeIds.has(id)) ?? [];\n  const shouldLoadSlugs = slugsToLoad.length > 0;\n  const shouldLoadIds = idsToLoad.length > 0;\n  const shouldLoadTeams = provideUserTeams && !store.loadedUserTeams;\n\n  // If we don't need to make a request either for slugs or user teams, set\n  // initiallyLoaded to true\n  const initiallyLoaded = !shouldLoadSlugs && !shouldLoadTeams && !shouldLoadIds;\n\n  const [state, setState] = useState<State>({\n    initiallyLoaded,\n    fetching: false,\n    hasMore: store.hasMore,\n    lastSearch: null,\n    nextCursor: store.cursor,\n    fetchError: null,\n  });\n\n  const slugOrIdRef = useRef<Set<string> | null>(null);\n\n  // Only initialize slugOrIdRef.current once and modify it when we receive new\n  // slugs or ids determined through set equality\n  if (slugs !== undefined || ids !== undefined) {\n    const slugsOrIds = (slugs || ids) ?? [];\n    if (slugOrIdRef.current === null) {\n      slugOrIdRef.current = new Set(slugsOrIds);\n    }\n\n    if (\n      slugsOrIds.length !== slugOrIdRef.current.size ||\n      slugsOrIds.some(slugOrId => !slugOrIdRef.current?.has(slugOrId))\n    ) {\n      slugOrIdRef.current = new Set(slugsOrIds);\n    }\n  }\n\n  async function loadUserTeams() {\n    if (orgId === undefined) {\n      return;\n    }\n\n    setState({...state, fetching: true});\n    try {\n      await fetchUserTeams(api, {orgId});\n\n      setState({...state, fetching: false, initiallyLoaded: true});\n    } catch (err) {\n      console.error(err); // eslint-disable-line no-console\n\n      setState({...state, fetching: false, initiallyLoaded: true, fetchError: err});\n    }\n  }\n\n  async function loadTeamsBySlugOrId() {\n    if (orgId === undefined) {\n      return;\n    }\n\n    setState({...state, fetching: true});\n    try {\n      const {results, hasMore, nextCursor} = await fetchTeams(api, orgId, {\n        slugs: slugsToLoad,\n        ids: idsToLoad,\n        limit,\n      });\n\n      // Unique by `id` to avoid duplicates due to renames and state store data\n      const fetchedTeams = uniqBy([...results, ...store.teams], ({id}) => id);\n      TeamActions.loadTeams(fetchedTeams);\n\n      setState({\n        ...state,\n        hasMore,\n        fetching: false,\n        initiallyLoaded: true,\n        nextCursor,\n      });\n    } catch (err) {\n      console.error(err); // eslint-disable-line no-console\n\n      setState({...state, fetching: false, initiallyLoaded: true, fetchError: err});\n    }\n  }\n\n  function handleSearch(search: string) {\n    if (search !== '') {\n      return handleFetchAdditionalTeams(search);\n    }\n\n    // Reset pagination state to match store if doing an empty search\n    if (state.hasMore !== store.hasMore || state.nextCursor !== store.cursor) {\n      setState({\n        ...state,\n        lastSearch: search,\n        hasMore: store.hasMore,\n        nextCursor: store.cursor,\n      });\n    }\n\n    return Promise.resolve();\n  }\n\n  async function handleFetchAdditionalTeams(search?: string) {\n    const {lastSearch} = state;\n    // Use the store cursor if there is no search keyword provided\n    const cursor = search ? state.nextCursor : store.cursor;\n\n    if (orgId === undefined) {\n      // eslint-disable-next-line no-console\n      console.error('Cannot fetch teams without an organization in context');\n      return;\n    }\n\n    setState({...state, fetching: true});\n\n    try {\n      api.clear();\n      const {results, hasMore, nextCursor} = await fetchTeams(api, orgId, {\n        search,\n        limit,\n        lastSearch,\n        cursor,\n      });\n\n      const fetchedTeams = uniqBy([...store.teams, ...results], ({slug}) => slug);\n\n      if (search) {\n        // Only update the store if we have more items\n        if (fetchedTeams.length > store.teams.length) {\n          TeamActions.loadTeams(fetchedTeams);\n        }\n      } else {\n        // If we fetched a page of teams without a search query, add cursor data to the store\n        TeamActions.loadTeams(fetchedTeams, hasMore, nextCursor);\n      }\n\n      setState({\n        ...state,\n        hasMore: hasMore && store.hasMore,\n        fetching: false,\n        lastSearch: search ?? null,\n        nextCursor,\n      });\n    } catch (err) {\n      console.error(err); // eslint-disable-line no-console\n\n      setState({...state, fetching: false, fetchError: err});\n    }\n  }\n\n  useEffect(() => {\n    // Load specified team slugs\n    if (shouldLoadSlugs || shouldLoadIds) {\n      loadTeamsBySlugOrId();\n      return;\n    }\n\n    // Load user teams\n    if (shouldLoadTeams) {\n      loadUserTeams();\n    }\n  }, [slugOrIdRef.current, provideUserTeams]);\n\n  const isSuperuser = isActiveSuperuser();\n\n  const filteredTeams = useMemo(() => {\n    return slugs\n      ? store.teams.filter(t => slugs.includes(t.slug))\n      : ids\n      ? store.teams.filter(t => ids.includes(t.id))\n      : provideUserTeams && !isSuperuser\n      ? store.teams.filter(t => t.isMember)\n      : store.teams;\n  }, [store.teams, ids, slugs, provideUserTeams, isSuperuser]);\n\n  const result: Result = {\n    teams: filteredTeams,\n    fetching: state.fetching || store.loading,\n    initiallyLoaded: state.initiallyLoaded,\n    fetchError: state.fetchError,\n    hasMore: state.hasMore ?? store.hasMore,\n    onSearch: handleSearch,\n    loadMore: handleFetchAdditionalTeams,\n  };\n\n  return result;\n}\n\nexport default useTeams;\n","import {useCallback, useEffect, useState} from 'react';\n\nimport MemberListStore from 'sentry/stores/memberListStore';\nimport TagStore from 'sentry/stores/tagStore';\nimport TeamStore from 'sentry/stores/teamStore';\nimport {TagCollection, Team, User} from 'sentry/types';\nimport getDisplayName from 'sentry/utils/getDisplayName';\n\nexport interface WithIssueTagsProps {\n  tags: TagCollection;\n}\n\nconst uuidPattern = /[0-9a-f]{32}$/;\nconst getUsername = ({isManaged, username, email}: User) => {\n  // Users created via SAML receive unique UUID usernames. Use\n  // their email in these cases, instead.\n  if (username && uuidPattern.test(username)) {\n    return email;\n  }\n  return !isManaged && username ? username : email;\n};\n\ntype WrappedComponentState = {\n  tags: TagCollection;\n  teams: Team[];\n  users: User[];\n};\n/**\n * HOC for getting tags and many useful issue attributes as 'tags' for use\n * in autocomplete selectors or condition builders.\n */\nfunction withIssueTags<Props extends WithIssueTagsProps>(\n  WrappedComponent: React.ComponentType<Props>\n) {\n  function ComponentWithTags(props: Omit<Props, keyof WithIssueTagsProps>) {\n    const [state, setState] = useState<WrappedComponentState>({\n      tags: TagStore.getIssueTags(),\n      users: MemberListStore.getAll(),\n      teams: TeamStore.getAll(),\n    });\n\n    const setAssigned = useCallback((newState: Partial<WrappedComponentState>) => {\n      setState(oldState => {\n        const usernames: string[] = newState.users\n          ? newState.users.map(getUsername)\n          : oldState.users.map(getUsername);\n\n        const teamnames: string[] = (newState.teams ? newState.teams : oldState.teams)\n          .filter(team => team.isMember)\n          .map(team => `#${team.slug}`);\n\n        const allAssigned = ['[me, none]', ...usernames, ...teamnames];\n        allAssigned.unshift('me');\n        usernames.unshift('me');\n\n        return {\n          ...oldState,\n          ...newState,\n          tags: {\n            ...oldState.tags,\n            ...newState.tags,\n            assigned: {\n              ...(newState.tags?.assigned ?? oldState.tags?.assigned ?? {}),\n              values: allAssigned,\n            },\n            bookmarks: {\n              ...(newState.tags?.bookmarks ?? oldState.tags?.bookmarks ?? {}),\n              values: usernames,\n            },\n            assigned_or_suggested: {\n              ...(newState.tags?.assigned_or_suggested ??\n                oldState.tags.assigned_or_suggested ??\n                {}),\n              values: allAssigned,\n            },\n          },\n        };\n      });\n    }, []);\n\n    // Listen to team store updates and cleanup listener on unmount\n    useEffect(() => {\n      const unsubscribeTeam = TeamStore.listen(() => {\n        setAssigned({teams: TeamStore.getAll()});\n      }, undefined);\n\n      return () => unsubscribeTeam();\n    }, [setAssigned]);\n\n    // Listen to tag store updates and cleanup listener on unmount\n    useEffect(() => {\n      const unsubscribeTags = TagStore.listen(() => {\n        setAssigned({tags: TagStore.getIssueTags()});\n      }, undefined);\n\n      return () => unsubscribeTags();\n    }, [setAssigned]);\n\n    // Listen to member store updates and cleanup listener on unmount\n    useEffect(() => {\n      const unsubscribeMembers = MemberListStore.listen((users: User[]) => {\n        setAssigned({users});\n      }, undefined);\n\n      return () => unsubscribeMembers();\n    }, [setAssigned]);\n\n    return <WrappedComponent {...(props as Props)} tags={state.tags} />;\n  }\n  ComponentWithTags.displayName = `withIssueTags(${getDisplayName(WrappedComponent)})`;\n  return ComponentWithTags;\n}\n\nexport default withIssueTags;\n","import {Component} from 'react';\n\nimport {addLoadingMessage, clearIndicators} from 'sentry/actionCreators/indicator';\nimport {ModalRenderProps} from 'sentry/actionCreators/modal';\nimport {createSavedSearch} from 'sentry/actionCreators/savedSearches';\nimport {Client} from 'sentry/api';\nimport Alert from 'sentry/components/alert';\nimport {Form, SelectField, TextField} from 'sentry/components/forms';\nimport {OnSubmitCallback} from 'sentry/components/forms/type';\nimport {t} from 'sentry/locale';\nimport {Organization} from 'sentry/types';\nimport withApi from 'sentry/utils/withApi';\n\nimport {getSortLabel, IssueSortOptions} from './utils';\n\ntype Props = ModalRenderProps & {\n  api: Client;\n  organization: Organization;\n  query: string;\n  sort?: string;\n};\n\ntype State = {\n  error: string | null;\n  isSaving: boolean;\n};\n\nconst DEFAULT_SORT_OPTIONS = [\n  IssueSortOptions.DATE,\n  IssueSortOptions.NEW,\n  IssueSortOptions.FREQ,\n  IssueSortOptions.PRIORITY,\n  IssueSortOptions.USER,\n];\n\nclass CreateSavedSearchModal extends Component<Props, State> {\n  state: State = {\n    isSaving: false,\n    error: null,\n  };\n\n  /** Handle \"date added\" sort not being available for saved searches */\n  validateSortOption(sort?: string | null): string {\n    if (this.sortOptions().find(option => option === sort)) {\n      return sort as string;\n    }\n\n    return IssueSortOptions.DATE;\n  }\n\n  handleSubmit: OnSubmitCallback = (data, onSubmitSuccess, onSubmitError, event) => {\n    const {api, organization} = this.props;\n    const sort = this.validateSortOption(data.sort);\n\n    event.preventDefault();\n\n    this.setState({isSaving: true});\n\n    addLoadingMessage(t('Saving Changes'));\n\n    createSavedSearch(api, organization.slug, data.name, data.query, sort)\n      .then(_data => {\n        this.props.closeModal();\n        this.setState({\n          error: null,\n          isSaving: false,\n        });\n        clearIndicators();\n        onSubmitSuccess(data);\n      })\n      .catch(err => {\n        let error = t('Unable to save your changes.');\n        if (err.responseJSON && err.responseJSON.detail) {\n          error = err.responseJSON.detail;\n        }\n        this.setState({\n          error,\n          isSaving: false,\n        });\n        clearIndicators();\n        onSubmitError(error);\n      });\n  };\n\n  sortOptions() {\n    const {organization} = this.props;\n    const options = [...DEFAULT_SORT_OPTIONS];\n    if (organization?.features?.includes('issue-list-trend-sort')) {\n      options.push(IssueSortOptions.TREND);\n    }\n\n    return options;\n  }\n\n  render() {\n    const {error} = this.state;\n    const {Header, Body, closeModal, query, sort} = this.props;\n\n    const sortOptions = this.sortOptions().map(sortOption => ({\n      value: sortOption,\n      label: getSortLabel(sortOption),\n    }));\n    const initialData = {\n      name: '',\n      query,\n      sort: this.validateSortOption(sort),\n    };\n\n    return (\n      <Form\n        onSubmit={this.handleSubmit}\n        onCancel={closeModal}\n        saveOnBlur={false}\n        initialData={initialData}\n        submitLabel={t('Save')}\n      >\n        <Header>\n          <h4>{t('Save Current Search')}</h4>\n        </Header>\n\n        <Body>\n          {this.state.error && <Alert type=\"error\">{error}</Alert>}\n\n          <p>{t('All team members will now have access to this search.')}</p>\n          <TextField\n            key=\"name\"\n            name=\"name\"\n            label={t('Name')}\n            placeholder=\"e.g. My Search Results\"\n            inline={false}\n            stacked\n            flexibleControlStateSize\n            required\n          />\n          <TextField\n            key=\"query\"\n            name=\"query\"\n            label={t('Query')}\n            inline={false}\n            stacked\n            flexibleControlStateSize\n            required\n          />\n          <SelectField\n            key=\"sort\"\n            name=\"sort\"\n            label={t('Sort By')}\n            options={sortOptions}\n            required\n            clearable={false}\n            inline={false}\n            stacked\n            flexibleControlStateSize\n          />\n        </Body>\n      </Form>\n    );\n  }\n}\n\nexport default withApi(CreateSavedSearchModal);\n","import {useCallback} from 'react';\n\nimport SmartSearchBar from 'sentry/components/smartSearchBar';\nimport {\n  makePinSearchAction,\n  makeSaveSearchAction,\n  makeSearchBuilderAction,\n} from 'sentry/components/smartSearchBar/actions';\nimport {SavedSearch, SavedSearchType, Tag} from 'sentry/types';\nimport {FieldKind, getFieldDefinition} from 'sentry/utils/fields';\n\nimport {TagValueLoader} from './types';\n\nconst getSupportedTags = (supportedTags: {[key: string]: Tag}) =>\n  Object.fromEntries(\n    Object.keys(supportedTags).map(key => [\n      key,\n      {\n        ...supportedTags[key],\n        kind:\n          getFieldDefinition(key)?.kind ??\n          (supportedTags[key].predefined ? FieldKind.FIELD : FieldKind.TAG),\n      },\n    ])\n  );\n\ninterface Props extends React.ComponentProps<typeof SmartSearchBar> {\n  onSidebarToggle: (e: React.MouseEvent) => void;\n  sort: string;\n  supportedTags: {[key: string]: Tag};\n  tagValueLoader: TagValueLoader;\n  savedSearch?: SavedSearch;\n}\n\nfunction IssueListSearchBar({\n  onSidebarToggle,\n  sort,\n  supportedTags,\n  tagValueLoader,\n  savedSearch,\n  ...props\n}: Props) {\n  const getTagValues = useCallback(\n    async (tag: Tag, query: string): Promise<string[]> => {\n      const values = await tagValueLoader(tag.key, query);\n      return values.map(({value}) => value);\n    },\n    [tagValueLoader]\n  );\n\n  const pinnedSearch = savedSearch?.isPinned ? savedSearch : undefined;\n\n  return (\n    <SmartSearchBar\n      searchSource=\"main_search\"\n      hasRecentSearches\n      savedSearchType={SavedSearchType.ISSUE}\n      onGetTagValues={getTagValues}\n      actionBarItems={[\n        makePinSearchAction({sort, pinnedSearch}),\n        makeSaveSearchAction({sort}),\n        makeSearchBuilderAction({onSidebarToggle}),\n      ]}\n      {...props}\n      maxMenuHeight={500}\n      supportedTags={getSupportedTags(supportedTags)}\n    />\n  );\n}\n\nexport default IssueListSearchBar;\n","import ExternalLink from 'sentry/components/links/externalLink';\nimport {t, tct} from 'sentry/locale';\nimport {Organization} from 'sentry/types';\n\nexport enum Query {\n  FOR_REVIEW = 'is:unresolved is:for_review assigned_or_suggested:[me, none]',\n  UNRESOLVED = 'is:unresolved',\n  IGNORED = 'is:ignored',\n  REPROCESSING = 'is:reprocessing',\n}\n\ntype OverviewTab = {\n  /** Emitted analytics event tab name  */\n  analyticsName: string;\n  /** Will fetch a count to display on this tab */\n  count: boolean;\n  /** Tabs can be disabled via flag */\n  enabled: boolean;\n  name: string;\n  /** Tooltip text for each tab */\n  tooltipTitle: React.ReactNode;\n  /** Tooltip text to be hoverable when text has links */\n  tooltipHoverable?: boolean;\n};\n\n/**\n * Get a list of currently active tabs\n */\nexport function getTabs(organization: Organization) {\n  const tabs: Array<[string, OverviewTab]> = [\n    [\n      Query.UNRESOLVED,\n      {\n        name: t('All Unresolved'),\n        analyticsName: 'unresolved',\n        count: true,\n        enabled: true,\n        tooltipTitle: t(`All unresolved issues.`),\n      },\n    ],\n    [\n      Query.FOR_REVIEW,\n      {\n        name: t('For Review'),\n        analyticsName: 'needs_review',\n        count: true,\n        enabled: true,\n        tooltipTitle:\n          t(`Issues are marked for review when they are created, unresolved, or unignored.\n          Mark an issue reviewed to move it out of this list.\n          Issues are automatically marked reviewed in 7 days.`),\n      },\n    ],\n    [\n      Query.IGNORED,\n      {\n        name: t('Ignored'),\n        analyticsName: 'ignored',\n        count: true,\n        enabled: true,\n        tooltipTitle: t(`Ignored issues dont trigger alerts. When their ignore\n        conditions are met they become Unresolved and are flagged for review.`),\n      },\n    ],\n    [\n      Query.REPROCESSING,\n      {\n        name: t('Reprocessing'),\n        analyticsName: 'reprocessing',\n        count: true,\n        enabled: organization.features.includes('reprocessing-v2'),\n        tooltipTitle: tct(\n          `These [link:reprocessing issues] will take some time to complete.\n        Any new issues that are created during reprocessing will be flagged for review.`,\n          {\n            link: (\n              <ExternalLink href=\"https://docs.sentry.io/product/error-monitoring/reprocessing/\" />\n            ),\n          }\n        ),\n        tooltipHoverable: true,\n      },\n    ],\n  ];\n\n  return tabs.filter(([_query, tab]) => tab.enabled);\n}\n\n/**\n * @returns queries that should have counts fetched\n */\nexport function getTabsWithCounts(organization: Organization) {\n  const tabs = getTabs(organization);\n  return tabs.filter(([_query, tab]) => tab.count).map(([query]) => query);\n}\n\nexport function isForReviewQuery(query: string | undefined) {\n  return !!query && /\\bis:for_review\\b/.test(query);\n}\n\n// the tab counts will look like 99+\nexport const TAB_MAX_COUNT = 99;\n\ntype QueryCount = {\n  count: number;\n  hasMore: boolean;\n};\n\nexport type QueryCounts = Partial<Record<Query, QueryCount>>;\n\nexport enum IssueSortOptions {\n  DATE = 'date',\n  NEW = 'new',\n  PRIORITY = 'priority',\n  FREQ = 'freq',\n  USER = 'user',\n  TREND = 'trend',\n  INBOX = 'inbox',\n}\n\nexport function getSortLabel(key: string) {\n  switch (key) {\n    case IssueSortOptions.NEW:\n      return t('First Seen');\n    case IssueSortOptions.PRIORITY:\n      return t('Priority');\n    case IssueSortOptions.FREQ:\n      return t('Events');\n    case IssueSortOptions.USER:\n      return t('Users');\n    case IssueSortOptions.TREND:\n      return t('Relative Change');\n    case IssueSortOptions.INBOX:\n      return t('Date Added');\n    case IssueSortOptions.DATE:\n    default:\n      return t('Last Seen');\n  }\n}\n\nexport const DISCOVER_EXCLUSION_FIELDS: string[] = [\n  'query',\n  'status',\n  'bookmarked_by',\n  'assigned',\n  'assigned_to',\n  'unassigned',\n  'subscribed_by',\n  'active_at',\n  'first_release',\n  'first_seen',\n  'is',\n  '__text',\n];\n","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { search: peg$parsesearch },\n      peg$startRuleFunction  = peg$parsesearch,\n\n      peg$c0 = function(space, terms) {\n            return [space, ...terms.flat()];\n          },\n      peg$c1 = function() {\n            return tc.tokenLogicBoolean(text().toUpperCase());\n          },\n      peg$c2 = function(spaces, inner) {\n            return tc.tokenLogicGroup([spaces, ...inner].flat());\n          },\n      peg$c3 = /^[^()\\n ]/,\n      peg$c4 = peg$classExpectation([\"(\", \")\", \"\\n\", \" \"], true, false),\n      peg$c5 = function() {\n            return tc.tokenFreeText(text(), false);\n          },\n      peg$c6 = function(value) {\n            return tc.tokenFreeText(value.value, true);\n          },\n      peg$c7 = function(key, op, value) {\n            return tc.predicateFilter(FilterType.Date, key, value, op)\n          },\n      peg$c8 = function(key, op, value) {\n            return tc.tokenFilter(FilterType.Date, key, value, op, false);\n          },\n      peg$c9 = function(key, value) {\n            return tc.predicateFilter(FilterType.SpecificDate, key)\n          },\n      peg$c10 = function(key, value) {\n            return tc.tokenFilter(FilterType.SpecificDate, key, value, opDefault, false);\n          },\n      peg$c11 = function(key, value) {\n            return tc.predicateFilter(FilterType.RelativeDate, key)\n          },\n      peg$c12 = function(key, value) {\n            return tc.tokenFilter(FilterType.RelativeDate, key, value, opDefault, false);\n          },\n      peg$c13 = function(negation, key, op, value) {\n            return tc.predicateFilter(FilterType.Duration, key)\n          },\n      peg$c14 = function(negation, key, op, value) {\n            return tc.tokenFilter(FilterType.Duration, key, value, op, !!negation);\n          },\n      peg$c15 = function(negation, key, value) {\n            return tc.predicateFilter(FilterType.Boolean, key)\n          },\n      peg$c16 = function(negation, key, value) {\n            return tc.tokenFilter(FilterType.Boolean, key, value, opDefault, !!negation);\n          },\n      peg$c17 = function(negation, key, value) {\n            return tc.predicateFilter(FilterType.NumericIn, key)\n          },\n      peg$c18 = function(negation, key, value) {\n            return tc.tokenFilter(FilterType.NumericIn, key, value, opDefault, !!negation);\n          },\n      peg$c19 = function(negation, key, op, value) {\n            return tc.predicateFilter(FilterType.Numeric, key)\n          },\n      peg$c20 = function(negation, key, op, value) {\n            return tc.tokenFilter(FilterType.Numeric, key, value, op, !!negation);\n          },\n      peg$c21 = function(negation, key, op, value) {\n            return tc.predicateFilter(FilterType.AggregateDuration, key)\n        },\n      peg$c22 = function(negation, key, op, value) {\n            return tc.tokenFilter(FilterType.AggregateDuration, key, value, op, !!negation);\n          },\n      peg$c23 = function(negation, key, op, value) {\n            return tc.predicateFilter(FilterType.AggregatePercentage, key)\n          },\n      peg$c24 = function(negation, key, op, value) {\n            return tc.tokenFilter(FilterType.AggregatePercentage, key, value, op, !!negation);\n          },\n      peg$c25 = function(negation, key, op, value) {\n            return tc.predicateFilter(FilterType.AggregateNumeric, key)\n          },\n      peg$c26 = function(negation, key, op, value) {\n            return tc.tokenFilter(FilterType.AggregateNumeric, key, value, op, !!negation);\n          },\n      peg$c27 = function(negation, key, op, value) {\n            return tc.predicateFilter(FilterType.AggregateDate, key)\n          },\n      peg$c28 = function(negation, key, op, value) {\n            return tc.tokenFilter(FilterType.AggregateDate, key, value, op, !!negation);\n          },\n      peg$c29 = function(negation, key, op, value) {\n            return tc.predicateFilter(FilterType.AggregateRelativeDate, key)\n          },\n      peg$c30 = function(negation, key, op, value) {\n            return tc.tokenFilter(FilterType.AggregateRelativeDate, key, value, op, !!negation);\n          },\n      peg$c31 = \"has:\",\n      peg$c32 = peg$literalExpectation(\"has:\", false),\n      peg$c33 = function(negation, key, value) {\n            return tc.predicateFilter(FilterType.Has, key)\n          },\n      peg$c34 = function(negation, key, value) {\n            return tc.tokenFilter(FilterType.Has, key, value, opDefault, !!negation);\n          },\n      peg$c35 = \"is:\",\n      peg$c36 = peg$literalExpectation(\"is:\", false),\n      peg$c37 = function(negation, key, value) {\n            return tc.predicateFilter(FilterType.Is, key)\n          },\n      peg$c38 = function(negation, key, value) {\n            return tc.tokenFilter(FilterType.Is, key, value, opDefault, !!negation);\n          },\n      peg$c39 = function(negation, key, value) {\n            return tc.predicateFilter(FilterType.TextIn, key)\n          },\n      peg$c40 = function(negation, key, value) {\n            return tc.tokenFilter(FilterType.TextIn, key, value, opDefault, !!negation);\n          },\n      peg$c41 = function(negation, key) { return tc.predicateTextOperator(key); },\n      peg$c42 = function(negation, key, op, value) {\n            return tc.predicateFilter(FilterType.Text, key)\n          },\n      peg$c43 = function(negation, key, op, value) {\n            return tc.tokenFilter(FilterType.Text, key, value, op ? op[0] : opDefault, !!negation);\n          },\n      peg$c44 = /^[a-zA-Z0-9_.\\-]/,\n      peg$c45 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"_\", \".\", \"-\"], false, false),\n      peg$c46 = function(value) {\n            return tc.tokenKeySimple(value.join(''), false);\n          },\n      peg$c47 = \"\\\"\",\n      peg$c48 = peg$literalExpectation(\"\\\"\", false),\n      peg$c49 = /^[a-zA-Z0-9_.:\\-]/,\n      peg$c50 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"_\", \".\", \":\", \"-\"], false, false),\n      peg$c51 = function(key) {\n            return tc.tokenKeySimple(key.join(''), true);\n          },\n      peg$c52 = \"tags\",\n      peg$c53 = peg$literalExpectation(\"tags\", false),\n      peg$c54 = function(prefix, key) {\n            return tc.tokenKeyExplicitTag(prefix, key);\n          },\n      peg$c55 = function(name, s1, args, s2) {\n            return tc.tokenKeyAggregate(name, args, s1, s2);\n          },\n      peg$c56 = function(arg1, args) {\n            return tc.tokenKeyAggregateArgs(arg1, args);\n          },\n      peg$c57 = /^[^()\\t\\n, \"]/,\n      peg$c58 = peg$classExpectation([\"(\", \")\", \"\\t\", \"\\n\", \",\", \" \", \"\\\"\"], true, false),\n      peg$c59 = function(param) {\n            return tc.tokenKeyAggregateParam(param.join(''), false);\n          },\n      peg$c60 = \"\\\\\\\"\",\n      peg$c61 = peg$literalExpectation(\"\\\\\\\"\", false),\n      peg$c62 = /^[^\\t\\n\"]/,\n      peg$c63 = peg$classExpectation([\"\\t\", \"\\n\", \"\\\"\"], true, false),\n      peg$c64 = function(param) {\n            return tc.tokenKeyAggregateParam(`\"${param.join('')}\"`, true);\n          },\n      peg$c65 = /^[^()\\t\\n ]/,\n      peg$c66 = peg$classExpectation([\"(\", \")\", \"\\t\", \"\\n\", \" \"], true, false),\n      peg$c67 = function(value) {\n            return tc.tokenValueText(value.join(''), false);\n          },\n      peg$c68 = /^[^\"]/,\n      peg$c69 = peg$classExpectation([\"\\\"\"], true, false),\n      peg$c70 = function(value) {\n            return tc.tokenValueText(value.join(''), true);\n          },\n      peg$c71 = function() {\n              return tc.tokenValueText(text(), false);\n          },\n      peg$c72 = \"-\",\n      peg$c73 = peg$literalExpectation(\"-\", false),\n      peg$c74 = /^[kmb]/,\n      peg$c75 = peg$classExpectation([\"k\", \"m\", \"b\"], false, false),\n      peg$c76 = function(value, unit) {\n            return tc.tokenValueNumber(value.join(''), unit);\n          },\n      peg$c77 = \"true\",\n      peg$c78 = peg$literalExpectation(\"true\", true),\n      peg$c79 = \"1\",\n      peg$c80 = peg$literalExpectation(\"1\", false),\n      peg$c81 = \"false\",\n      peg$c82 = peg$literalExpectation(\"false\", true),\n      peg$c83 = \"0\",\n      peg$c84 = peg$literalExpectation(\"0\", false),\n      peg$c85 = function(value) {\n            return tc.tokenValueBoolean(value);\n          },\n      peg$c86 = function(item1, items) {\n            return tc.tokenValueTextList(item1, items);\n          },\n      peg$c87 = function(item1, items) {\n            return tc.tokenValueNumberList(item1, items);\n          },\n      peg$c88 = /^[^(), ]/,\n      peg$c89 = peg$classExpectation([\"(\", \")\", \",\", \" \"], true, false),\n      peg$c90 = /^[0-9]/,\n      peg$c91 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n      peg$c92 = \"T\",\n      peg$c93 = peg$literalExpectation(\"T\", false),\n      peg$c94 = \":\",\n      peg$c95 = peg$literalExpectation(\":\", false),\n      peg$c96 = \".\",\n      peg$c97 = peg$literalExpectation(\".\", false),\n      peg$c98 = /^[+\\-]/,\n      peg$c99 = peg$classExpectation([\"+\", \"-\"], false, false),\n      peg$c100 = \"Z\",\n      peg$c101 = peg$literalExpectation(\"Z\", false),\n      peg$c102 = function() {\n            return tc.tokenValueIso8601Date(text());\n          },\n      peg$c103 = /^[wdhm]/,\n      peg$c104 = peg$classExpectation([\"w\", \"d\", \"h\", \"m\"], false, false),\n      peg$c105 = function(sign, value, unit) {\n            return tc.tokenValueRelativeDate(value.join(''), sign, unit);\n          },\n      peg$c106 = \"ms\",\n      peg$c107 = peg$literalExpectation(\"ms\", false),\n      peg$c108 = \"s\",\n      peg$c109 = peg$literalExpectation(\"s\", false),\n      peg$c110 = \"min\",\n      peg$c111 = peg$literalExpectation(\"min\", false),\n      peg$c112 = \"m\",\n      peg$c113 = peg$literalExpectation(\"m\", false),\n      peg$c114 = \"hr\",\n      peg$c115 = peg$literalExpectation(\"hr\", false),\n      peg$c116 = \"h\",\n      peg$c117 = peg$literalExpectation(\"h\", false),\n      peg$c118 = \"day\",\n      peg$c119 = peg$literalExpectation(\"day\", false),\n      peg$c120 = \"d\",\n      peg$c121 = peg$literalExpectation(\"d\", false),\n      peg$c122 = \"wk\",\n      peg$c123 = peg$literalExpectation(\"wk\", false),\n      peg$c124 = \"w\",\n      peg$c125 = peg$literalExpectation(\"w\", false),\n      peg$c126 = function(value, unit) {\n            return tc.tokenValueDuration(value, unit);\n          },\n      peg$c127 = \"%\",\n      peg$c128 = peg$literalExpectation(\"%\", false),\n      peg$c129 = function(value) {\n            return tc.tokenValuePercentage(value);\n          },\n      peg$c130 = \">=\",\n      peg$c131 = peg$literalExpectation(\">=\", false),\n      peg$c132 = \"<=\",\n      peg$c133 = peg$literalExpectation(\"<=\", false),\n      peg$c134 = \">\",\n      peg$c135 = peg$literalExpectation(\">\", false),\n      peg$c136 = \"<\",\n      peg$c137 = peg$literalExpectation(\"<\", false),\n      peg$c138 = \"=\",\n      peg$c139 = peg$literalExpectation(\"=\", false),\n      peg$c140 = \"!=\",\n      peg$c141 = peg$literalExpectation(\"!=\", false),\n      peg$c142 = \"or\",\n      peg$c143 = peg$literalExpectation(\"OR\", true),\n      peg$c144 = \"and\",\n      peg$c145 = peg$literalExpectation(\"AND\", true),\n      peg$c146 = function() { return text(); },\n      peg$c147 = \"(\",\n      peg$c148 = peg$literalExpectation(\"(\", false),\n      peg$c149 = \")\",\n      peg$c150 = peg$literalExpectation(\")\", false),\n      peg$c151 = \"[\",\n      peg$c152 = peg$literalExpectation(\"[\", false),\n      peg$c153 = \"]\",\n      peg$c154 = peg$literalExpectation(\"]\", false),\n      peg$c155 = \"!\",\n      peg$c156 = peg$literalExpectation(\"!\", false),\n      peg$c157 = \",\",\n      peg$c158 = peg$literalExpectation(\",\", false),\n      peg$c159 = \" \",\n      peg$c160 = peg$literalExpectation(\" \", false),\n      peg$c161 = function() { return tc.tokenSpaces(text()) },\n      peg$c162 = /^[\\t\\n )]/,\n      peg$c163 = peg$classExpectation([\"\\t\", \"\\n\", \" \", \")\"], false, false),\n      peg$c164 = peg$anyExpectation(),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsesearch() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsespaces();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parseterm();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parseterm();\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c0(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseterm() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parseboolean_operator();\n    if (s1 === peg$FAILED) {\n      s1 = peg$parseparen_group();\n      if (s1 === peg$FAILED) {\n        s1 = peg$parsefilter();\n        if (s1 === peg$FAILED) {\n          s1 = peg$parsefree_text();\n        }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsespaces();\n      if (s2 !== peg$FAILED) {\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseboolean_operator() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parseor_operator();\n    if (s1 === peg$FAILED) {\n      s1 = peg$parseand_operator();\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c1();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseparen_group() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$parseopen_paren();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsespaces();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parseterm();\n        if (s4 !== peg$FAILED) {\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseterm();\n          }\n        } else {\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseclosed_paren();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c2(s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsefree_text() {\n    var s0;\n\n    s0 = peg$parsefree_text_quoted();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsefree_text_unquoted();\n    }\n\n    return s0;\n  }\n\n  function peg$parsefree_text_unquoted() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$currPos;\n    s3 = peg$currPos;\n    peg$silentFails++;\n    s4 = peg$parsefilter();\n    peg$silentFails--;\n    if (s4 === peg$FAILED) {\n      s3 = void 0;\n    } else {\n      peg$currPos = s3;\n      s3 = peg$FAILED;\n    }\n    if (s3 !== peg$FAILED) {\n      s4 = peg$currPos;\n      peg$silentFails++;\n      s5 = peg$parseboolean_operator();\n      peg$silentFails--;\n      if (s5 === peg$FAILED) {\n        s4 = void 0;\n      } else {\n        peg$currPos = s4;\n        s4 = peg$FAILED;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsefree_parens();\n        if (s5 === peg$FAILED) {\n          s5 = [];\n          if (peg$c3.test(input.charAt(peg$currPos))) {\n            s6 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s6 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c4); }\n          }\n          if (s6 !== peg$FAILED) {\n            while (s6 !== peg$FAILED) {\n              s5.push(s6);\n              if (peg$c3.test(input.charAt(peg$currPos))) {\n                s6 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n              }\n            }\n          } else {\n            s5 = peg$FAILED;\n          }\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsespaces();\n          if (s6 !== peg$FAILED) {\n            s3 = [s3, s4, s5, s6];\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s2;\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$currPos;\n        s3 = peg$currPos;\n        peg$silentFails++;\n        s4 = peg$parsefilter();\n        peg$silentFails--;\n        if (s4 === peg$FAILED) {\n          s3 = void 0;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$currPos;\n          peg$silentFails++;\n          s5 = peg$parseboolean_operator();\n          peg$silentFails--;\n          if (s5 === peg$FAILED) {\n            s4 = void 0;\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsefree_parens();\n            if (s5 === peg$FAILED) {\n              s5 = [];\n              if (peg$c3.test(input.charAt(peg$currPos))) {\n                s6 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n              }\n              if (s6 !== peg$FAILED) {\n                while (s6 !== peg$FAILED) {\n                  s5.push(s6);\n                  if (peg$c3.test(input.charAt(peg$currPos))) {\n                    s6 = input.charAt(peg$currPos);\n                    peg$currPos++;\n                  } else {\n                    s6 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c4); }\n                  }\n                }\n              } else {\n                s5 = peg$FAILED;\n              }\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parsespaces();\n              if (s6 !== peg$FAILED) {\n                s3 = [s3, s4, s5, s6];\n                s2 = s3;\n              } else {\n                peg$currPos = s2;\n                s2 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s2;\n              s2 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c5();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefree_text_quoted() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parsequoted_value();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c6(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefree_parens() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parseopen_paren();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsefree_text();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseclosed_paren();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsefilter() {\n    var s0;\n\n    s0 = peg$parsedate_filter();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsespecific_date_filter();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parserel_date_filter();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseduration_filter();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseboolean_filter();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parsenumeric_in_filter();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parsenumeric_filter();\n                if (s0 === peg$FAILED) {\n                  s0 = peg$parseaggregate_duration_filter();\n                  if (s0 === peg$FAILED) {\n                    s0 = peg$parseaggregate_numeric_filter();\n                    if (s0 === peg$FAILED) {\n                      s0 = peg$parseaggregate_percentage_filter();\n                      if (s0 === peg$FAILED) {\n                        s0 = peg$parseaggregate_date_filter();\n                        if (s0 === peg$FAILED) {\n                          s0 = peg$parseaggregate_rel_date_filter();\n                          if (s0 === peg$FAILED) {\n                            s0 = peg$parsehas_filter();\n                            if (s0 === peg$FAILED) {\n                              s0 = peg$parseis_filter();\n                              if (s0 === peg$FAILED) {\n                                s0 = peg$parsetext_in_filter();\n                                if (s0 === peg$FAILED) {\n                                  s0 = peg$parsetext_filter();\n                                }\n                              }\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedate_filter() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsesearch_key();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesep();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseoperator();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseiso_8601_date_format();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = peg$currPos;\n            s5 = peg$c7(s1, s3, s4);\n            if (s5) {\n              s5 = void 0;\n            } else {\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c8(s1, s3, s4);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsespecific_date_filter() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$parsesearch_key();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesep();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseiso_8601_date_format();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = peg$currPos;\n          s4 = peg$c9(s1, s3);\n          if (s4) {\n            s4 = void 0;\n          } else {\n            s4 = peg$FAILED;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c10(s1, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserel_date_filter() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$parsesearch_key();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesep();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parserel_date_format();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = peg$currPos;\n          s4 = peg$c11(s1, s3);\n          if (s4) {\n            s4 = void 0;\n          } else {\n            s4 = peg$FAILED;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c12(s1, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseduration_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesearch_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseoperator();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseduration_format();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c13(s1, s2, s4, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c14(s1, s2, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseboolean_filter() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesearch_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseboolean_value();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = peg$currPos;\n            s5 = peg$c15(s1, s2, s4);\n            if (s5) {\n              s5 = void 0;\n            } else {\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c16(s1, s2, s4);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumeric_in_filter() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesearch_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumeric_in_list();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = peg$currPos;\n            s5 = peg$c17(s1, s2, s4);\n            if (s5) {\n              s5 = void 0;\n            } else {\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c18(s1, s2, s4);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumeric_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesearch_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseoperator();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsenumeric_value();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c19(s1, s2, s4, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c20(s1, s2, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseaggregate_duration_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseaggregate_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseoperator();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseduration_format();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c21(s1, s2, s4, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c22(s1, s2, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseaggregate_percentage_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseaggregate_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseoperator();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsepercentage_format();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c23(s1, s2, s4, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c24(s1, s2, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseaggregate_numeric_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseaggregate_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseoperator();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsenumeric_value();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c25(s1, s2, s4, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c26(s1, s2, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseaggregate_date_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseaggregate_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseoperator();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseiso_8601_date_format();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c27(s1, s2, s4, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c28(s1, s2, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseaggregate_rel_date_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseaggregate_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseoperator();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parserel_date_format();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c29(s1, s2, s4, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c30(s1, s2, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsehas_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      peg$silentFails++;\n      if (input.substr(peg$currPos, 4) === peg$c31) {\n        s3 = peg$c31;\n        peg$currPos += 4;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c32); }\n      }\n      peg$silentFails--;\n      if (s3 !== peg$FAILED) {\n        peg$currPos = s2;\n        s2 = void 0;\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesearch_key();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsesep();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsesearch_key();\n            if (s5 === peg$FAILED) {\n              s5 = peg$parsesearch_value();\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c33(s1, s3, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c34(s1, s3, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseis_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      peg$silentFails++;\n      if (input.substr(peg$currPos, 3) === peg$c35) {\n        s3 = peg$c35;\n        peg$currPos += 3;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c36); }\n      }\n      peg$silentFails--;\n      if (s3 !== peg$FAILED) {\n        peg$currPos = s2;\n        s2 = void 0;\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesearch_key();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsesep();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsesearch_value();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c37(s1, s3, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c38(s1, s3, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetext_in_filter() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsetext_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsetext_in_list();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = peg$currPos;\n            s5 = peg$c39(s1, s2, s4);\n            if (s5) {\n              s5 = void 0;\n            } else {\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c40(s1, s2, s4);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetext_filter() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenegation();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsetext_key();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesep();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$currPos;\n          s5 = peg$parseoperator();\n          if (s5 !== peg$FAILED) {\n            peg$savedPos = peg$currPos;\n            s6 = peg$c41(s1, s2);\n            if (s6) {\n              s6 = void 0;\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              s5 = [s5, s6];\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsesearch_value();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = peg$currPos;\n              s6 = peg$c42(s1, s2, s4, s5);\n              if (s6) {\n                s6 = void 0;\n              } else {\n                s6 = peg$FAILED;\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c43(s1, s2, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsekey() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c44.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c45); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c44.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c45); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c46(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsequoted_key() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 34) {\n      s1 = peg$c47;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c48); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      if (peg$c49.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c50); }\n      }\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c49.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c50); }\n          }\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s3 = peg$c47;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c51(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseexplicit_tag_key() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 4) === peg$c52) {\n      s1 = peg$c52;\n      peg$currPos += 4;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c53); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseopen_bracket();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesearch_key();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseclosed_bracket();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c54(s1, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseaggregate_key() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    s1 = peg$parsekey();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseopen_paren();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsespaces();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsefunction_args();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsespaces();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parseclosed_paren();\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c55(s1, s3, s4, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsefunction_args() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    s0 = peg$currPos;\n    s1 = peg$parseaggregate_param();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsespaces();\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecomma();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsespaces();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$currPos;\n            peg$silentFails++;\n            s8 = peg$parsecomma();\n            peg$silentFails--;\n            if (s8 === peg$FAILED) {\n              s7 = void 0;\n            } else {\n              peg$currPos = s7;\n              s7 = peg$FAILED;\n            }\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parseaggregate_param();\n              if (s8 === peg$FAILED) {\n                s8 = null;\n              }\n              if (s8 !== peg$FAILED) {\n                s4 = [s4, s5, s6, s7, s8];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsespaces();\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecomma();\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parsespaces();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$currPos;\n              peg$silentFails++;\n              s8 = peg$parsecomma();\n              peg$silentFails--;\n              if (s8 === peg$FAILED) {\n                s7 = void 0;\n              } else {\n                peg$currPos = s7;\n                s7 = peg$FAILED;\n              }\n              if (s7 !== peg$FAILED) {\n                s8 = peg$parseaggregate_param();\n                if (s8 === peg$FAILED) {\n                  s8 = null;\n                }\n                if (s8 !== peg$FAILED) {\n                  s4 = [s4, s5, s6, s7, s8];\n                  s3 = s4;\n                } else {\n                  peg$currPos = s3;\n                  s3 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c56(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseaggregate_param() {\n    var s0;\n\n    s0 = peg$parsequoted_aggregate_param();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseraw_aggregate_param();\n    }\n\n    return s0;\n  }\n\n  function peg$parseraw_aggregate_param() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c57.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c58); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c57.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c58); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c59(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsequoted_aggregate_param() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 34) {\n      s1 = peg$c47;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c48); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      if (input.substr(peg$currPos, 2) === peg$c60) {\n        s3 = peg$c60;\n        peg$currPos += 2;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c61); }\n      }\n      if (s3 === peg$FAILED) {\n        if (peg$c62.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c63); }\n        }\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        if (input.substr(peg$currPos, 2) === peg$c60) {\n          s3 = peg$c60;\n          peg$currPos += 2;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c61); }\n        }\n        if (s3 === peg$FAILED) {\n          if (peg$c62.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c63); }\n          }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s3 = peg$c47;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c64(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesearch_key() {\n    var s0;\n\n    s0 = peg$parsekey();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsequoted_key();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetext_key() {\n    var s0;\n\n    s0 = peg$parseexplicit_tag_key();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsesearch_key();\n    }\n\n    return s0;\n  }\n\n  function peg$parsevalue() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c65.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c66); }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      if (peg$c65.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c66); }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c67(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsequoted_value() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 34) {\n      s1 = peg$c47;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c48); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      if (input.substr(peg$currPos, 2) === peg$c60) {\n        s3 = peg$c60;\n        peg$currPos += 2;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c61); }\n      }\n      if (s3 === peg$FAILED) {\n        if (peg$c68.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c69); }\n        }\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        if (input.substr(peg$currPos, 2) === peg$c60) {\n          s3 = peg$c60;\n          peg$currPos += 2;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c61); }\n        }\n        if (s3 === peg$FAILED) {\n          if (peg$c68.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c69); }\n          }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s3 = peg$c47;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c70(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsein_value() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$currPos;\n    s3 = peg$currPos;\n    peg$silentFails++;\n    s4 = peg$parsein_value_termination();\n    peg$silentFails--;\n    if (s4 !== peg$FAILED) {\n      peg$currPos = s3;\n      s3 = void 0;\n    } else {\n      s3 = peg$FAILED;\n    }\n    if (s3 !== peg$FAILED) {\n      s4 = peg$parsein_value_char();\n      if (s4 !== peg$FAILED) {\n        s3 = [s3, s4];\n        s2 = s3;\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s2;\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$currPos;\n        s3 = peg$currPos;\n        peg$silentFails++;\n        s4 = peg$parsein_value_termination();\n        peg$silentFails--;\n        if (s4 !== peg$FAILED) {\n          peg$currPos = s3;\n          s3 = void 0;\n        } else {\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsein_value_char();\n          if (s4 !== peg$FAILED) {\n            s3 = [s3, s4];\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c71();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsetext_in_value() {\n    var s0;\n\n    s0 = peg$parsequoted_value();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsein_value();\n    }\n\n    return s0;\n  }\n\n  function peg$parsesearch_value() {\n    var s0;\n\n    s0 = peg$parsequoted_value();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsevalue();\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumeric_value() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 45) {\n      s2 = peg$c72;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c73); }\n    }\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsenumeric();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      if (peg$c74.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c75); }\n      }\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$currPos;\n        peg$silentFails++;\n        s4 = peg$parseend_value();\n        if (s4 === peg$FAILED) {\n          s4 = peg$parsecomma();\n          if (s4 === peg$FAILED) {\n            s4 = peg$parseclosed_bracket();\n          }\n        }\n        peg$silentFails--;\n        if (s4 !== peg$FAILED) {\n          peg$currPos = s3;\n          s3 = void 0;\n        } else {\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c76(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseboolean_value() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 4).toLowerCase() === peg$c77) {\n      s1 = input.substr(peg$currPos, 4);\n      peg$currPos += 4;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c78); }\n    }\n    if (s1 === peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 49) {\n        s1 = peg$c79;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c80); }\n      }\n      if (s1 === peg$FAILED) {\n        if (input.substr(peg$currPos, 5).toLowerCase() === peg$c81) {\n          s1 = input.substr(peg$currPos, 5);\n          peg$currPos += 5;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c82); }\n        }\n        if (s1 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 48) {\n            s1 = peg$c83;\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c84); }\n          }\n        }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      peg$silentFails++;\n      s3 = peg$parseend_value();\n      peg$silentFails--;\n      if (s3 !== peg$FAILED) {\n        peg$currPos = s2;\n        s2 = void 0;\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c85(s1);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetext_in_list() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n    s0 = peg$currPos;\n    s1 = peg$parseopen_bracket();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsetext_in_value();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$currPos;\n        s5 = peg$parsespaces();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecomma();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsespaces();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$currPos;\n              peg$silentFails++;\n              s9 = peg$parsecomma();\n              peg$silentFails--;\n              if (s9 === peg$FAILED) {\n                s8 = void 0;\n              } else {\n                peg$currPos = s8;\n                s8 = peg$FAILED;\n              }\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsetext_in_value();\n                if (s9 === peg$FAILED) {\n                  s9 = null;\n                }\n                if (s9 !== peg$FAILED) {\n                  s5 = [s5, s6, s7, s8, s9];\n                  s4 = s5;\n                } else {\n                  peg$currPos = s4;\n                  s4 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s4;\n          s4 = peg$FAILED;\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$currPos;\n          s5 = peg$parsespaces();\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parsecomma();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsespaces();\n              if (s7 !== peg$FAILED) {\n                s8 = peg$currPos;\n                peg$silentFails++;\n                s9 = peg$parsecomma();\n                peg$silentFails--;\n                if (s9 === peg$FAILED) {\n                  s8 = void 0;\n                } else {\n                  peg$currPos = s8;\n                  s8 = peg$FAILED;\n                }\n                if (s8 !== peg$FAILED) {\n                  s9 = peg$parsetext_in_value();\n                  if (s9 === peg$FAILED) {\n                    s9 = null;\n                  }\n                  if (s9 !== peg$FAILED) {\n                    s5 = [s5, s6, s7, s8, s9];\n                    s4 = s5;\n                  } else {\n                    peg$currPos = s4;\n                    s4 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s4;\n                  s4 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseclosed_bracket();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$currPos;\n            peg$silentFails++;\n            s6 = peg$parseend_value();\n            peg$silentFails--;\n            if (s6 !== peg$FAILED) {\n              peg$currPos = s5;\n              s5 = void 0;\n            } else {\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c86(s2, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumeric_in_list() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n    s0 = peg$currPos;\n    s1 = peg$parseopen_bracket();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumeric_value();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$currPos;\n        s5 = peg$parsespaces();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecomma();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsespaces();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$currPos;\n              peg$silentFails++;\n              s9 = peg$parsecomma();\n              peg$silentFails--;\n              if (s9 === peg$FAILED) {\n                s8 = void 0;\n              } else {\n                peg$currPos = s8;\n                s8 = peg$FAILED;\n              }\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumeric_value();\n                if (s9 === peg$FAILED) {\n                  s9 = null;\n                }\n                if (s9 !== peg$FAILED) {\n                  s5 = [s5, s6, s7, s8, s9];\n                  s4 = s5;\n                } else {\n                  peg$currPos = s4;\n                  s4 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s4;\n          s4 = peg$FAILED;\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$currPos;\n          s5 = peg$parsespaces();\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parsecomma();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsespaces();\n              if (s7 !== peg$FAILED) {\n                s8 = peg$currPos;\n                peg$silentFails++;\n                s9 = peg$parsecomma();\n                peg$silentFails--;\n                if (s9 === peg$FAILED) {\n                  s8 = void 0;\n                } else {\n                  peg$currPos = s8;\n                  s8 = peg$FAILED;\n                }\n                if (s8 !== peg$FAILED) {\n                  s9 = peg$parsenumeric_value();\n                  if (s9 === peg$FAILED) {\n                    s9 = null;\n                  }\n                  if (s9 !== peg$FAILED) {\n                    s5 = [s5, s6, s7, s8, s9];\n                    s4 = s5;\n                  } else {\n                    peg$currPos = s4;\n                    s4 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s4;\n                  s4 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseclosed_bracket();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$currPos;\n            peg$silentFails++;\n            s6 = peg$parseend_value();\n            peg$silentFails--;\n            if (s6 !== peg$FAILED) {\n              peg$currPos = s5;\n              s5 = void 0;\n            } else {\n              s5 = peg$FAILED;\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c87(s2, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsein_value_termination() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsein_value_char();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$currPos;\n      peg$silentFails++;\n      s5 = peg$parsein_value_end();\n      peg$silentFails--;\n      if (s5 === peg$FAILED) {\n        s4 = void 0;\n      } else {\n        peg$currPos = s4;\n        s4 = peg$FAILED;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsein_value_char();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$currPos;\n        peg$silentFails++;\n        s5 = peg$parsein_value_end();\n        peg$silentFails--;\n        if (s5 === peg$FAILED) {\n          s4 = void 0;\n        } else {\n          peg$currPos = s4;\n          s4 = peg$FAILED;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsein_value_char();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsein_value_end();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsein_value_char() {\n    var s0;\n\n    if (peg$c88.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c89); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsein_value_end() {\n    var s0, s1, s2;\n\n    s0 = peg$parseclosed_bracket();\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsespaces();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsecomma();\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenum2() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    if (peg$c90.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c91); }\n    }\n    if (s1 !== peg$FAILED) {\n      if (peg$c90.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c91); }\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenum4() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    if (peg$c90.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c91); }\n    }\n    if (s1 !== peg$FAILED) {\n      if (peg$c90.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c91); }\n      }\n      if (s2 !== peg$FAILED) {\n        if (peg$c90.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c91); }\n        }\n        if (s3 !== peg$FAILED) {\n          if (peg$c90.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c91); }\n          }\n          if (s4 !== peg$FAILED) {\n            s1 = [s1, s2, s3, s4];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedate_format() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenum4();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 45) {\n        s2 = peg$c72;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c73); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenum2();\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 45) {\n            s4 = peg$c72;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c73); }\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsenum2();\n            if (s5 !== peg$FAILED) {\n              s1 = [s1, s2, s3, s4, s5];\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetime_format() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 84) {\n      s1 = peg$c92;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c93); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenum2();\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 58) {\n          s3 = peg$c94;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c95); }\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenum2();\n          if (s4 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 58) {\n              s5 = peg$c94;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c95); }\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parsenum2();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$currPos;\n                if (input.charCodeAt(peg$currPos) === 46) {\n                  s8 = peg$c96;\n                  peg$currPos++;\n                } else {\n                  s8 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c97); }\n                }\n                if (s8 !== peg$FAILED) {\n                  s9 = peg$parsems_format();\n                  if (s9 !== peg$FAILED) {\n                    s8 = [s8, s9];\n                    s7 = s8;\n                  } else {\n                    peg$currPos = s7;\n                    s7 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s7;\n                  s7 = peg$FAILED;\n                }\n                if (s7 === peg$FAILED) {\n                  s7 = null;\n                }\n                if (s7 !== peg$FAILED) {\n                  s1 = [s1, s2, s3, s4, s5, s6, s7];\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsems_format() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    if (peg$c90.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c91); }\n    }\n    if (s1 !== peg$FAILED) {\n      if (peg$c90.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c91); }\n      }\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        if (peg$c90.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c91); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = null;\n        }\n        if (s3 !== peg$FAILED) {\n          if (peg$c90.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c91); }\n          }\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            if (peg$c90.test(input.charAt(peg$currPos))) {\n              s5 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c91); }\n            }\n            if (s5 === peg$FAILED) {\n              s5 = null;\n            }\n            if (s5 !== peg$FAILED) {\n              if (peg$c90.test(input.charAt(peg$currPos))) {\n                s6 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c91); }\n              }\n              if (s6 === peg$FAILED) {\n                s6 = null;\n              }\n              if (s6 !== peg$FAILED) {\n                s1 = [s1, s2, s3, s4, s5, s6];\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetz_format() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    if (peg$c98.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c99); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenum2();\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 58) {\n          s3 = peg$c94;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c95); }\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenum2();\n          if (s4 !== peg$FAILED) {\n            s1 = [s1, s2, s3, s4];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseiso_8601_date_format() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsedate_format();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsetime_format();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 90) {\n          s3 = peg$c100;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c101); }\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$parsetz_format();\n        }\n        if (s3 === peg$FAILED) {\n          s3 = null;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$currPos;\n          peg$silentFails++;\n          s5 = peg$parseend_value();\n          peg$silentFails--;\n          if (s5 !== peg$FAILED) {\n            peg$currPos = s4;\n            s4 = void 0;\n          } else {\n            s4 = peg$FAILED;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c102();\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserel_date_format() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    if (peg$c98.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c99); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      if (peg$c90.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c91); }\n      }\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c90.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c91); }\n          }\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        if (peg$c103.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c104); }\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$currPos;\n          peg$silentFails++;\n          s5 = peg$parseend_value();\n          peg$silentFails--;\n          if (s5 !== peg$FAILED) {\n            peg$currPos = s4;\n            s4 = void 0;\n          } else {\n            s4 = peg$FAILED;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c105(s1, s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseduration_format() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumeric();\n    if (s1 !== peg$FAILED) {\n      if (input.substr(peg$currPos, 2) === peg$c106) {\n        s2 = peg$c106;\n        peg$currPos += 2;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c107); }\n      }\n      if (s2 === peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 115) {\n          s2 = peg$c108;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c109); }\n        }\n        if (s2 === peg$FAILED) {\n          if (input.substr(peg$currPos, 3) === peg$c110) {\n            s2 = peg$c110;\n            peg$currPos += 3;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c111); }\n          }\n          if (s2 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 109) {\n              s2 = peg$c112;\n              peg$currPos++;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c113); }\n            }\n            if (s2 === peg$FAILED) {\n              if (input.substr(peg$currPos, 2) === peg$c114) {\n                s2 = peg$c114;\n                peg$currPos += 2;\n              } else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c115); }\n              }\n              if (s2 === peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 104) {\n                  s2 = peg$c116;\n                  peg$currPos++;\n                } else {\n                  s2 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c117); }\n                }\n                if (s2 === peg$FAILED) {\n                  if (input.substr(peg$currPos, 3) === peg$c118) {\n                    s2 = peg$c118;\n                    peg$currPos += 3;\n                  } else {\n                    s2 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c119); }\n                  }\n                  if (s2 === peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 100) {\n                      s2 = peg$c120;\n                      peg$currPos++;\n                    } else {\n                      s2 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c121); }\n                    }\n                    if (s2 === peg$FAILED) {\n                      if (input.substr(peg$currPos, 2) === peg$c122) {\n                        s2 = peg$c122;\n                        peg$currPos += 2;\n                      } else {\n                        s2 = peg$FAILED;\n                        if (peg$silentFails === 0) { peg$fail(peg$c123); }\n                      }\n                      if (s2 === peg$FAILED) {\n                        if (input.charCodeAt(peg$currPos) === 119) {\n                          s2 = peg$c124;\n                          peg$currPos++;\n                        } else {\n                          s2 = peg$FAILED;\n                          if (peg$silentFails === 0) { peg$fail(peg$c125); }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$currPos;\n        peg$silentFails++;\n        s4 = peg$parseend_value();\n        peg$silentFails--;\n        if (s4 !== peg$FAILED) {\n          peg$currPos = s3;\n          s3 = void 0;\n        } else {\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c126(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsepercentage_format() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumeric();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 37) {\n        s2 = peg$c127;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c128); }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c129(s1);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseoperator() {\n    var s0;\n\n    if (input.substr(peg$currPos, 2) === peg$c130) {\n      s0 = peg$c130;\n      peg$currPos += 2;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c131); }\n    }\n    if (s0 === peg$FAILED) {\n      if (input.substr(peg$currPos, 2) === peg$c132) {\n        s0 = peg$c132;\n        peg$currPos += 2;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c133); }\n      }\n      if (s0 === peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 62) {\n          s0 = peg$c134;\n          peg$currPos++;\n        } else {\n          s0 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c135); }\n        }\n        if (s0 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 60) {\n            s0 = peg$c136;\n            peg$currPos++;\n          } else {\n            s0 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c137); }\n          }\n          if (s0 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 61) {\n              s0 = peg$c138;\n              peg$currPos++;\n            } else {\n              s0 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c139); }\n            }\n            if (s0 === peg$FAILED) {\n              if (input.substr(peg$currPos, 2) === peg$c140) {\n                s0 = peg$c140;\n                peg$currPos += 2;\n              } else {\n                s0 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c141); }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseor_operator() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 2).toLowerCase() === peg$c142) {\n      s1 = input.substr(peg$currPos, 2);\n      peg$currPos += 2;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c143); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      peg$silentFails++;\n      s3 = peg$parseend_value();\n      peg$silentFails--;\n      if (s3 !== peg$FAILED) {\n        peg$currPos = s2;\n        s2 = void 0;\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseand_operator() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 3).toLowerCase() === peg$c144) {\n      s1 = input.substr(peg$currPos, 3);\n      peg$currPos += 3;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c145); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      peg$silentFails++;\n      s3 = peg$parseend_value();\n      peg$silentFails--;\n      if (s3 !== peg$FAILED) {\n        peg$currPos = s2;\n        s2 = void 0;\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumeric() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c90.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c91); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c90.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c91); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s3 = peg$c96;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c97); }\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        if (peg$c90.test(input.charAt(peg$currPos))) {\n          s5 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c91); }\n        }\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          if (peg$c90.test(input.charAt(peg$currPos))) {\n            s5 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c91); }\n          }\n        }\n        if (s4 !== peg$FAILED) {\n          s3 = [s3, s4];\n          s2 = s3;\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c146();\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseopen_paren() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s0 = peg$c147;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c148); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseclosed_paren() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 41) {\n      s0 = peg$c149;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c150); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseopen_bracket() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 91) {\n      s0 = peg$c151;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c152); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseclosed_bracket() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 93) {\n      s0 = peg$c153;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c154); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsesep() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 58) {\n      s0 = peg$c94;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c95); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenegation() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 33) {\n      s0 = peg$c155;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c156); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c157;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c158); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsespaces() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (input.charCodeAt(peg$currPos) === 32) {\n      s2 = peg$c159;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c160); }\n    }\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      if (input.charCodeAt(peg$currPos) === 32) {\n        s2 = peg$c159;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c160); }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c161();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseend_value() {\n    var s0, s1;\n\n    if (peg$c162.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c163); }\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      peg$silentFails++;\n      if (input.length > peg$currPos) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c164); }\n      }\n      peg$silentFails--;\n      if (s1 === peg$FAILED) {\n        s0 = void 0;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n\n    const {TokenConverter, TermOperator, FilterType, config} = options;\n    const tc = new TokenConverter({text, location, config});\n\n    const opDefault = TermOperator.Default;\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n"],"names":["Sentry","isNil","Client","GroupStore","buildTeamId","buildUserId","uniqueId","assignToUser","params","api","endpoint","id","onAssignTo","email","member","request","requestPromise","method","data","assignedTo","user","assignedBy","then","onAssignToSuccess","catch","onAssignToError","clearAssignment","groupId","assignToActor","actor","guid","actorId","type","withScope","scope","setExtra","captureException","deleteNote","group","_oldText","restore","activity","find","index","removeActivity","undefined","Promise","reject","Error","promise","addActivity","createNote","note","updateNote","oldText","updateActivity","text","paramsToQueryArgs","p","itemIds","query","environment","project","length","forEach","prop","getUpdateUrl","projectId","orgId","chainUtil","funcs","filteredFuncs","filter","f","args","func","apply","wrapRequest","path","options","extraParams","success","error","complete","bulkDelete","onDelete","response","onDeleteSuccess","onDeleteError","bulkUpdate","failSilently","onUpdate","onUpdateSuccess","onUpdateError","mergeGroups","onMerge","merge","onMergeSuccess","onMergeError","isInteger","omit","pick","qs","PageFiltersActions","getDatetimeFromState","getStateFromQuery","getPageFilterStorage","setPageFiltersStorage","getDefaultSelection","DATE_TIME_KEYS","URL_PARAM","OrganizationStore","PageFiltersStore","defined","valueIsEqual","getUtcDateString","resetPageFilters","reset","getProjectIdFromProject","parseInt","mergeDatetime","base","fallback","datetime","start","end","period","utc","initializeUrlState","organization","queryParams","router","memberProjects","skipLoadLastUsed","shouldForceProject","shouldEnforceSingleProject","defaultSelection","forceProject","showAbsolute","skipInitializeUrlParams","orgSlug","slug","parsed","allowAbsoluteDatetime","allowEmptyPeriod","defaultDatetime","defaultFilters","customDatetime","customDefaultFilters","pageFilters","hasDatetimeInUrl","Object","keys","hasProjectOrEnvironmentInUrl","PROJECT","ENVIRONMENT","projects","environments","storedPageFilters","shouldUsePinnedDatetime","state","storedState","pinnedFilters","has","newProject","Number","slice","map","Set","updateDesyncedUrlState","newDatetime","updateParams","replace","keepCursor","isProjectsValid","Array","isArray","every","updateProjects","persistPageFilters","updateEnvironments","updateDateTime","pinFilter","pin","save","obj","newQuery","getNewQueryParams","location","stringify","routerAction","push","pathname","resolve","window","setTimeout","getState","targetFilter","updateDesyncedFilters","currentQuery","differingFilters","add","dateTimeInQuery","getTime","resetParams","cleanCurrentQuery","currentQueryState","cursorParam","omittedParameters","values","statsPeriod","String","Date","paramEntries","entries","_","value","fromEntries","revertToPinnedFilters","selection","desyncedFilters","storedFilterState","newParams","addErrorMessage","SavedSearchesActions","MAX_AUTOCOMPLETE_RECENT_SEARCHES","t","SavedSearchType","handleXhrErrorResponse","resetSavedSearches","fetchSavedSearches","url","startFetchSavedSearches","resp","fetchSavedSearchesSuccess","err","fetchSavedSearchesError","fetchProjectSavedSearches","getRecentSearchUrl","saveRecentSearch","createSavedSearch","name","sort","ISSUE","createSavedSearchSuccess","fetchRecentSearches","limit","status","getPinSearchUrl","pinSearch","pinSearchSuccess","unpinSearch","pinnedSearch","pinnedType","deleteSavedSearch","search","deleteSavedSearchSuccess","normalizeDateTimeParams","AlertStore","TagStore","MAX_TAGS","tagFetchSuccess","tags","trimmedTags","addAlert","message","loadTagsSuccess","loadOrganizationTags","use_cache","fetchOrganizationTags","projectIds","fetchTagValues","tagKey","endpointParams","includeTransactions","includeSessions","addSuccessMessage","TeamActions","tct","callIfFunction","doCallback","fetchTeams","fetchAll","fetchAllSuccess","fetchAllError","fetchUserTeams","teams","loadUserTeams","fetchTeamDetails","fetchDetails","teamId","fetchDetailsSuccess","fetchDetailsError","updateTeamSuccess","updateSuccess","joinTeam","memberId","update","updateError","leaveTeam","createTeam","team","createTeamSuccess","createTeamError","removeTeam","removeTeamSuccess","removeTeamError","createActions","SavedSearchActions","Component","openInviteMembersModal","ActorAvatar","SuggestedAvatarStack","TeamAvatar","UserAvatar","DropdownAutoComplete","DropdownBubble","Highlight","ExternalLink","Link","LoadingIndicator","TextOverflow","Tooltip","IconAdd","IconChevron","IconClose","IconUser","tn","ConfigStore","MemberListStore","ProjectsStore","space","AssigneeSelector","getInitialState","listen","onGroupChange","users","handleMemberListUpdate","members","memberList","setState","_state","e","assignee","assignToTeam","stopPropagation","onAssign","props","suggestionType","suggestion","getSuggestedAssignees","loading","get","loaded","getAll","hasStatus","suggestedOwners","owners","componentWillReceiveProps","nextProps","shouldComponentUpdate","nextState","currentMembers","componentWillUnmount","unlisteners","unlistener","assignableTeams","getBySlug","a","b","localeCompare","display","renderMemberNode","suggestedReason","size","sessionUser","handleSelect","searchKey","label","inputValue","renderNewMemberNodes","putSessionUserFirst","renderTeamNode","assignableTeam","renderNewTeamNodes","renderSuggestedAssigneeNodes","reason","renderDropdownGroupLabel","renderNewDropdownItems","suggestedAssignees","filteredSessionUser","filteredSuggestedAssignees","assigneeIds","filteredTeams","filteredMembers","dropdownItems","items","unshift","hideGroupLabel","renderInviteMemberLink","source","owner","ownerType","split","matchingTeam","render","disabled","noDropdown","suggestedActors","suggestedReasons","suspectCommit","commit","ownershipRule","assignedToSuggestion","avatarElement","isHoverable","issueOwners","height","margin","marginRight","handleAssign","clearAssignTo","getActorProps","isOpen","sessionUserIndex","findIndex","arrangedMembers","AssigneeWrapper","StyledIconUser","IconContainer","MenuItemWrapper","py","MenuItemFooterWrapper","theme","innerBorder","tag","highlight","background","active","activeHover","InviteMemberLink","textColor","Label","StyledChevron","DropdownButton","GroupHeader","fontSizeSmall","subText","SuggestedReason","TooltipWrapper","TooltipSubtext","TooltipSubExternalLink","Teams","getById","initiallyLoaded","hasTooltip","css","BaseAvatar","MAX_SUGGESTIONS","tooltip","tooltipOptions","backgroundAvatarProps","round","suggested","numAvatars","Math","min","i","skipWrapper","AvatarStack","translateStyles","Avatar","BackgroundAvatar","React","lazy","Suspense","Placeholder","LazyDatePicker","LazyDateRangePicker","CalendarSuspenseWrapper","children","DatePicker","DateRangePicker","BarSeries","BaseChart","BarChart","series","stacked","xAxis","animation","seriesName","stack","itemStyle","forwardRef","useMemo","useTheme","echarts","ReactEchartsCore","MarkLine","IS_ACCEPTANCE_TEST","Grid","Legend","XAxis","YAxis","LineSeries","getDiffInMinutes","getDimensionValue","lightenHexToRgb","handleClick","clickSeries","instance","onClick","BaseChartUnwrapped","colors","grid","legend","dataZoom","toolBox","graphic","axisPointer","previousPeriod","echartsTheme","devicePixelRatio","minutesThresholdToDisplaySeconds","showTimeInTooltip","useShortDate","yAxes","xAxes","style","forwardedRef","onLegendSelectChanged","onHighlight","onMouseOut","onMouseOver","onDataZoom","onRestore","onFinished","onRendered","additionalSeries","yAxis","autoHeightResize","width","renderer","notMerge","lazyUpdate","isGroupedByDate","transformSinglePointToBar","transformSinglePointToLine","onChartReady","dataTestId","hasSinglePoints","s","resolveColors","color","charts","getColorPalette","previousPeriodColors","transformedSeries","barWidth","barGap","areaStyle","lineStyle","markLine","silent","show","transformedPreviousPeriod","previous","seriesIndex","gray200","resolvedSeries","defaultAxesProps","yAxisOrCustom","axis","addSecondsToTimeFormat","xAxisOrCustom","seriesData","bucketSize","tooltipOrNone","chartOption","useUTC","toolbox","chartStyles","eventsMap","click","mouseout","mouseover","datazoom","finished","rendered","legendselectchanged","ChartContainer","family","borderRadius","borderRadiusBottom","backgroundElevated","translucentBorder","white","ref","displayName","top","bottom","left","right","containLabel","truncationFormatter","truncate","rest","formatter","padding","icon","itemHeight","itemWidth","itemGap","align","textStyle","verticalAlign","fontSize","fontFamily","lineHeight","inactiveColor","inactive","symbol","moment","getFormattedDate","getTimeFormat","defaultFormatAxisLabel","isTimestamp","format","displaySeconds","trim","local","now","bucketStart","bucketEnd","showYear","year","showEndDate","date","formatStart","formatEnd","defaultValueFormatter","toLocaleString","defaultNameFormatter","defaultMarkerFormatter","getSeriesValue","offset","getFormatter","formatAxisLabel","valueFormatter","nameFormatter","markerFormatter","subLabels","getFilter","seriesParam","seriesParamsOrParam","axisFormatterOrDefault","componentType","timestamp","coord","truncatedName","labelForValue","formattedValue","join","seriesParams","formattedLabel","marker","filteredSubLabels","subLabel","parentLabel","labelWithSubLabels","dataIndex","hideDelay","trigger","backgroundColor","borderWidth","extraCssText","dropShadowHeavy","transitionDuration","className","position","pos","_params","dom","_rec","tipWidth","tipHeight","contentSize","chartLeft","parentNode","Element","getBoundingClientRect","leftPos","rightEdge","arrowPosition","innerWidth","arrow","querySelector","useShortInterval","AxisLabelFormatter","timeFormat","dateFormat","firstItem","defaults","splitNumber","axisLine","chartLabel","axisTick","splitLine","axisLabel","hideOverlap","showMaxLabel","showMinLabel","chartLineColor","opacity","barSeries","showSymbol","symbolSize","emphasis","scale","Checkbox","defaultProps","checked","classNames","DeprecatedDropdownMenu","getRootCss","hover","DropdownLink","anchorMiddle","title","customTitle","menuClasses","topLevelClasses","anchorRight","caret","alwaysRenderMenu","otherProps","getRootProps","getMenuProps","shouldRenderMenu","cx","topLevelCx","open","onClickActor","actorProps","addLoadingMessage","clearIndicators","Form","ApiForm","onSuccess","onError","onSubmit","apiEndpoint","apiMethod","clear","_onSubmit","_apiMethod","_apiEndpoint","FieldDescription","FieldHelp","FieldLabel","FieldRequiredBadge","FormField","CheckboxField","required","help","helpElement","onChange","handleChange","newValue","target","ControlWrapper","FieldLayout","Option","onBlur","isTrue","fontWeight","RadioBoolean","yesFirst","yesLabel","noLabel","yesOption","noOption","IconCalendar","inputStyles","InputField","handleChangeDate","close","DatePickerField","dateObj","isNaN","dateString","actions","InputWrapper","zIndex","dropdownAutocomplete","StyledInput","CalendarMenu","border","menu","CalendarIcon","default","BooleanField","ChoiceMapperField","DateTimeField","EmailField","FieldFromConfig","FieldSeparator","FormPanel","HiddenField","JSONForm","NumberField","RadioBooleanField","RangeField","SelectField","TextareaField","TestCopyInput","TextField","fieldProps","Fragment","HighlightComponent","highlightText","toLowerCase","idx","indexOf","substr","yellow200","getKeyCode","macModifiers","normalModifiers","genericGlyphs","keyToDisplay","key","isMac","keyCode","toUpperCase","specificToOs","modifierMap","keyStr","HotkeysLabel","forcePlatform","hotkeySets","o","navigator","platform","startsWith","finalKeySet","keySet","Key","fontSizeMedium","HotkeysContainer","localStorage","makeLocalStorageKey","updateFilters","currentStoredState","shouldUpdateDatetime","currentStart","currentEnd","currentPeriod","currentUtc","dataToSave","from","localStorageKey","setItem","JSON","ex","getItem","decoded","parse","console","removePageFiltersStorage","removeItem","TimeRangeItemLabel","autoCompleteFilter","DEFAULT_RELATIVE_PERIODS","DATE_TIME_FORMAT","STATS_PERIOD_REGEX","SUPPORTED_RELATIVE_PERIOD_UNITS","num","momentUnit","m","h","d","w","SUPPORTED_RELATIVE_UNITS_LIST","parseStatsPeriodString","statsPeriodString","result","exec","unit","parseStatsPeriod","outputFormat","subtract","getRelativeSummary","relative","relativeOptions","defaultRelativePeriodString","makeItem","amount","timeRangeAutoCompleteFilter","filterValue","match","userSuppliedAmount","groups","digits","userSuppliedUnits","string","userSuppliedAmountIsValid","matchingUnit","shape","bottomGutter","testId","red100","backgroundSecondary","red200","isMeasurement","isSpanOperationBreakdownField","measurementType","grammar","getKeyName","listJoiner","s1","comma","s2","separator","Token","TermOperator","BooleanOperator","FilterType","allOperators","Default","GreaterThanEqual","LessThanEqual","GreaterThan","LessThan","Equal","NotEqual","basicOperators","interchangeableFilterOperators","SpecificDate","textKeys","KeySimple","KeyExplicitTag","numberUnits","k","filterTypeConfig","Text","validKeys","validOps","validValues","ValueText","canNegate","TextIn","ValueTextList","ValueIso8601Date","RelativeDate","ValueRelativeDate","Duration","ValueDuration","Numeric","ValueNumber","NumericIn","ValueNumberList","Boolean","ValueBoolean","AggregateDuration","KeyAggregate","AggregateNumeric","AggregatePercentage","ValuePercentage","AggregateDate","AggregateRelativeDate","Has","Is","TokenConverter","constructor","config","isNumeric","numericKeys","isBoolean","booleanKeys","isPercentage","percentageKeys","isDate","dateKeys","isDuration","durationKeys","defaultTokenFields","Spaces","operator","negated","filterToken","Filter","invalid","checkInvalidFilter","quoted","FreeText","inner","LogicGroup","bool","LogicBoolean","prefix","KeyAggregateParam","argsSpaceBefore","argsSpaceAfter","arg1","KeyAggregateArgs","sign","includes","rawValue","item1","keyName","aggregateKey","keyValidation","checkAggregate","check","some","arg","textOperatorKeys","checkInvalidTextFilter","checkInvalidTextValue","checkInvalidInFilter","expectedType","setSeconds","setMilliseconds","example","toISOString","test","hasEmptyValue","item","defaultConfig","allowBoolean","parseSearch","joinQuery","parsedTerms","leadingSpace","additionalSpaceBetween","useEffect","useRef","useState","keyframes","useReducedMotion","isWithinToken","HighlightQuery","parsedQuery","cursorPosition","renderResult","cursor","renderToken","renderedToken","token","shakeAnimation","fill","FilterToken","isActive","hasLeft","setHasLeft","filterElementRef","showInvalid","showTooltip","reduceMotion","current","offsetTop","requestAnimationFrame","maxWidth","KeyToken","ListToken","NumberToken","colorType","searchTokenBackground","searchTokenBorder","red300","blue300","filterCss","Negation","ExplicitKey","Operator","pink300","Value","Unit","green300","gray300","DateTime","ListComma","InList","purple300","TokenResultFound","skipTokenMarker","Symbol","treeResultLocator","tree","visitorTest","noResultValue","returnResult","nodeVisitor","skipToken","v","treeTransformer","transform","aggregateWithArgs","node","isOperator","op","browserHistory","withRouter","openModal","Access","Button","MenuItem","IconPin","IconSliders","trackAdvancedAnalyticsEvent","CreateSavedSearchModal","removeSpace","makePinSearchAction","PinSearchAction","menuItemVariant","savedSearchType","onTogglePinnedSearch","evt","preventDefault","_cursor","page","_page","action","search_type","pinTooltip","Action","makeSaveSearchAction","SavedSearchAction","deps","hasAccess","makeSearchBuilderAction","onSidebarToggle","SearchBuilderAction","containerDisplayMode","ActionButton","gray400","borderless","createRef","TextareaAutosize","isPropValid","debounce","ButtonBar","DEFAULT_DEBOUNCE_DURATION","MAX_AUTOCOMPLETE_RELEASES","NEGATION_OPERATOR","IconEllipsis","IconSearch","FieldValueType","getFieldDefinition","getDynamicComponent","withApi","withOrganization","SearchBarDatePicker","SearchDropdown","SearchHotkeysListener","ItemType","ShortcutType","addSpace","createSearchGroups","filterKeysFromQuery","generateOperatorEntryMap","getDateTagAutocompleteGroups","getSearchGroupWithItemMarkedActive","getTagItemsFromKeys","getValidOps","shortcuts","ACTION_OVERFLOW_WIDTH","ACTION_OVERFLOW_STEPS","makeQueryState","generateOpAutocompleteGroup","tagName","operatorMap","operatorItems","searchItems","recentSearchItems","TAG_OPERATOR","escapeValue","SmartSearchBar","initialQuery","showDropdown","searchTerm","searchGroups","flatSearchItems","activeSearchItem","inputHasFocus","numActionsVisible","actionBarItems","containerRef","contains","entry","contentRect","actionCount","floor","max","filterTokens","cursorToken","searchInput","focus","tokenIndex","tok","selectionStart","selectionEnd","updateAutoCompleteItems","hasExecCommand","document","execCommand","userAgent","updateQuery","tokenCursorOffset","newCursorPosition","shortcutType","shortcutMethod","searchSource","search_source","shortcut_method","shortcut_type","shortcut","runShortcut","logShortcutEvent","canRunShortcut","Delete","deleteToken","Negate","negateToken","Next","moveToNextToken","Previous","reverse","doSearch","onSearch","onClose","removeEventListener","onBackgroundPointerUp","addEventListener","clipboardData","getData","cursorPosStart","cursorPosEnd","textBefore","substring","textAfter","mergedText","onKeyDown","hasSearchGroups","isSelectingDropdownItems","currIndex","totalItems","nextActiveSearchItem","prevItem","activeItem","callback","onAutoComplete","clauseStart","clauseEnd","replaceToken","keyLocation","beforeClause","endClause","blur","onGetTagValues","noValueQuery","escapedValue","desc","TAG_VALUE","leading","ignoreMaxSearchItems","maxSuggestedValues","hasRecentSearches","onGetRecentSearches","fetchFn","fullQuery","recentSearches","searches","RECENT_SEARCH","releasePromise","fetchReleases","getPredefinedTagValues","tagValues","FIRST_RELEASE","releases","releaseValues","r","shortVersion","releaseVersion","fetchQuery","per_page","prepareQuery","excludeEnvironment","supportedTags","preparedQuery","filteredSearchGroups","attempted_field_name","INVALID_TAG","fetchTagValuesFn","getReleases","predefined","getTagValues","all","getRecentSearches","defaultSearchItems","defaultRecentItems","tagKeys","tagType","getTagKeys","updateAutoCompleteState","DEFAULT","showDefaultSearches","cursorValue","searchText","fieldDefinition","valueType","DATE","updateAutoCompleteStateMultiHeader","valueGroup","generateValueAutocompleteGroup","autocompleteGroups","opGroup","generateTagAutocompleteGroup","cursorSearchTerm","updateAutoCompleteFromAst","maxSearchItems","maxQueryLength","queryCharsLeft","reduce","acc","MouseEvent","replaceText","search_operator","valueLocation","valueToken","currentValueNull","TAG_VALUE_ISO_DATE","replaceTokenEndClauseJoiner","endsWith","onAutoCompleteFromAst","isoDate","dateItem","cursorFilter","valueText","componentDidMount","ResizeObserver","inputResizeObserver","updateActionsVisible","observe","componentDidUpdate","prevProps","lastQuery","disconnect","defaultQuery","hasValidSearch","onSavedRecentSearch","matchedTokens","findTokensAtCursor","cursorValueIsoDate","cursorValueRelativeDate","currentFieldDefinition","shouldShowDatePicker","textValue","shouldShowAutocomplete","LIMITER_CHARS","innerStart","tokenStart","tokenEnd","RegExp","supportedTagType","preparedSearchTerm","tagItems","TAG_KEY","showSearchDropdown","dropdownClassName","placeholder","useFormWrapper","inlineLabel","maxMenuHeight","input","onQueryFocus","onQueryBlur","onKeyUp","onQueryChange","onInputClick","onPaste","actionItems","actionProps","visibleActions","overflowedActions","visibleShortcuts","hotkeys","runShortcutOnHotkeyPress","clearSearch","onAutoCompleteIsoDate","runShortcutOnClick","SmartSearchBarContainer","unsubscribe","Container","dropShadowLight","focusBorder","SearchLabel","familyMono","SearchInput","fixed","shouldForwardProp","formPlaceholder","ActionsBar","VerticalEllipsisIcon","DEFAULT_DAY_START_TIME","setDateToTime","SearchBarFlyout","TZ_OFFSET_REGEX","TIME_REGEX","ISO_FORMAT","ISO_FORMAT_WITH_TIMEZONE","isUtcIsoDate","isoDateTime","applyChanges","timeString","handleSelectDateTime","newDate","parseIncomingDateString","incomingDateString","strippedTimeZone","incomingDate","time","newTime","TimeInput","setTime","localTime","setLocalTime","isFocused","setIsFocused","timeInputRef","newStartTime","Input","DatePickerFooter","UtcPickerLabel","fullWidth","dropdown","PureComponent","IconOpen","FieldKind","Tag","getDropdownItemKey","searchSubstring","onIconClick","isEmpty","child","actual","HeaderItem","HighlightedRestOfWords","combinedRestWords","firstWord","isFirstWordHidden","hasSplit","remainingSubstr","descIdx","ItemTitle","isChild","fullWord","words","kind","FUNCTION","restWords","hasSingleField","LINK","KindTag","deprecated","MEASUREMENT","BREAKDOWN","TAG","NUMERIC_METRICS","FIELD","DropdownItem","isDisabled","field","documentation","bind","element","scrollIntoView","block","DropdownDocumentation","startIndex","toLocaleLowerCase","endIndex","QueryItem","LoadingWrapper","Info","fontSizeLarge","ListItem","SearchDropdownGroup","SearchDropdownGroupTitle","SearchItemsList","SearchListItem","isGrouped","SearchItemTitleWrapper","lineHeightHeading","overflowEllipsis","RestOfWordsContainer","blue400","FirstWordWrapper","TagWrapper","Documentation","breakpoints","small","DropdownFooter","ShortcutsRow","ShortcutButtonContainer","darken","HotkeyGlyphWrapper","IconWrapper","HotkeyTitle","Invalid","linkColor","QueryItemWrapper","hasDocs","useHotkeys","IconArrow","IconClock","IconDelete","IconExclamation","IconStar","IconTag","IconToggle","getLastTermIndex","cursorOffset","getQueryTerms","getTitleForType","PROPERTY","getIconForTypeAndTag","filterSearchItems","flatMap","newItem","isDefaultState","filteredSearchItems","filteredRecentSearchItems","searchGroup","recentSearchGroup","validTypes","interchangeableTypes","allValidTypes","flat","count","getItemTitle","keyWithColon","sections","definition","lastGroup","at","currentItem","keyWithoutFunctionPart","replaceAll","lowerCasedSearchTerm","combinedKeywords","keywords","matchedInKey","matchedInKeywords","DATE_SUGGESTED_VALUES","ellipsisDirection","isParagraph","createStore","storeConfig","alerts","init","alert","alertAlreadyExists","noDuplicates","mutedData","expirations","valueOf","hasOwnProperty","expireAfter","neverExpire","closeAlert","concat","duration","expiry","IndicatorStore","makeSafeRefluxStore","showAlert","msg","addMessage","pendingChanges","Map","statuses","loadInitialData","itemsById","newItems","itemIdsOrAll","getAllItemIds","remove","addStatus","clearStatus","indexOfActivity","splice","numComments","assign","getAllItems","pendingById","change","existing","itemId","_changeId","_data","_error","ids","_response","shortId","itemIdSet","onDiscard","onDiscardError","onDiscardSuccess","mergedIdSet","parent","changeId","set","delete","onPopulateStats","groupStatsMap","stats","onPopulateReleases","releaseData","isLoaded","getByEmail","SEMVER_TAGS","FieldKey","ISSUE_FIELDS","BUILTIN_TAGS","unsubscribeListeners","getIssueAttributes","isSuggestions","sortedTagKeys","IS","HAS","ASSIGNED","BOOKMARKS","LAST_SEEN","FIRST_SEEN","EVENT_TIMESTAMP","TIMES_SEEN","isInput","ASSIGNED_OR_SUGGESTED","getIssueTags","getStateTags","newTags","generateEventSlug","eventData","latest_event","projectSlug","eventDetailsRoute","eventSlug","eventDetailsRouteWithEventView","eventView","generateQueryStringObject","getDiscoverLandingUrl","features","keyNameCodeMapping","backspace","tab","enter","return","esc","escape","up","down","del","ins","insert","home","pageup","pagedown","capslock","num_0","num_1","num_2","num_3","num_4","num_5","num_6","num_7","num_8","num_9","num_multiply","num_add","num_enter","num_subtract","num_decimal","num_divide","modifierNameKeyCodeMapping","shift","alt","option","ctrl","control","cmd","command","x","charCodeAt","Cookies","SUPERUSER_COOKIE_NAME","isActiveSuperuser","isSuperuser","useTeams","renderProps","useCallback","isKeyPressed","metaKey","shiftKey","ctrlKey","altKey","memoizedHotkeys","keysets","keyset","uniqBy","TeamStore","useLegacyStore","parseLinkHeader","useApi","slugs","lastSearch","isSameSearch","hasMore","nextCursor","includeAllArgs","pageLinks","getResponseHeader","paginationObject","next","results","provideUserTeams","store","storeSlugs","slugsToLoad","storeIds","idsToLoad","shouldLoadSlugs","shouldLoadIds","shouldLoadTeams","loadedUserTeams","fetching","fetchError","slugOrIdRef","slugsOrIds","slugOrId","loadTeamsBySlugOrId","fetchedTeams","loadTeams","handleSearch","handleFetchAdditionalTeams","isMember","loadMore","getDisplayName","uuidPattern","getUsername","isManaged","username","withIssueTags","WrappedComponent","ComponentWithTags","setAssigned","newState","oldState","usernames","teamnames","allAssigned","assigned","bookmarks","assigned_or_suggested","unsubscribeTeam","unsubscribeTags","unsubscribeMembers","Alert","getSortLabel","IssueSortOptions","DEFAULT_SORT_OPTIONS","NEW","FREQ","PRIORITY","USER","isSaving","onSubmitSuccess","onSubmitError","event","validateSortOption","closeModal","responseJSON","detail","sortOptions","TREND","Header","Body","sortOption","initialData","handleSubmit","getSupportedTags","IssueListSearchBar","tagValueLoader","savedSearch","isPinned","Query","getTabs","tabs","UNRESOLVED","analyticsName","enabled","tooltipTitle","FOR_REVIEW","IGNORED","REPROCESSING","link","tooltipHoverable","_query","getTabsWithCounts","isForReviewQuery","TAB_MAX_COUNT","INBOX","DISCOVER_EXCLUSION_FIELDS"],"sourceRoot":""}