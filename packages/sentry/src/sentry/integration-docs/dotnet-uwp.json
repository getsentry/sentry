{
  "id": "dotnet-uwp",
  "name": "Universal Windows Platform",
  "html": "<h2 id=\"install-the-nuget-package\" style=\"position:relative;\">Install the NuGet package</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell highlight\"><code class=\"language-shell\"><span class=\"token comment\"># Using Package Manager</span>\nInstall-Package Sentry -Version <span class=\"token number\">3.18</span>.0\n\n<span class=\"token comment\"># Or using .NET Core CLI</span>\ndotnet <span class=\"token function\">add</span> package Sentry -v <span class=\"token number\">3.18</span>.0</code></pre></div>\n<div class=\"alert alert-info\" role=\"alert\"><h5 class=\"no_toc\">Using .NET Framework prior to 4.6.1?</h5>\n    <div class=\"alert-body content-flush-bottom\">\n        <a href=\"https://docs.sentry.io/clients/csharp/\">Our legacy SDK</a> supports .NET Framework as early as 3.5.\n    </div>\n</div>\n<h2 id=\"initialize-the-sdk\" style=\"position:relative;\">Initialize the SDK</h2>\n<p>Initialize the SDK as early as possible, like in the constructor of the <code>App</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp highlight\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Windows</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">Sentry<span class=\"token punctuation\">.</span>Protocol</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">Sentry</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">sealed</span> <span class=\"token keyword\">partial</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">Application</span></span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">OnLaunched</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LaunchActivatedEventArgs</span> e<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        SentrySdk<span class=\"token punctuation\">.</span><span class=\"token function\">Init</span><span class=\"token punctuation\">(</span>o <span class=\"token operator\">=&gt;</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Tells which project in Sentry to send events to:</span>\n            o<span class=\"token punctuation\">.</span>Dsn <span class=\"token operator\">=</span> <span class=\"token string\">\"___PUBLIC_DSN___\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// When configuring for the first time, to see what the SDK is doing:</span>\n            o<span class=\"token punctuation\">.</span>Debug <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// Set TracesSampleRate to 1.0 to capture 100% of transactions for performance monitoring.</span>\n            <span class=\"token comment\">// We recommend adjusting this value in production.</span>\n            o<span class=\"token punctuation\">.</span>TracesSampleRate <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Current<span class=\"token punctuation\">.</span>UnhandledException <span class=\"token operator\">+=</span> UnhandledExceptionHandler<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">HandleProcessCorruptedStateExceptions</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SecurityCritical</span></span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">internal</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">ExceptionHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">object</span></span> sender<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Windows<span class=\"token punctuation\">.</span>UI<span class=\"token punctuation\">.</span>Xaml<span class=\"token punctuation\">.</span>UnhandledExceptionEventArgs</span> e<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// We need to hold the reference, because the Exception property is cleared when accessed.</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> exception <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>Exception<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>exception <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Tells Sentry this was an Unhandled Exception</span>\n            exception<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">[</span>Mechanism<span class=\"token punctuation\">.</span>HandledKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            exception<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">[</span>Mechanism<span class=\"token punctuation\">.</span>MechanismKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Application.UnhandledException\"</span><span class=\"token punctuation\">;</span>\n            SentrySdk<span class=\"token punctuation\">.</span><span class=\"token function\">CaptureException</span><span class=\"token punctuation\">(</span>exception<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// Make sure the event is flushed to disk or to Sentry</span>\n            SentrySdk<span class=\"token punctuation\">.</span><span class=\"token function\">FlushAsync</span><span class=\"token punctuation\">(</span>TimeSpan<span class=\"token punctuation\">.</span><span class=\"token function\">FromSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Wait</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"verify\" style=\"position:relative;\">Verify</h2>\n<p>To verify your set up, you can capture a message with the SDK:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp highlight\"><code class=\"language-csharp\">SentrySdk<span class=\"token punctuation\">.</span><span class=\"token function\">CaptureMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Sentry\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you don't want to depend on the static class, the SDK registers a client in the DI container. In this case, you can <a href=\"https://docs.sentry.io/platforms/dotnet/guides/aspnetcore/unit-testing/\">take <code>IHub</code> as a dependency</a>.</p>\n<h3 id=\"performance-monitoring\" style=\"position:relative;\">Performance Monitoring</h3>\n<p>You can measure the performance of your code by capturing transactions and spans.</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp highlight\"><code class=\"language-csharp\"><span class=\"token comment\">// Transaction can be started by providing, at minimum, the name and the operation</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> transaction <span class=\"token operator\">=</span> SentrySdk<span class=\"token punctuation\">.</span><span class=\"token function\">StartTransaction</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">\"test-transaction-name\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"test-transaction-operation\"</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Transactions can have child spans (and those spans can have child spans as well)</span>\n<span class=\"token class-name\"><span class=\"token keyword\">var</span></span> span <span class=\"token operator\">=</span> transaction<span class=\"token punctuation\">.</span><span class=\"token function\">StartChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test-child-operation\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n<span class=\"token comment\">// (Perform the operation represented by the span/transaction)</span>\n<span class=\"token comment\">// ...</span>\n\nspan<span class=\"token punctuation\">.</span><span class=\"token function\">Finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Mark the span as finished</span>\ntransaction<span class=\"token punctuation\">.</span><span class=\"token function\">Finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Mark the transaction as finished and send it to Sentry</span></code></pre></div>\n<p>Check out <a href=\"https://docs.sentry.io/platforms/dotnet/performance/instrumentation/\">the documentation</a> to learn more about the API and automatic instrumentations.</p>\n<h3 id=\"documentation\" style=\"position:relative;\">Documentation</h3>\n<p>Once you've verified the package is initialized properly and sent a test event, consider visiting our <a href=\"https://docs.sentry.io/platforms/dotnet/guides/uwp/\">complete UWP docs</a>.</p>\n<h3 id=\"samples\" style=\"position:relative;\">Samples</h3>\n<p>You can find an example UWP app with Sentry integrated <a href=\"https://github.com/getsentry/examples/tree/master/dotnet/UwpCSharp\">on this GitHub repository.</a></p>\n<p>See the following examples that demonstrate how to integrate Sentry with various frameworks.</p>\n<ul>\n<li><a href=\"https://github.com/getsentry/sentry-dotnet/tree/main/samples\">Multiple samples in the <code>dotnet</code> SDK repository</a> (<strong>C#</strong>)</li>\n<li><a href=\"https://github.com/sentry-demos/fsharp\">Basic F# sample</a> (<strong>F#</strong>)</li>\n</ul>",
  "link": "https://docs.sentry.io/platforms/dotnet/guides/uwp/"
}
