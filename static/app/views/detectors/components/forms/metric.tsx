import {useMemo} from 'react';
import styled from '@emotion/styled';

import {Flex} from 'sentry/components/container/flex';
import {Button} from 'sentry/components/core/button';
import NumberField from 'sentry/components/forms/fields/numberField';
import SegmentedRadioField from 'sentry/components/forms/fields/segmentedRadioField';
import SelectField from 'sentry/components/forms/fields/selectField';
import SentryMemberTeamSelectorField from 'sentry/components/forms/fields/sentryMemberTeamSelectorField';
import Form from 'sentry/components/forms/form';
import {SearchQueryBuilder} from 'sentry/components/searchQueryBuilder';
import type {FilterKeySection} from 'sentry/components/searchQueryBuilder/types';
import PriorityControl from 'sentry/components/workflowEngine/form/control/priorityControl';
import {useFormField} from 'sentry/components/workflowEngine/form/hooks';
import {Container} from 'sentry/components/workflowEngine/ui/container';
import Section from 'sentry/components/workflowEngine/ui/section';
import {IconAdd} from 'sentry/icons';
import {t} from 'sentry/locale';
import {space} from 'sentry/styles/space';
import type {TagCollection} from 'sentry/types/group';
import {
  ALLOWED_EXPLORE_VISUALIZE_AGGREGATES,
  FieldKey,
  FieldKind,
  MobileVital,
  WebVital,
} from 'sentry/utils/fields';

type MetricDetectorKind = 'threshold' | 'change' | 'dynamic';

export function MetricDetectorForm() {
  return (
    <Form hideFooter>
      <ChartContainer>
        <svg
          width="987"
          height="129"
          viewBox="0 0 987 129"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect
            width="984"
            height="115"
            transform="translate(0.507812 14)"
            fill="white"
          />
          <path
            d="M9.53438 34C9.45438 34 9.38638 33.976 9.33038 33.928C9.28238 33.872 9.25838 33.804 9.25838 33.724V31.996H5.37038C5.29038 31.996 5.22238 31.972 5.16638 31.924C5.11838 31.868 5.09438 31.8 5.09438 31.72V31.24C5.09438 31.208 5.10238 31.16 5.11838 31.096C5.14238 31.024 5.17838 30.952 5.22638 30.88L8.82638 25.804C8.93038 25.668 9.07838 25.6 9.27038 25.6H10.1344C10.2224 25.6 10.2904 25.628 10.3384 25.684C10.3864 25.732 10.4104 25.796 10.4104 25.876V30.952H11.5024C11.5824 30.952 11.6464 30.98 11.6944 31.036C11.7504 31.084 11.7784 31.148 11.7784 31.228V31.72C11.7784 31.8 11.7504 31.868 11.6944 31.924C11.6464 31.972 11.5824 31.996 11.5024 31.996H10.4104V33.724C10.4104 33.804 10.3864 33.872 10.3384 33.928C10.2904 33.976 10.2224 34 10.1344 34H9.53438ZM6.37838 30.976H9.28238V26.86L6.37838 30.976ZM15.2121 34.12C14.7641 34.12 14.3801 34.064 14.0601 33.952C13.7401 33.84 13.4801 33.704 13.2801 33.544C13.0801 33.384 12.9281 33.224 12.8241 33.064C12.7281 32.904 12.6761 32.776 12.6681 32.68C12.6601 32.592 12.6881 32.524 12.7521 32.476C12.8161 32.428 12.8801 32.404 12.9441 32.404H13.4721C13.5201 32.404 13.5561 32.412 13.5801 32.428C13.6121 32.436 13.6521 32.468 13.7001 32.524C13.8041 32.636 13.9201 32.748 14.0481 32.86C14.1761 32.972 14.3321 33.064 14.5161 33.136C14.7081 33.208 14.9441 33.244 15.2241 33.244C15.6321 33.244 15.9681 33.168 16.2321 33.016C16.4961 32.856 16.6281 32.624 16.6281 32.32C16.6281 32.12 16.5721 31.96 16.4601 31.84C16.3561 31.72 16.1641 31.612 15.8841 31.516C15.6121 31.42 15.2361 31.32 14.7561 31.216C14.2761 31.104 13.8961 30.968 13.6161 30.808C13.3361 30.64 13.1361 30.444 13.0161 30.22C12.8961 29.988 12.8361 29.728 12.8361 29.44C12.8361 29.144 12.9241 28.86 13.1001 28.588C13.2761 28.308 13.5321 28.08 13.8681 27.904C14.2121 27.728 14.6401 27.64 15.1521 27.64C15.5681 27.64 15.9241 27.692 16.2201 27.796C16.5161 27.9 16.7601 28.032 16.9521 28.192C17.1441 28.344 17.2881 28.496 17.3841 28.648C17.4801 28.8 17.5321 28.928 17.5401 29.032C17.5481 29.112 17.5241 29.18 17.4681 29.236C17.4121 29.284 17.3481 29.308 17.2761 29.308H16.7721C16.7161 29.308 16.6681 29.296 16.6281 29.272C16.5961 29.248 16.5641 29.22 16.5321 29.188C16.4521 29.084 16.3561 28.98 16.2441 28.876C16.1401 28.772 16.0001 28.688 15.8241 28.624C15.6561 28.552 15.4321 28.516 15.1521 28.516C14.7521 28.516 14.4521 28.6 14.2521 28.768C14.0521 28.936 13.9521 29.148 13.9521 29.404C13.9521 29.556 13.9961 29.692 14.0841 29.812C14.1721 29.932 14.3401 30.04 14.5881 30.136C14.8361 30.232 15.2041 30.336 15.6921 30.448C16.2201 30.552 16.6361 30.692 16.9401 30.868C17.2441 31.044 17.4601 31.248 17.5881 31.48C17.7161 31.712 17.7801 31.98 17.7801 32.284C17.7801 32.62 17.6801 32.928 17.4801 33.208C17.2881 33.488 17.0001 33.712 16.6161 33.88C16.2401 34.04 15.7721 34.12 15.2121 34.12Z"
            fill="#80708F"
          />
          <path
            d="M5.79038 71.5C5.70238 71.5 5.63438 71.476 5.58638 71.428C5.53838 71.372 5.51438 71.304 5.51438 71.224V70.84C5.51438 70.768 5.53438 70.688 5.57438 70.6C5.61438 70.512 5.69438 70.416 5.81438 70.312L8.35838 67.768C8.75838 67.432 9.07838 67.14 9.31838 66.892C9.55838 66.644 9.72638 66.408 9.82238 66.184C9.92638 65.96 9.97838 65.728 9.97838 65.488C9.97838 65.032 9.85038 64.672 9.59438 64.408C9.33838 64.136 8.95838 64 8.45438 64C8.13438 64 7.85838 64.068 7.62638 64.204C7.39438 64.332 7.21038 64.512 7.07438 64.744C6.94638 64.968 6.86238 65.224 6.82238 65.512C6.80638 65.616 6.76238 65.688 6.69038 65.728C6.62638 65.768 6.56638 65.788 6.51038 65.788H5.88638C5.80638 65.788 5.74238 65.768 5.69438 65.728C5.65438 65.68 5.63438 65.624 5.63438 65.56C5.64238 65.256 5.70638 64.952 5.82638 64.648C5.94638 64.336 6.12238 64.056 6.35438 63.808C6.58638 63.56 6.87838 63.36 7.23038 63.208C7.58238 63.048 7.99038 62.968 8.45438 62.968C9.08638 62.968 9.60238 63.084 10.0024 63.316C10.4024 63.54 10.6984 63.84 10.8904 64.216C11.0824 64.592 11.1784 65.004 11.1784 65.452C11.1784 65.804 11.1184 66.128 10.9984 66.424C10.8864 66.712 10.7144 66.996 10.4824 67.276C10.2584 67.548 9.97838 67.828 9.64238 68.116L7.33838 70.456H11.0824C11.1704 70.456 11.2384 70.48 11.2864 70.528C11.3344 70.576 11.3584 70.644 11.3584 70.732V71.224C11.3584 71.304 11.3344 71.372 11.2864 71.428C11.2384 71.476 11.1704 71.5 11.0824 71.5H5.79038ZM15.2121 71.62C14.7641 71.62 14.3801 71.564 14.0601 71.452C13.7401 71.34 13.4801 71.204 13.2801 71.044C13.0801 70.884 12.9281 70.724 12.8241 70.564C12.7281 70.404 12.6761 70.276 12.6681 70.18C12.6601 70.092 12.6881 70.024 12.7521 69.976C12.8161 69.928 12.8801 69.904 12.9441 69.904H13.4721C13.5201 69.904 13.5561 69.912 13.5801 69.928C13.6121 69.936 13.6521 69.968 13.7001 70.024C13.8041 70.136 13.9201 70.248 14.0481 70.36C14.1761 70.472 14.3321 70.564 14.5161 70.636C14.7081 70.708 14.9441 70.744 15.2241 70.744C15.6321 70.744 15.9681 70.668 16.2321 70.516C16.4961 70.356 16.6281 70.124 16.6281 69.82C16.6281 69.62 16.5721 69.46 16.4601 69.34C16.3561 69.22 16.1641 69.112 15.8841 69.016C15.6121 68.92 15.2361 68.82 14.7561 68.716C14.2761 68.604 13.8961 68.468 13.6161 68.308C13.3361 68.14 13.1361 67.944 13.0161 67.72C12.8961 67.488 12.8361 67.228 12.8361 66.94C12.8361 66.644 12.9241 66.36 13.1001 66.088C13.2761 65.808 13.5321 65.58 13.8681 65.404C14.2121 65.228 14.6401 65.14 15.1521 65.14C15.5681 65.14 15.9241 65.192 16.2201 65.296C16.5161 65.4 16.7601 65.532 16.9521 65.692C17.1441 65.844 17.2881 65.996 17.3841 66.148C17.4801 66.3 17.5321 66.428 17.5401 66.532C17.5481 66.612 17.5241 66.68 17.4681 66.736C17.4121 66.784 17.3481 66.808 17.2761 66.808H16.7721C16.7161 66.808 16.6681 66.796 16.6281 66.772C16.5961 66.748 16.5641 66.72 16.5321 66.688C16.4521 66.584 16.3561 66.48 16.2441 66.376C16.1401 66.272 16.0001 66.188 15.8241 66.124C15.6561 66.052 15.4321 66.016 15.1521 66.016C14.7521 66.016 14.4521 66.1 14.2521 66.268C14.0521 66.436 13.9521 66.648 13.9521 66.904C13.9521 67.056 13.9961 67.192 14.0841 67.312C14.1721 67.432 14.3401 67.54 14.5881 67.636C14.8361 67.732 15.2041 67.836 15.6921 67.948C16.2201 68.052 16.6361 68.192 16.9401 68.368C17.2441 68.544 17.4601 68.748 17.5881 68.98C17.7161 69.212 17.7801 69.48 17.7801 69.784C17.7801 70.12 17.6801 70.428 17.4801 70.708C17.2881 70.988 17.0001 71.212 16.6161 71.38C16.2401 71.54 15.7721 71.62 15.2121 71.62Z"
            fill="#80708F"
          />
          <path
            d="M14.501 109.12C13.949 109.12 13.481 109.036 13.097 108.868C12.721 108.692 12.413 108.452 12.173 108.148C11.933 107.844 11.757 107.496 11.645 107.104C11.541 106.712 11.477 106.296 11.453 105.856C11.453 105.64 11.449 105.412 11.441 105.172C11.441 104.932 11.441 104.692 11.441 104.452C11.449 104.204 11.453 103.968 11.453 103.744C11.469 103.304 11.533 102.888 11.645 102.496C11.765 102.096 11.941 101.748 12.173 101.452C12.413 101.148 12.721 100.912 13.097 100.744C13.481 100.568 13.949 100.48 14.501 100.48C15.053 100.48 15.517 100.568 15.893 100.744C16.277 100.912 16.589 101.148 16.829 101.452C17.069 101.748 17.245 102.096 17.357 102.496C17.469 102.888 17.533 103.304 17.549 103.744C17.557 103.968 17.561 104.204 17.561 104.452C17.561 104.692 17.561 104.932 17.561 105.172C17.561 105.412 17.557 105.64 17.549 105.856C17.533 106.296 17.469 106.712 17.357 107.104C17.245 107.496 17.069 107.844 16.829 108.148C16.597 108.452 16.289 108.692 15.905 108.868C15.521 109.036 15.053 109.12 14.501 109.12ZM14.501 108.1C15.125 108.1 15.585 107.896 15.881 107.488C16.177 107.072 16.333 106.508 16.349 105.796C16.357 105.564 16.361 105.34 16.361 105.124C16.369 104.9 16.369 104.68 16.361 104.464C16.361 104.24 16.357 104.02 16.349 103.804C16.333 103.108 16.177 102.552 15.881 102.136C15.585 101.712 15.125 101.5 14.501 101.5C13.885 101.5 13.425 101.712 13.121 102.136C12.825 102.552 12.669 103.108 12.653 103.804C12.653 104.02 12.649 104.24 12.641 104.464C12.641 104.68 12.641 104.9 12.641 105.124C12.649 105.34 12.653 105.564 12.653 105.796C12.669 106.508 12.825 107.072 13.121 107.488C13.425 107.896 13.885 108.1 14.501 108.1Z"
            fill="#80708F"
          />
          <path
            d="M984.508 30H26.5078"
            stroke="#2D0055"
            strokeOpacity="0.06"
            strokeMiterlimit="10"
          />
          <path
            d="M984.508 67.5H26.5078"
            stroke="#2D0055"
            strokeOpacity="0.06"
            strokeMiterlimit="10"
          />
          <g opacity="0.54">
            <path
              d="M26.4702 89.0395L45.8158 103.515C45.9612 103.624 46.1334 103.691 46.3141 103.709L65.6057 105.664L86.7389 106.244H124.774C124.981 106.244 125.182 106.18 125.351 106.061L167.127 76.5554C167.278 76.4487 167.456 76.3859 167.641 76.3743L189.167 75.0109C189.238 75.0064 189.31 75.0095 189.38 75.0203L208.748 77.9642C208.81 77.9737 208.874 77.9772 208.937 77.9748L229.192 77.1853H251.108L271.459 78.9699L289.461 81.3494H311.377L351.174 84.5125C351.255 84.5188 351.335 84.5155 351.415 84.5026L413.129 74.4394L433.384 71.2817C433.448 71.2717 433.512 71.268 433.577 71.2705L453.83 72.0599L474.846 71.8627C474.924 71.8619 475.002 71.8704 475.078 71.8878L494.531 76.341L514.763 80.2836C514.842 80.299 514.922 80.3048 515.003 80.3009L535.038 79.3248C535.166 79.3185 535.294 79.3369 535.415 79.379L555.449 86.34C555.538 86.3708 555.63 86.389 555.724 86.394L575.714 87.461C575.858 87.4687 575.999 87.5074 576.127 87.5746L598.513 99.3542C598.592 99.3957 598.676 99.4265 598.763 99.4457L616.068 103.269C616.418 103.347 616.783 103.23 617.024 102.965L638.268 79.5647C638.448 79.3664 638.701 79.2486 638.968 79.2377L657.909 78.47C658.046 78.4644 658.182 78.4304 658.306 78.3701L678.233 68.6764C678.387 68.6014 678.558 68.5673 678.729 68.5773L698.726 69.7464C698.788 69.75 698.849 69.7479 698.91 69.7402L719.169 67.174L739.328 63.442C739.454 63.4185 739.584 63.4198 739.71 63.4456L759.497 67.4942C759.737 67.5434 759.951 67.6793 760.098 67.8761L779.832 94.3391C780.068 94.6556 780.469 94.8036 780.854 94.7168L801.207 90.1336C801.304 90.1116 801.404 90.1044 801.504 90.1122L821.366 91.6605C821.585 91.6775 821.804 91.622 821.988 91.5024L841.066 79.1274C841.201 79.0395 841.356 78.9858 841.516 78.9707L862.318 77.0189C862.376 77.0135 862.434 77.0131 862.492 77.0178L881.973 78.5971L922.674 84.1668H963.106C963.282 84.1668 963.455 84.1204 963.607 84.0322L984.508 71.933"
              stroke="#80708F"
              strokeWidth="1.75"
              strokeLinecap="round"
              strokeDasharray="4 4"
            />
            <path
              d="M45.8044 89.3805L26.9281 102.809C26.6644 102.996 26.5078 103.3 26.5078 103.624V106.875C26.5078 107.427 26.9555 107.875 27.5078 107.875H984.948C985.501 107.875 985.948 107.427 985.948 106.875V75.8363C985.948 75.4076 985.675 75.0266 985.269 74.8891L964.94 68.0059C964.837 67.971 964.729 67.9531 964.62 67.9531H924.024L883.354 72.5496C883.294 72.5564 883.233 72.5577 883.172 72.5535L863.742 71.2001C863.692 71.1966 863.642 71.1969 863.592 71.2009L842.616 72.8919C842.541 72.898 842.465 72.8955 842.39 72.8844L822.906 70.0005L802.655 68.6443C802.569 68.6385 802.483 68.6439 802.399 68.6602L781.489 72.7058C781.405 72.7222 781.318 72.7275 781.232 72.7218L760.982 71.3655L740.766 67.8115C740.657 67.7923 740.545 67.7914 740.436 67.8088L720.221 71.0243L699.92 73.2337C699.867 73.2394 699.814 73.241 699.761 73.2383L679.585 72.2249C679.502 72.2207 679.419 72.2269 679.338 72.2432L659.161 76.2973C659.107 76.3081 659.053 76.3144 658.998 76.3163L639.484 76.9959L617.699 80.0513C617.591 80.0665 617.481 80.0638 617.374 80.0435L599.624 76.674C599.546 76.6593 599.471 76.6353 599.399 76.6027L577.255 66.5913C576.955 66.4556 576.607 66.4764 576.325 66.647L556.774 78.4798C556.533 78.6259 556.241 78.6632 555.97 78.5825L536.175 72.6729C536.069 72.6411 535.958 72.6273 535.847 72.6319L515.739 73.4737C515.669 73.4766 515.6 73.4723 515.532 73.4608L495.809 70.1585C495.464 70.1008 495.115 70.2269 494.887 70.491L475.954 92.4076C475.766 92.6254 475.493 92.7515 475.205 92.7539L454.494 92.9208L434.197 92.2411C434.141 92.2393 434.086 92.2421 434.031 92.2494L413.733 94.9682L351.808 94.7976L311.832 92.0677H289.884L271.855 90.0203L251.475 88.4847H229.527L209.228 89.1645C209.174 89.1663 209.119 89.1637 209.065 89.1566L189.642 86.6199C189.581 86.6119 189.519 86.6096 189.458 86.6129L167.602 87.8023L125.274 86.9492H86.9567C86.8955 86.9492 86.8345 86.9548 86.7744 86.9659L65.8343 90.8486C65.7456 90.8651 65.6551 90.8694 65.5652 90.8616L46.4708 89.1991C46.2342 89.1785 45.9979 89.2428 45.8044 89.3805Z"
              fill="url(#paint0_linear_1203_12346)"
            />
            <path
              opacity="0.8"
              d="M26.5078 104.341L45.7953 89.7861C45.9941 89.6361 46.2417 89.5656 46.4896 89.5885L65.5571 91.3496C65.6523 91.3584 65.7483 91.3535 65.8421 91.335L86.7692 87.2188C86.8328 87.2063 86.8974 87.2 86.9622 87.2H125.274L167.602 88.105L189.452 86.8437C189.517 86.8399 189.582 86.8426 189.647 86.8515L209.06 89.541C209.118 89.549 209.175 89.5519 209.233 89.5499L229.527 88.829H251.475L271.855 90.4579L289.884 92.6298H311.832L351.808 95.5257L413.661 95.7065C413.709 95.7066 413.757 95.7033 413.804 95.6965L434.026 92.8233C434.084 92.815 434.143 92.8118 434.202 92.8139L454.494 93.5348L475.188 93.3578C475.485 93.3552 475.766 93.2202 475.954 92.9893L494.883 69.746C495.112 69.4646 495.476 69.3294 495.833 69.3929L515.525 72.8906C515.598 72.9034 515.671 72.9083 515.745 72.905L535.837 72.0128C535.955 72.0076 536.072 72.0231 536.184 72.0585L555.947 78.3175C556.231 78.4073 556.54 78.3663 556.79 78.2057L576.306 65.676C576.597 65.4886 576.966 65.4658 577.278 65.6158L599.394 76.2226C599.469 76.2585 599.548 76.2849 599.629 76.3013L617.364 79.8726C617.478 79.8954 617.594 79.8984 617.709 79.8814L639.484 76.6417L658.993 75.9209C659.051 75.9188 659.108 75.9117 659.165 75.8996L679.331 71.6015C679.417 71.5832 679.505 71.5763 679.592 71.581L699.756 72.6554C699.812 72.6584 699.869 72.6566 699.924 72.6502L720.221 70.307L740.426 66.8977C740.542 66.8781 740.66 66.8791 740.776 66.9007L760.981 70.6689L781.224 72.1071C781.316 72.1136 781.407 72.1076 781.496 72.0892L802.391 67.8007C802.48 67.7824 802.572 67.7764 802.663 67.7828L822.906 69.221L842.383 72.2791C842.462 72.2916 842.543 72.2944 842.623 72.2876L863.587 70.4947C863.64 70.4902 863.693 70.4899 863.746 70.4938L883.166 71.9288C883.231 71.9335 883.295 71.932 883.359 71.9244L924.024 67.0491H964.61C964.725 67.0491 964.84 67.069 964.948 67.108L985.948 74.6508"
              stroke="#80708F"
              strokeWidth="1.5"
              strokeLinecap="round"
            />
          </g>
          <path
            d="M26.4702 53.542L45.7981 74.7033C45.9533 74.8732 46.1622 74.9844 46.3898 75.0181L65.6057 77.8674L86.7389 78.7158H124.668C124.939 78.7158 125.198 78.6059 125.387 78.4112L167.101 35.3021C167.267 35.1304 167.489 35.0238 167.727 35.0018L189.118 33.0194C189.221 33.0098 189.326 33.0164 189.427 33.039L208.706 37.327C208.796 37.347 208.888 37.3545 208.98 37.3492L229.192 36.1966H251.108L271.459 38.8079L289.367 42.2714C289.429 42.2835 289.493 42.2896 289.557 42.2896H311.377L351.119 46.9115C351.236 46.925 351.353 46.9181 351.467 46.8909L413.129 32.1786L433.342 27.5677C433.433 27.5468 433.527 27.539 433.621 27.5443L453.83 28.6968L474.793 28.409C474.906 28.4075 475.018 28.4249 475.125 28.4607L494.531 34.9611L514.712 40.7157C514.824 40.7476 514.941 40.7598 515.057 40.7515L534.955 39.333C535.136 39.3201 535.318 39.3568 535.479 39.4391L555.405 49.5699C555.522 49.6293 555.65 49.6652 555.781 49.6754L575.636 51.2262C575.83 51.2413 576.015 51.3124 576.169 51.4308L598.494 68.6206C598.585 68.6906 598.687 68.7445 598.797 68.7798L615.889 74.3056C616.327 74.4471 616.804 74.272 617.047 73.8814L638.277 39.6649C638.448 39.3888 638.743 39.2131 639.067 39.1939L657.831 38.081C658.018 38.0699 658.199 38.0063 658.352 37.8974L678.169 23.7917C678.362 23.6542 678.598 23.5898 678.834 23.61L698.684 25.3081C698.773 25.3157 698.863 25.3113 698.951 25.295L719.169 21.5477L739.244 16.1095C739.424 16.0607 739.614 16.0632 739.793 16.1167L759.46 22.0053C759.722 22.0836 759.94 22.2657 760.064 22.5092L779.831 61.2939C780.055 61.7335 780.566 61.944 781.035 61.7896L801.145 55.1631C801.283 55.1179 801.428 55.1029 801.572 55.1193L821.241 57.3628C821.534 57.3963 821.828 57.2981 822.042 57.0945L841.038 39.0642C841.19 38.9201 841.383 38.8273 841.591 38.7988L862.278 35.9585C862.362 35.947 862.448 35.9462 862.532 35.9562L881.973 38.2623L922.577 46.3927C922.641 46.4056 922.707 46.4121 922.773 46.4121H963.008C963.245 46.4121 963.474 46.3282 963.654 46.1752L984.508 28.5112"
            stroke="#EBC000"
            strokeWidth="1.75"
            strokeLinecap="round"
            strokeDasharray="4 4"
          />
          <path
            d="M26.4702 42.071L45.7988 65.1364C45.9531 65.3205 46.1685 65.4429 46.4057 65.4813L65.6057 68.5843L86.7389 69.509H124.642C124.928 69.509 125.2 69.3866 125.39 69.1729L167.099 22.1923C167.266 22.0046 167.497 21.8865 167.746 21.8613L189.104 19.7039C189.217 19.6926 189.33 19.7004 189.44 19.727L208.695 24.3948C208.792 24.4184 208.893 24.4273 208.993 24.421L229.192 23.1654H251.108L271.459 26.0116L289.359 29.785C289.427 29.7993 289.496 29.8065 289.565 29.8065H311.377L351.104 34.8422C351.23 34.8582 351.358 34.85 351.481 34.8179L413.129 18.7861L433.33 13.7634C433.429 13.7387 433.532 13.7294 433.633 13.7358L453.83 14.9912L474.779 14.6777C474.901 14.6759 475.022 14.6964 475.137 14.7382L494.531 21.8188L514.698 28.0868C514.819 28.1244 514.946 28.1387 515.073 28.1288L534.933 26.5858C535.128 26.5706 535.323 26.6131 535.495 26.7081L555.396 37.7362C555.519 37.8044 555.655 37.8459 555.795 37.8579L575.617 39.5453C575.823 39.5627 576.018 39.6432 576.176 39.7757L598.493 58.5043C598.585 58.5815 598.69 58.6415 598.803 58.6815L615.846 64.6869C616.302 64.8476 616.808 64.6588 617.047 64.2384L638.283 26.9342C638.45 26.6418 638.752 26.4527 639.088 26.431L657.811 25.2206C658.011 25.2077 658.202 25.1353 658.36 25.0128L678.156 9.655C678.356 9.49935 678.609 9.42585 678.862 9.44943L698.672 11.2965C698.769 11.3056 698.867 11.3004 698.963 11.281L719.169 7.19904L739.222 1.27842C739.416 1.22111 739.623 1.22404 739.815 1.28683L759.458 7.69706C759.721 7.78284 759.936 7.97365 760.054 8.22414L779.834 50.5272C780.053 50.9951 780.592 51.2194 781.078 51.0448L801.129 43.8437C801.277 43.7907 801.435 43.7732 801.59 43.7925L821.209 46.2314C821.521 46.2702 821.833 46.1601 822.051 45.9341L841.036 26.2933C841.189 26.1352 841.39 26.0319 841.607 25.9993L862.267 22.9077C862.359 22.894 862.452 22.8931 862.543 22.9049L881.973 25.417L922.568 34.2768C922.638 34.2921 922.71 34.2998 922.782 34.2998H962.984C963.235 34.2998 963.477 34.2051 963.662 34.0346L984.508 14.7889"
            stroke="#F55459"
            strokeWidth="1.75"
            strokeLinecap="round"
            strokeDasharray="4 4"
          />
          <path
            d="M984.508 105L26.5078 105"
            stroke="#3A115F"
            strokeOpacity="0.14"
            strokeWidth="2"
            strokeMiterlimit="10"
            strokeLinecap="round"
          />
          <path
            d="M133.288 105V109"
            stroke="#3A115F"
            strokeOpacity="0.14"
            strokeWidth="1.5"
            strokeMiterlimit="10"
            strokeLinecap="round"
          />
          <path
            d="M114.232 124.12C113.768 124.12 113.34 124.064 112.948 123.952C112.564 123.832 112.232 123.664 111.952 123.448C111.68 123.224 111.468 122.956 111.316 122.644C111.164 122.332 111.088 121.98 111.088 121.588C111.088 121.1 111.208 120.68 111.448 120.328C111.688 119.976 112 119.708 112.384 119.524C112.08 119.34 111.836 119.1 111.652 118.804C111.476 118.508 111.388 118.156 111.388 117.748C111.388 117.268 111.504 116.864 111.736 116.536C111.976 116.2 112.308 115.94 112.732 115.756C113.164 115.572 113.664 115.48 114.232 115.48C114.8 115.48 115.296 115.572 115.72 115.756C116.152 115.932 116.484 116.188 116.716 116.524C116.956 116.86 117.076 117.264 117.076 117.736C117.076 118.144 116.984 118.5 116.8 118.804C116.624 119.1 116.384 119.34 116.08 119.524C116.472 119.708 116.788 119.976 117.028 120.328C117.268 120.68 117.388 121.1 117.388 121.588C117.388 122.108 117.252 122.56 116.98 122.944C116.716 123.32 116.348 123.612 115.876 123.82C115.404 124.02 114.856 124.12 114.232 124.12ZM114.232 123.16C114.6 123.16 114.932 123.096 115.228 122.968C115.524 122.84 115.76 122.66 115.936 122.428C116.112 122.188 116.2 121.908 116.2 121.588C116.2 121.26 116.112 120.984 115.936 120.76C115.76 120.528 115.524 120.352 115.228 120.232C114.932 120.104 114.6 120.04 114.232 120.04C113.872 120.04 113.54 120.104 113.236 120.232C112.94 120.352 112.704 120.528 112.528 120.76C112.352 120.984 112.264 121.26 112.264 121.588C112.264 121.908 112.352 122.188 112.528 122.428C112.704 122.66 112.94 122.84 113.236 122.968C113.54 123.096 113.872 123.16 114.232 123.16ZM114.232 119.092C114.544 119.092 114.828 119.036 115.084 118.924C115.348 118.812 115.556 118.66 115.708 118.468C115.868 118.276 115.948 118.044 115.948 117.772C115.948 117.5 115.872 117.264 115.72 117.064C115.568 116.864 115.36 116.712 115.096 116.608C114.84 116.496 114.552 116.44 114.232 116.44C113.912 116.44 113.62 116.496 113.356 116.608C113.1 116.712 112.896 116.864 112.744 117.064C112.6 117.264 112.528 117.5 112.528 117.772C112.528 118.052 112.6 118.292 112.744 118.492C112.896 118.684 113.1 118.832 113.356 118.936C113.62 119.04 113.912 119.092 114.232 119.092ZM119.058 119.8C118.978 119.8 118.91 119.776 118.854 119.728C118.806 119.672 118.782 119.604 118.782 119.524V118.684C118.782 118.604 118.806 118.54 118.854 118.492C118.91 118.436 118.978 118.408 119.058 118.408H119.91C119.998 118.408 120.066 118.436 120.114 118.492C120.17 118.54 120.198 118.604 120.198 118.684V119.524C120.198 119.604 120.17 119.672 120.114 119.728C120.066 119.776 119.998 119.8 119.91 119.8H119.058ZM119.058 124C118.978 124 118.91 123.976 118.854 123.928C118.806 123.872 118.782 123.804 118.782 123.724V122.884C118.782 122.804 118.806 122.74 118.854 122.692C118.91 122.636 118.978 122.608 119.058 122.608H119.91C119.998 122.608 120.066 122.636 120.114 122.692C120.17 122.74 120.198 122.804 120.198 122.884V123.724C120.198 123.804 120.17 123.872 120.114 123.928C120.066 123.976 119.998 124 119.91 124H119.058ZM124.732 124.12C124.18 124.12 123.712 124.036 123.328 123.868C122.952 123.692 122.644 123.452 122.404 123.148C122.164 122.844 121.988 122.496 121.876 122.104C121.772 121.712 121.708 121.296 121.684 120.856C121.684 120.64 121.68 120.412 121.672 120.172C121.672 119.932 121.672 119.692 121.672 119.452C121.68 119.204 121.684 118.968 121.684 118.744C121.7 118.304 121.764 117.888 121.876 117.496C121.996 117.096 122.172 116.748 122.404 116.452C122.644 116.148 122.952 115.912 123.328 115.744C123.712 115.568 124.18 115.48 124.732 115.48C125.284 115.48 125.748 115.568 126.124 115.744C126.508 115.912 126.82 116.148 127.06 116.452C127.3 116.748 127.476 117.096 127.588 117.496C127.7 117.888 127.764 118.304 127.78 118.744C127.788 118.968 127.792 119.204 127.792 119.452C127.792 119.692 127.792 119.932 127.792 120.172C127.792 120.412 127.788 120.64 127.78 120.856C127.764 121.296 127.7 121.712 127.588 122.104C127.476 122.496 127.3 122.844 127.06 123.148C126.828 123.452 126.52 123.692 126.136 123.868C125.752 124.036 125.284 124.12 124.732 124.12ZM124.732 123.1C125.356 123.1 125.816 122.896 126.112 122.488C126.408 122.072 126.564 121.508 126.58 120.796C126.588 120.564 126.592 120.34 126.592 120.124C126.6 119.9 126.6 119.68 126.592 119.464C126.592 119.24 126.588 119.02 126.58 118.804C126.564 118.108 126.408 117.552 126.112 117.136C125.816 116.712 125.356 116.5 124.732 116.5C124.116 116.5 123.656 116.712 123.352 117.136C123.056 117.552 122.9 118.108 122.884 118.804C122.884 119.02 122.88 119.24 122.872 119.464C122.872 119.68 122.872 119.9 122.872 120.124C122.88 120.34 122.884 120.564 122.884 120.796C122.9 121.508 123.056 122.072 123.352 122.488C123.656 122.896 124.116 123.1 124.732 123.1ZM132.162 124.12C131.61 124.12 131.142 124.036 130.758 123.868C130.382 123.692 130.074 123.452 129.834 123.148C129.594 122.844 129.418 122.496 129.306 122.104C129.202 121.712 129.138 121.296 129.114 120.856C129.114 120.64 129.11 120.412 129.102 120.172C129.102 119.932 129.102 119.692 129.102 119.452C129.11 119.204 129.114 118.968 129.114 118.744C129.13 118.304 129.194 117.888 129.306 117.496C129.426 117.096 129.602 116.748 129.834 116.452C130.074 116.148 130.382 115.912 130.758 115.744C131.142 115.568 131.61 115.48 132.162 115.48C132.714 115.48 133.178 115.568 133.554 115.744C133.938 115.912 134.25 116.148 134.49 116.452C134.73 116.748 134.906 117.096 135.018 117.496C135.13 117.888 135.194 118.304 135.21 118.744C135.218 118.968 135.222 119.204 135.222 119.452C135.222 119.692 135.222 119.932 135.222 120.172C135.222 120.412 135.218 120.64 135.21 120.856C135.194 121.296 135.13 121.712 135.018 122.104C134.906 122.496 134.73 122.844 134.49 123.148C134.258 123.452 133.95 123.692 133.566 123.868C133.182 124.036 132.714 124.12 132.162 124.12ZM132.162 123.1C132.786 123.1 133.246 122.896 133.542 122.488C133.838 122.072 133.994 121.508 134.01 120.796C134.018 120.564 134.022 120.34 134.022 120.124C134.03 119.9 134.03 119.68 134.022 119.464C134.022 119.24 134.018 119.02 134.01 118.804C133.994 118.108 133.838 117.552 133.542 117.136C133.246 116.712 132.786 116.5 132.162 116.5C131.546 116.5 131.086 116.712 130.782 117.136C130.486 117.552 130.33 118.108 130.314 118.804C130.314 119.02 130.31 119.24 130.302 119.464C130.302 119.68 130.302 119.9 130.302 120.124C130.31 120.34 130.314 120.564 130.314 120.796C130.33 121.508 130.486 122.072 130.782 122.488C131.086 122.896 131.546 123.1 132.162 123.1ZM140.145 124C140.057 124 139.989 123.976 139.941 123.928C139.893 123.872 139.869 123.804 139.869 123.724V115.888C139.869 115.8 139.893 115.732 139.941 115.684C139.989 115.628 140.057 115.6 140.145 115.6H143.193C143.785 115.6 144.297 115.696 144.729 115.888C145.169 116.08 145.509 116.368 145.749 116.752C145.989 117.128 146.109 117.6 146.109 118.168C146.109 118.736 145.989 119.208 145.749 119.584C145.509 119.96 145.169 120.244 144.729 120.436C144.297 120.628 143.785 120.724 143.193 120.724H141.069V123.724C141.069 123.804 141.041 123.872 140.985 123.928C140.937 123.976 140.869 124 140.781 124H140.145ZM141.057 119.716H143.133C143.725 119.716 144.169 119.584 144.465 119.32C144.761 119.056 144.909 118.672 144.909 118.168C144.909 117.672 144.765 117.288 144.477 117.016C144.189 116.744 143.741 116.608 143.133 116.608H141.057V119.716ZM147.844 124C147.764 124 147.696 123.976 147.64 123.928C147.592 123.872 147.568 123.804 147.568 123.724V115.888C147.568 115.8 147.592 115.732 147.64 115.684C147.696 115.628 147.764 115.6 147.844 115.6H148.444C148.54 115.6 148.612 115.624 148.66 115.672C148.708 115.72 148.736 115.76 148.744 115.792L151.288 120.64L153.844 115.792C153.86 115.76 153.888 115.72 153.928 115.672C153.976 115.624 154.048 115.6 154.144 115.6H154.732C154.82 115.6 154.888 115.628 154.936 115.684C154.992 115.732 155.02 115.8 155.02 115.888V123.724C155.02 123.804 154.992 123.872 154.936 123.928C154.888 123.976 154.82 124 154.732 124H154.144C154.064 124 153.996 123.976 153.94 123.928C153.892 123.872 153.868 123.804 153.868 123.724V117.82L151.864 121.732C151.832 121.812 151.784 121.876 151.72 121.924C151.656 121.964 151.576 121.984 151.48 121.984H151.108C151.004 121.984 150.92 121.964 150.856 121.924C150.8 121.876 150.752 121.812 150.712 121.732L148.708 117.82V123.724C148.708 123.804 148.68 123.872 148.624 123.928C148.576 123.976 148.512 124 148.432 124H147.844Z"
            fill="#80708F"
          />
          <path
            d="M382.323 105V109"
            stroke="#3A115F"
            strokeOpacity="0.14"
            strokeWidth="1.5"
            strokeMiterlimit="10"
            strokeLinecap="round"
          />
          <path
            d="M364.348 124C364.268 124 364.2 123.976 364.144 123.928C364.096 123.872 364.072 123.804 364.072 123.724V121.996H360.184C360.104 121.996 360.036 121.972 359.98 121.924C359.932 121.868 359.908 121.8 359.908 121.72V121.24C359.908 121.208 359.916 121.16 359.932 121.096C359.956 121.024 359.992 120.952 360.04 120.88L363.64 115.804C363.744 115.668 363.892 115.6 364.084 115.6H364.948C365.036 115.6 365.104 115.628 365.152 115.684C365.2 115.732 365.224 115.796 365.224 115.876V120.952H366.316C366.396 120.952 366.46 120.98 366.508 121.036C366.564 121.084 366.592 121.148 366.592 121.228V121.72C366.592 121.8 366.564 121.868 366.508 121.924C366.46 121.972 366.396 121.996 366.316 121.996H365.224V123.724C365.224 123.804 365.2 123.872 365.152 123.928C365.104 123.976 365.036 124 364.948 124H364.348ZM361.192 120.976H364.096V116.86L361.192 120.976ZM368.082 119.8C368.002 119.8 367.934 119.776 367.878 119.728C367.83 119.672 367.806 119.604 367.806 119.524V118.684C367.806 118.604 367.83 118.54 367.878 118.492C367.934 118.436 368.002 118.408 368.082 118.408H368.934C369.022 118.408 369.09 118.436 369.138 118.492C369.194 118.54 369.222 118.604 369.222 118.684V119.524C369.222 119.604 369.194 119.672 369.138 119.728C369.09 119.776 369.022 119.8 368.934 119.8H368.082ZM368.082 124C368.002 124 367.934 123.976 367.878 123.928C367.83 123.872 367.806 123.804 367.806 123.724V122.884C367.806 122.804 367.83 122.74 367.878 122.692C367.934 122.636 368.002 122.608 368.082 122.608H368.934C369.022 122.608 369.09 122.636 369.138 122.692C369.194 122.74 369.222 122.804 369.222 122.884V123.724C369.222 123.804 369.194 123.872 369.138 123.928C369.09 123.976 369.022 124 368.934 124H368.082ZM373.756 124.12C373.204 124.12 372.736 124.036 372.352 123.868C371.976 123.692 371.668 123.452 371.428 123.148C371.188 122.844 371.012 122.496 370.9 122.104C370.796 121.712 370.732 121.296 370.708 120.856C370.708 120.64 370.704 120.412 370.696 120.172C370.696 119.932 370.696 119.692 370.696 119.452C370.704 119.204 370.708 118.968 370.708 118.744C370.724 118.304 370.788 117.888 370.9 117.496C371.02 117.096 371.196 116.748 371.428 116.452C371.668 116.148 371.976 115.912 372.352 115.744C372.736 115.568 373.204 115.48 373.756 115.48C374.308 115.48 374.772 115.568 375.148 115.744C375.532 115.912 375.844 116.148 376.084 116.452C376.324 116.748 376.5 117.096 376.612 117.496C376.724 117.888 376.788 118.304 376.804 118.744C376.812 118.968 376.816 119.204 376.816 119.452C376.816 119.692 376.816 119.932 376.816 120.172C376.816 120.412 376.812 120.64 376.804 120.856C376.788 121.296 376.724 121.712 376.612 122.104C376.5 122.496 376.324 122.844 376.084 123.148C375.852 123.452 375.544 123.692 375.16 123.868C374.776 124.036 374.308 124.12 373.756 124.12ZM373.756 123.1C374.38 123.1 374.84 122.896 375.136 122.488C375.432 122.072 375.588 121.508 375.604 120.796C375.612 120.564 375.616 120.34 375.616 120.124C375.624 119.9 375.624 119.68 375.616 119.464C375.616 119.24 375.612 119.02 375.604 118.804C375.588 118.108 375.432 117.552 375.136 117.136C374.84 116.712 374.38 116.5 373.756 116.5C373.14 116.5 372.68 116.712 372.376 117.136C372.08 117.552 371.924 118.108 371.908 118.804C371.908 119.02 371.904 119.24 371.896 119.464C371.896 119.68 371.896 119.9 371.896 120.124C371.904 120.34 371.908 120.564 371.908 120.796C371.924 121.508 372.08 122.072 372.376 122.488C372.68 122.896 373.14 123.1 373.756 123.1ZM381.186 124.12C380.634 124.12 380.166 124.036 379.782 123.868C379.406 123.692 379.098 123.452 378.858 123.148C378.618 122.844 378.442 122.496 378.33 122.104C378.226 121.712 378.162 121.296 378.138 120.856C378.138 120.64 378.134 120.412 378.126 120.172C378.126 119.932 378.126 119.692 378.126 119.452C378.134 119.204 378.138 118.968 378.138 118.744C378.154 118.304 378.218 117.888 378.33 117.496C378.45 117.096 378.626 116.748 378.858 116.452C379.098 116.148 379.406 115.912 379.782 115.744C380.166 115.568 380.634 115.48 381.186 115.48C381.738 115.48 382.202 115.568 382.578 115.744C382.962 115.912 383.274 116.148 383.514 116.452C383.754 116.748 383.93 117.096 384.042 117.496C384.154 117.888 384.218 118.304 384.234 118.744C384.242 118.968 384.246 119.204 384.246 119.452C384.246 119.692 384.246 119.932 384.246 120.172C384.246 120.412 384.242 120.64 384.234 120.856C384.218 121.296 384.154 121.712 384.042 122.104C383.93 122.496 383.754 122.844 383.514 123.148C383.282 123.452 382.974 123.692 382.59 123.868C382.206 124.036 381.738 124.12 381.186 124.12ZM381.186 123.1C381.81 123.1 382.27 122.896 382.566 122.488C382.862 122.072 383.018 121.508 383.034 120.796C383.042 120.564 383.046 120.34 383.046 120.124C383.054 119.9 383.054 119.68 383.046 119.464C383.046 119.24 383.042 119.02 383.034 118.804C383.018 118.108 382.862 117.552 382.566 117.136C382.27 116.712 381.81 116.5 381.186 116.5C380.57 116.5 380.11 116.712 379.806 117.136C379.51 117.552 379.354 118.108 379.338 118.804C379.338 119.02 379.334 119.24 379.326 119.464C379.326 119.68 379.326 119.9 379.326 120.124C379.334 120.34 379.338 120.564 379.338 120.796C379.354 121.508 379.51 122.072 379.806 122.488C380.11 122.896 380.57 123.1 381.186 123.1ZM388.012 124C387.948 124 387.892 123.976 387.844 123.928C387.796 123.88 387.772 123.824 387.772 123.76C387.772 123.72 387.776 123.676 387.784 123.628L390.76 115.864C390.792 115.784 390.836 115.72 390.892 115.672C390.948 115.624 391.032 115.6 391.144 115.6H391.96C392.064 115.6 392.144 115.624 392.2 115.672C392.264 115.72 392.312 115.784 392.344 115.864L395.308 123.628C395.324 123.676 395.332 123.72 395.332 123.76C395.332 123.824 395.308 123.88 395.26 123.928C395.212 123.976 395.156 124 395.092 124H394.48C394.384 124 394.312 123.976 394.264 123.928C394.224 123.88 394.196 123.836 394.18 123.796L393.52 122.092H389.584L388.924 123.796C388.916 123.836 388.888 123.88 388.84 123.928C388.792 123.976 388.72 124 388.624 124H388.012ZM389.932 121.06H393.172L391.552 116.8L389.932 121.06ZM396.891 124C396.811 124 396.743 123.976 396.687 123.928C396.639 123.872 396.615 123.804 396.615 123.724V115.888C396.615 115.8 396.639 115.732 396.687 115.684C396.743 115.628 396.811 115.6 396.891 115.6H397.491C397.587 115.6 397.659 115.624 397.707 115.672C397.755 115.72 397.783 115.76 397.791 115.792L400.335 120.64L402.891 115.792C402.907 115.76 402.935 115.72 402.975 115.672C403.023 115.624 403.095 115.6 403.191 115.6H403.779C403.867 115.6 403.935 115.628 403.983 115.684C404.039 115.732 404.067 115.8 404.067 115.888V123.724C404.067 123.804 404.039 123.872 403.983 123.928C403.935 123.976 403.867 124 403.779 124H403.191C403.111 124 403.043 123.976 402.987 123.928C402.939 123.872 402.915 123.804 402.915 123.724V117.82L400.911 121.732C400.879 121.812 400.831 121.876 400.767 121.924C400.703 121.964 400.623 121.984 400.527 121.984H400.155C400.051 121.984 399.967 121.964 399.903 121.924C399.847 121.876 399.799 121.812 399.759 121.732L397.755 117.82V123.724C397.755 123.804 397.727 123.872 397.671 123.928C397.623 123.976 397.559 124 397.479 124H396.891Z"
            fill="#80708F"
          />
          <path
            d="M630.026 105V109"
            stroke="#3A115F"
            strokeOpacity="0.14"
            strokeWidth="1.5"
            strokeMiterlimit="10"
            strokeLinecap="round"
          />
          <path
            d="M604.903 124C604.823 124 604.755 123.976 604.699 123.928C604.643 123.872 604.615 123.804 604.615 123.724V123.232C604.615 123.144 604.643 123.076 604.699 123.028C604.755 122.98 604.823 122.956 604.903 122.956H606.943V117.004L605.323 118.24C605.259 118.288 605.191 118.308 605.119 118.3C605.055 118.292 604.995 118.252 604.939 118.18L604.639 117.796C604.591 117.724 604.571 117.652 604.579 117.58C604.587 117.508 604.627 117.448 604.699 117.4L606.931 115.684C606.979 115.644 607.027 115.62 607.075 115.612C607.123 115.604 607.175 115.6 607.231 115.6H607.843C607.923 115.6 607.987 115.628 608.035 115.684C608.091 115.732 608.119 115.796 608.119 115.876V122.956H609.967C610.055 122.956 610.123 122.98 610.171 123.028C610.227 123.076 610.255 123.144 610.255 123.232V123.724C610.255 123.804 610.227 123.872 610.171 123.928C610.123 123.976 610.055 124 609.967 124H604.903ZM612.033 124C611.945 124 611.877 123.976 611.829 123.928C611.781 123.872 611.757 123.804 611.757 123.724V123.34C611.757 123.268 611.777 123.188 611.817 123.1C611.857 123.012 611.937 122.916 612.057 122.812L614.601 120.268C615.001 119.932 615.321 119.64 615.561 119.392C615.801 119.144 615.969 118.908 616.065 118.684C616.169 118.46 616.221 118.228 616.221 117.988C616.221 117.532 616.093 117.172 615.837 116.908C615.581 116.636 615.201 116.5 614.697 116.5C614.377 116.5 614.101 116.568 613.869 116.704C613.637 116.832 613.453 117.012 613.317 117.244C613.189 117.468 613.105 117.724 613.065 118.012C613.049 118.116 613.005 118.188 612.933 118.228C612.869 118.268 612.809 118.288 612.753 118.288H612.129C612.049 118.288 611.985 118.268 611.937 118.228C611.897 118.18 611.877 118.124 611.877 118.06C611.885 117.756 611.949 117.452 612.069 117.148C612.189 116.836 612.365 116.556 612.597 116.308C612.829 116.06 613.121 115.86 613.473 115.708C613.825 115.548 614.233 115.468 614.697 115.468C615.329 115.468 615.845 115.584 616.245 115.816C616.645 116.04 616.941 116.34 617.133 116.716C617.325 117.092 617.421 117.504 617.421 117.952C617.421 118.304 617.361 118.628 617.241 118.924C617.129 119.212 616.957 119.496 616.725 119.776C616.501 120.048 616.221 120.328 615.885 120.616L613.581 122.956H617.325C617.413 122.956 617.481 122.98 617.529 123.028C617.577 123.076 617.601 123.144 617.601 123.232V123.724C617.601 123.804 617.577 123.872 617.529 123.928C617.481 123.976 617.413 124 617.325 124H612.033ZM619.511 119.8C619.431 119.8 619.363 119.776 619.307 119.728C619.259 119.672 619.235 119.604 619.235 119.524V118.684C619.235 118.604 619.259 118.54 619.307 118.492C619.363 118.436 619.431 118.408 619.511 118.408H620.363C620.451 118.408 620.519 118.436 620.567 118.492C620.623 118.54 620.651 118.604 620.651 118.684V119.524C620.651 119.604 620.623 119.672 620.567 119.728C620.519 119.776 620.451 119.8 620.363 119.8H619.511ZM619.511 124C619.431 124 619.363 123.976 619.307 123.928C619.259 123.872 619.235 123.804 619.235 123.724V122.884C619.235 122.804 619.259 122.74 619.307 122.692C619.363 122.636 619.431 122.608 619.511 122.608H620.363C620.451 122.608 620.519 122.636 620.567 122.692C620.623 122.74 620.651 122.804 620.651 122.884V123.724C620.651 123.804 620.623 123.872 620.567 123.928C620.519 123.976 620.451 124 620.363 124H619.511ZM625.185 124.12C624.633 124.12 624.165 124.036 623.781 123.868C623.405 123.692 623.097 123.452 622.857 123.148C622.617 122.844 622.441 122.496 622.329 122.104C622.225 121.712 622.161 121.296 622.137 120.856C622.137 120.64 622.133 120.412 622.125 120.172C622.125 119.932 622.125 119.692 622.125 119.452C622.133 119.204 622.137 118.968 622.137 118.744C622.153 118.304 622.217 117.888 622.329 117.496C622.449 117.096 622.625 116.748 622.857 116.452C623.097 116.148 623.405 115.912 623.781 115.744C624.165 115.568 624.633 115.48 625.185 115.48C625.737 115.48 626.201 115.568 626.577 115.744C626.961 115.912 627.273 116.148 627.513 116.452C627.753 116.748 627.929 117.096 628.041 117.496C628.153 117.888 628.217 118.304 628.233 118.744C628.241 118.968 628.245 119.204 628.245 119.452C628.245 119.692 628.245 119.932 628.245 120.172C628.245 120.412 628.241 120.64 628.233 120.856C628.217 121.296 628.153 121.712 628.041 122.104C627.929 122.496 627.753 122.844 627.513 123.148C627.281 123.452 626.973 123.692 626.589 123.868C626.205 124.036 625.737 124.12 625.185 124.12ZM625.185 123.1C625.809 123.1 626.269 122.896 626.565 122.488C626.861 122.072 627.017 121.508 627.033 120.796C627.041 120.564 627.045 120.34 627.045 120.124C627.053 119.9 627.053 119.68 627.045 119.464C627.045 119.24 627.041 119.02 627.033 118.804C627.017 118.108 626.861 117.552 626.565 117.136C626.269 116.712 625.809 116.5 625.185 116.5C624.569 116.5 624.109 116.712 623.805 117.136C623.509 117.552 623.353 118.108 623.337 118.804C623.337 119.02 623.333 119.24 623.325 119.464C623.325 119.68 623.325 119.9 623.325 120.124C623.333 120.34 623.337 120.564 623.337 120.796C623.353 121.508 623.509 122.072 623.805 122.488C624.109 122.896 624.569 123.1 625.185 123.1ZM632.615 124.12C632.063 124.12 631.595 124.036 631.211 123.868C630.835 123.692 630.527 123.452 630.287 123.148C630.047 122.844 629.871 122.496 629.759 122.104C629.655 121.712 629.591 121.296 629.567 120.856C629.567 120.64 629.563 120.412 629.555 120.172C629.555 119.932 629.555 119.692 629.555 119.452C629.563 119.204 629.567 118.968 629.567 118.744C629.583 118.304 629.647 117.888 629.759 117.496C629.879 117.096 630.055 116.748 630.287 116.452C630.527 116.148 630.835 115.912 631.211 115.744C631.595 115.568 632.063 115.48 632.615 115.48C633.167 115.48 633.631 115.568 634.007 115.744C634.391 115.912 634.703 116.148 634.943 116.452C635.183 116.748 635.359 117.096 635.471 117.496C635.583 117.888 635.647 118.304 635.663 118.744C635.671 118.968 635.675 119.204 635.675 119.452C635.675 119.692 635.675 119.932 635.675 120.172C635.675 120.412 635.671 120.64 635.663 120.856C635.647 121.296 635.583 121.712 635.471 122.104C635.359 122.496 635.183 122.844 634.943 123.148C634.711 123.452 634.403 123.692 634.019 123.868C633.635 124.036 633.167 124.12 632.615 124.12ZM632.615 123.1C633.239 123.1 633.699 122.896 633.995 122.488C634.291 122.072 634.447 121.508 634.463 120.796C634.471 120.564 634.475 120.34 634.475 120.124C634.483 119.9 634.483 119.68 634.475 119.464C634.475 119.24 634.471 119.02 634.463 118.804C634.447 118.108 634.291 117.552 633.995 117.136C633.699 116.712 633.239 116.5 632.615 116.5C631.999 116.5 631.539 116.712 631.235 117.136C630.939 117.552 630.783 118.108 630.767 118.804C630.767 119.02 630.763 119.24 630.755 119.464C630.755 119.68 630.755 119.9 630.755 120.124C630.763 120.34 630.767 120.564 630.767 120.796C630.783 121.508 630.939 122.072 631.235 122.488C631.539 122.896 631.999 123.1 632.615 123.1ZM640.598 124C640.51 124 640.442 123.976 640.394 123.928C640.346 123.872 640.322 123.804 640.322 123.724V115.888C640.322 115.8 640.346 115.732 640.394 115.684C640.442 115.628 640.51 115.6 640.598 115.6H643.646C644.238 115.6 644.75 115.696 645.182 115.888C645.622 116.08 645.962 116.368 646.202 116.752C646.442 117.128 646.562 117.6 646.562 118.168C646.562 118.736 646.442 119.208 646.202 119.584C645.962 119.96 645.622 120.244 645.182 120.436C644.75 120.628 644.238 120.724 643.646 120.724H641.522V123.724C641.522 123.804 641.494 123.872 641.438 123.928C641.39 123.976 641.322 124 641.234 124H640.598ZM641.51 119.716H643.586C644.178 119.716 644.622 119.584 644.918 119.32C645.214 119.056 645.362 118.672 645.362 118.168C645.362 117.672 645.218 117.288 644.93 117.016C644.642 116.744 644.194 116.608 643.586 116.608H641.51V119.716ZM648.297 124C648.217 124 648.149 123.976 648.093 123.928C648.045 123.872 648.021 123.804 648.021 123.724V115.888C648.021 115.8 648.045 115.732 648.093 115.684C648.149 115.628 648.217 115.6 648.297 115.6H648.897C648.993 115.6 649.065 115.624 649.113 115.672C649.161 115.72 649.189 115.76 649.197 115.792L651.741 120.64L654.297 115.792C654.313 115.76 654.341 115.72 654.381 115.672C654.429 115.624 654.501 115.6 654.597 115.6H655.185C655.273 115.6 655.341 115.628 655.389 115.684C655.445 115.732 655.473 115.8 655.473 115.888V123.724C655.473 123.804 655.445 123.872 655.389 123.928C655.341 123.976 655.273 124 655.185 124H654.597C654.517 124 654.449 123.976 654.393 123.928C654.345 123.872 654.321 123.804 654.321 123.724V117.82L652.317 121.732C652.285 121.812 652.237 121.876 652.173 121.924C652.109 121.964 652.029 121.984 651.933 121.984H651.561C651.457 121.984 651.373 121.964 651.309 121.924C651.253 121.876 651.205 121.812 651.165 121.732L649.161 117.82V123.724C649.161 123.804 649.133 123.872 649.077 123.928C649.029 123.976 648.965 124 648.885 124H648.297Z"
            fill="#80708F"
          />
          <path
            d="M877.728 105V109"
            stroke="#3A115F"
            strokeOpacity="0.14"
            strokeWidth="1.5"
            strokeMiterlimit="10"
            strokeLinecap="round"
          />
          <path
            d="M859.764 124C859.684 124 859.616 123.976 859.56 123.928C859.512 123.872 859.488 123.804 859.488 123.724V121.996H855.6C855.52 121.996 855.452 121.972 855.396 121.924C855.348 121.868 855.324 121.8 855.324 121.72V121.24C855.324 121.208 855.332 121.16 855.348 121.096C855.372 121.024 855.408 120.952 855.456 120.88L859.056 115.804C859.16 115.668 859.308 115.6 859.5 115.6H860.364C860.452 115.6 860.52 115.628 860.568 115.684C860.616 115.732 860.64 115.796 860.64 115.876V120.952H861.732C861.812 120.952 861.876 120.98 861.924 121.036C861.98 121.084 862.008 121.148 862.008 121.228V121.72C862.008 121.8 861.98 121.868 861.924 121.924C861.876 121.972 861.812 121.996 861.732 121.996H860.64V123.724C860.64 123.804 860.616 123.872 860.568 123.928C860.52 123.976 860.452 124 860.364 124H859.764ZM856.608 120.976H859.512V116.86L856.608 120.976ZM863.498 119.8C863.418 119.8 863.35 119.776 863.294 119.728C863.246 119.672 863.222 119.604 863.222 119.524V118.684C863.222 118.604 863.246 118.54 863.294 118.492C863.35 118.436 863.418 118.408 863.498 118.408H864.35C864.438 118.408 864.506 118.436 864.554 118.492C864.61 118.54 864.638 118.604 864.638 118.684V119.524C864.638 119.604 864.61 119.672 864.554 119.728C864.506 119.776 864.438 119.8 864.35 119.8H863.498ZM863.498 124C863.418 124 863.35 123.976 863.294 123.928C863.246 123.872 863.222 123.804 863.222 123.724V122.884C863.222 122.804 863.246 122.74 863.294 122.692C863.35 122.636 863.418 122.608 863.498 122.608H864.35C864.438 122.608 864.506 122.636 864.554 122.692C864.61 122.74 864.638 122.804 864.638 122.884V123.724C864.638 123.804 864.61 123.872 864.554 123.928C864.506 123.976 864.438 124 864.35 124H863.498ZM869.172 124.12C868.62 124.12 868.152 124.036 867.768 123.868C867.392 123.692 867.084 123.452 866.844 123.148C866.604 122.844 866.428 122.496 866.316 122.104C866.212 121.712 866.148 121.296 866.124 120.856C866.124 120.64 866.12 120.412 866.112 120.172C866.112 119.932 866.112 119.692 866.112 119.452C866.12 119.204 866.124 118.968 866.124 118.744C866.14 118.304 866.204 117.888 866.316 117.496C866.436 117.096 866.612 116.748 866.844 116.452C867.084 116.148 867.392 115.912 867.768 115.744C868.152 115.568 868.62 115.48 869.172 115.48C869.724 115.48 870.188 115.568 870.564 115.744C870.948 115.912 871.26 116.148 871.5 116.452C871.74 116.748 871.916 117.096 872.028 117.496C872.14 117.888 872.204 118.304 872.22 118.744C872.228 118.968 872.232 119.204 872.232 119.452C872.232 119.692 872.232 119.932 872.232 120.172C872.232 120.412 872.228 120.64 872.22 120.856C872.204 121.296 872.14 121.712 872.028 122.104C871.916 122.496 871.74 122.844 871.5 123.148C871.268 123.452 870.96 123.692 870.576 123.868C870.192 124.036 869.724 124.12 869.172 124.12ZM869.172 123.1C869.796 123.1 870.256 122.896 870.552 122.488C870.848 122.072 871.004 121.508 871.02 120.796C871.028 120.564 871.032 120.34 871.032 120.124C871.04 119.9 871.04 119.68 871.032 119.464C871.032 119.24 871.028 119.02 871.02 118.804C871.004 118.108 870.848 117.552 870.552 117.136C870.256 116.712 869.796 116.5 869.172 116.5C868.556 116.5 868.096 116.712 867.792 117.136C867.496 117.552 867.34 118.108 867.324 118.804C867.324 119.02 867.32 119.24 867.312 119.464C867.312 119.68 867.312 119.9 867.312 120.124C867.32 120.34 867.324 120.564 867.324 120.796C867.34 121.508 867.496 122.072 867.792 122.488C868.096 122.896 868.556 123.1 869.172 123.1ZM876.602 124.12C876.05 124.12 875.582 124.036 875.198 123.868C874.822 123.692 874.514 123.452 874.274 123.148C874.034 122.844 873.858 122.496 873.746 122.104C873.642 121.712 873.578 121.296 873.554 120.856C873.554 120.64 873.55 120.412 873.542 120.172C873.542 119.932 873.542 119.692 873.542 119.452C873.55 119.204 873.554 118.968 873.554 118.744C873.57 118.304 873.634 117.888 873.746 117.496C873.866 117.096 874.042 116.748 874.274 116.452C874.514 116.148 874.822 115.912 875.198 115.744C875.582 115.568 876.05 115.48 876.602 115.48C877.154 115.48 877.618 115.568 877.994 115.744C878.378 115.912 878.69 116.148 878.93 116.452C879.17 116.748 879.346 117.096 879.458 117.496C879.57 117.888 879.634 118.304 879.65 118.744C879.658 118.968 879.662 119.204 879.662 119.452C879.662 119.692 879.662 119.932 879.662 120.172C879.662 120.412 879.658 120.64 879.65 120.856C879.634 121.296 879.57 121.712 879.458 122.104C879.346 122.496 879.17 122.844 878.93 123.148C878.698 123.452 878.39 123.692 878.006 123.868C877.622 124.036 877.154 124.12 876.602 124.12ZM876.602 123.1C877.226 123.1 877.686 122.896 877.982 122.488C878.278 122.072 878.434 121.508 878.45 120.796C878.458 120.564 878.462 120.34 878.462 120.124C878.47 119.9 878.47 119.68 878.462 119.464C878.462 119.24 878.458 119.02 878.45 118.804C878.434 118.108 878.278 117.552 877.982 117.136C877.686 116.712 877.226 116.5 876.602 116.5C875.986 116.5 875.526 116.712 875.222 117.136C874.926 117.552 874.77 118.108 874.754 118.804C874.754 119.02 874.75 119.24 874.742 119.464C874.742 119.68 874.742 119.9 874.742 120.124C874.75 120.34 874.754 120.564 874.754 120.796C874.77 121.508 874.926 122.072 875.222 122.488C875.526 122.896 875.986 123.1 876.602 123.1ZM884.585 124C884.497 124 884.429 123.976 884.381 123.928C884.333 123.872 884.309 123.804 884.309 123.724V115.888C884.309 115.8 884.333 115.732 884.381 115.684C884.429 115.628 884.497 115.6 884.585 115.6H887.633C888.225 115.6 888.737 115.696 889.169 115.888C889.609 116.08 889.949 116.368 890.189 116.752C890.429 117.128 890.549 117.6 890.549 118.168C890.549 118.736 890.429 119.208 890.189 119.584C889.949 119.96 889.609 120.244 889.169 120.436C888.737 120.628 888.225 120.724 887.633 120.724H885.509V123.724C885.509 123.804 885.481 123.872 885.425 123.928C885.377 123.976 885.309 124 885.221 124H884.585ZM885.497 119.716H887.573C888.165 119.716 888.609 119.584 888.905 119.32C889.201 119.056 889.349 118.672 889.349 118.168C889.349 117.672 889.205 117.288 888.917 117.016C888.629 116.744 888.181 116.608 887.573 116.608H885.497V119.716ZM892.284 124C892.204 124 892.136 123.976 892.08 123.928C892.032 123.872 892.008 123.804 892.008 123.724V115.888C892.008 115.8 892.032 115.732 892.08 115.684C892.136 115.628 892.204 115.6 892.284 115.6H892.884C892.98 115.6 893.052 115.624 893.1 115.672C893.148 115.72 893.176 115.76 893.184 115.792L895.728 120.64L898.284 115.792C898.3 115.76 898.328 115.72 898.368 115.672C898.416 115.624 898.488 115.6 898.584 115.6H899.172C899.26 115.6 899.328 115.628 899.376 115.684C899.432 115.732 899.46 115.8 899.46 115.888V123.724C899.46 123.804 899.432 123.872 899.376 123.928C899.328 123.976 899.26 124 899.172 124H898.584C898.504 124 898.436 123.976 898.38 123.928C898.332 123.872 898.308 123.804 898.308 123.724V117.82L896.304 121.732C896.272 121.812 896.224 121.876 896.16 121.924C896.096 121.964 896.016 121.984 895.92 121.984H895.548C895.444 121.984 895.36 121.964 895.296 121.924C895.24 121.876 895.192 121.812 895.152 121.732L893.148 117.82V123.724C893.148 123.804 893.12 123.872 893.064 123.928C893.016 123.976 892.952 124 892.872 124H892.284Z"
            fill="#80708F"
          />
          <defs>
            <linearGradient
              id="paint0_linear_1203_12346"
              x1="576.49"
              y1="107.875"
              x2="576.49"
              y2="69.1993"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#80708F" stopOpacity="0" />
              <stop offset="1" stopColor="#80708F" stopOpacity="0.2" />
            </linearGradient>
          </defs>
        </svg>
      </ChartContainer>
      <FormStack>
        <DetectSection />
        <AssignSection />
        <PrioritizeSection />
        <ResolveSection />
        <AutomateSection />
      </FormStack>
    </Form>
  );
}

function ResolveSection() {
  const kind = useFormField<MetricDetectorKind>('kind')!;

  return (
    <Container>
      <Section
        title={t('Resolve')}
        description={
          kind === 'dynamic'
            ? t(
                'Sentry will automatically resolve the issue when the trend goes back to baseline.'
              )
            : undefined
        }
      >
        {kind !== 'dynamic' && (
          <ThresholdField
            flexibleControlStateSize
            inline={false}
            label={t('Close an incident when the value dips below:')}
            placeholder="0"
            name="resolve_threshold"
            suffix="s"
          />
        )}
      </Section>
    </Container>
  );
}

function AutomateSection() {
  // const {openDrawer, isDrawerOpen} = useDrawer();
  // const showDetails = () => {}
  return (
    <Container>
      <Section title={t('Automate')} description={t('Set up alerts or notifications.')}>
        <Button
          size="md"
          style={{width: 'min-content'}}
          priority="primary"
          icon={<IconAdd />}
        >
          Connect Automations
        </Button>
      </Section>
    </Container>
  );
}

function AssignSection() {
  return (
    <Container>
      <Section title={t('Assign')}>
        <OwnerField />
      </Section>
    </Container>
  );
}

function PrioritizeSection() {
  const kind = useFormField<MetricDetectorKind>('kind')!;
  return (
    <Container>
      <Section
        title={t('Prioritize')}
        description={
          kind === 'dynamic'
            ? t('Sentry will automatically update priority.')
            : t('Update issue priority when the following thresholds are met:')
        }
      >
        {kind !== 'dynamic' && <PriorityControl name="prioritize" />}
      </Section>
    </Container>
  );
}

function DetectSection() {
  const kind = useFormField<MetricDetectorKind>('kind')!;
  const aggregateOptions: Array<[string, string]> = useMemo(() => {
    return ALLOWED_EXPLORE_VISUALIZE_AGGREGATES.map(aggregate => {
      return [aggregate, aggregate];
    });
  }, []);

  return (
    <Container>
      <Section
        title={t('Detect')}
        description={t('Sentry will check the following query:')}
      >
        <FirstRow>
          <DetectColumn style={{maxWidth: 500}} gap={space(1)}>
            <VisualizeField
              placeholder={t('Metric')}
              flexibleControlStateSize
              inline={false}
              label="Visualize"
              name="visualize"
              choices={[['span.duration', 'span.duration']]}
              defaultValue="span.duration"
            />
            <AggregateField
              placeholder={t('aggregate')}
              flexibleControlStateSize
              defaultValue={'p75'}
              name="aggregate"
              choices={aggregateOptions}
            />
          </DetectColumn>
          <DetectColumn>
            <FilterField />
          </DetectColumn>
        </FirstRow>
        <MonitorKindField
          label="...and monitor for changes in the following way:"
          flexibleControlStateSize
          inline={false}
          name="kind"
          defaultValue="threshold"
          choices={[
            [
              'threshold',
              t('Threshold'),
              t('Absolute-valued thresholds, for non-seasonal data.'),
            ],
            ['change', t('Change'), t('Percentage changes over defined time windows.')],
            [
              'dynamic',
              t('Dynamic'),
              t('Auto-detect anomalies and mean deviation, for seasonal/noisy data.'),
            ],
          ]}
        />
        {kind !== 'dynamic' && (
          <Flex column>
            {(!kind || kind === 'threshold') && (
              <Flex column>
                <MutedText>An issue will be created when query value exceeds:</MutedText>
                <ThresholdField
                  flexibleControlStateSize
                  inline={false}
                  hideLabel
                  placeholder="0"
                  name="config.low_threshold"
                  suffix="s"
                />
              </Flex>
            )}
            {kind === 'change' && (
              <Flex column>
                <MutedText>An issue will be created when query value is:</MutedText>
                <Flex align="center" gap={space(1)}>
                  <ChangePercentField
                    name="config.low_threshold.change"
                    placeholder="0"
                    hideLabel
                    inline
                  />
                  <span>percent</span>
                  <DirectionField
                    name="config.low_threshold.direction"
                    hideLabel
                    inline
                    defaultValue="higher"
                    flexibleControlStateSize
                    choices={[
                      ['higher', t('higher')],
                      ['lower', t('lower')],
                    ]}
                  />
                  <span>than the previous</span>
                  <StyledSelectField
                    name="config.low_threshold.unit"
                    hideLabel
                    inline
                    defaultValue="1 hour"
                    flexibleControlStateSize
                    choices={[
                      ['5 minutes', '5 minutes'],
                      ['15 minutes', '15 minutes'],
                      ['1 hour', '1 hour'],
                      ['1 day', '1 day'],
                      ['1 week', '1 week'],
                      ['1 month', '1 month'],
                    ]}
                  />
                </Flex>
              </Flex>
            )}
          </Flex>
        )}
      </Section>
    </Container>
  );
}

function OwnerField() {
  return (
    <StyledMemberTeamSelectorField
      placeholder={t('Select a member or team')}
      label={t('Owner')}
      help={t('Sentry will assign new issues to this owner.')}
      name="owner"
      flexibleControlStateSize
    />
  );
}

const FormStack = styled(Flex)`
  max-width: ${p => p.theme.breakpoints.xlarge};
  flex-direction: column;
  gap: ${space(4)};
  padding: ${space(4)};
`;

const FirstRow = styled('div')`
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: ${space(1)};
  border-bottom: 1px solid ${p => p.theme.border};
`;

const DetectColumn = styled(Flex)`
  flex-grow: 1;
`;

const StyledSelectField = styled(SelectField)`
  width: 180px;
  padding: 0;
  margin: 0;

  > div {
    padding-left: 0;
  }
`;

const StyledMemberTeamSelectorField = styled(SentryMemberTeamSelectorField)`
  padding-left: 0;
`;

const VisualizeField = styled(SelectField)`
  flex: 2;
  padding-left: 0;
  padding-right: 0;
  margin-left: 0;
  border-bottom: none;
`;

const ChartContainer = styled('div')`
  background: ${p => p.theme.background};
  width: 100%;
  border-bottom: 1px solid ${p => p.theme.border};
  padding: 24px 32px 16px 32px;
`;

const AggregateField = styled(SelectField)`
  width: 120px;
  margin-top: auto;
  padding-top: 0;
  padding-left: 0;
  padding-right: 0;

  > div {
    padding-left: 0;
  }
`;

const DirectionField = styled(SelectField)`
  width: 16ch;
  padding: 0;
  margin: 0;

  > div {
    padding-left: 0;
  }
`;

const MonitorKindField = styled(SegmentedRadioField)`
  padding-left: 0;
  padding-block: ${space(1)};
  border-bottom: 1px solid ${p => p.theme.border};
  max-width: 840px;

  > div {
    padding: 0;
  }
`;
const ThresholdField = styled(NumberField)`
  padding: 0;
  margin: 0;
  border: none;

  > div {
    padding: 0;
    width: 10ch;
  }
`;

const ChangePercentField = styled(NumberField)`
  padding: 0;
  margin: 0;
  border: none;

  > div {
    padding: 0;
    max-width: 10ch;
  }
`;

const MutedText = styled('p')`
  color: ${p => p.theme.text};
  padding-top: ${space(1)};
  margin-bottom: ${space(1)};
  border-top: 1px solid ${p => p.theme.border};
`;

function FilterField() {
  return (
    <Flex column gap={space(0.5)} style={{paddingTop: 16, flex: 1}}>
      <span>Filter</span>
      <SearchQueryBuilder
        initialQuery=""
        filterKeySections={FILTER_KEY_SECTIONS}
        filterKeys={FILTER_KEYS}
        getTagValues={getTagValues}
        searchSource="storybook"
      />
    </Flex>
  );
}

const getTagValues = (): Promise<string[]> => {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve(['foo', 'bar', 'baz']);
    }, 500);
  });
};

const FILTER_KEYS: TagCollection = {
  [FieldKey.ASSIGNED]: {
    key: FieldKey.ASSIGNED,
    name: 'Assigned To',
    kind: FieldKind.FIELD,
    predefined: true,
    values: [
      {
        title: 'Suggested',
        type: 'header',
        icon: null,
        children: [{value: 'me'}, {value: 'unassigned'}],
      },
      {
        title: 'All',
        type: 'header',
        icon: null,
        children: [{value: 'person1@sentry.io'}, {value: 'person2@sentry.io'}],
      },
    ],
  },
  [FieldKey.BROWSER_NAME]: {
    key: FieldKey.BROWSER_NAME,
    name: 'Browser Name',
    kind: FieldKind.FIELD,
    predefined: true,
    values: ['Chrome', 'Firefox', 'Safari', 'Edge', 'Internet Explorer', 'Opera 1,2'],
  },
  [FieldKey.IS]: {
    key: FieldKey.IS,
    name: 'is',
    predefined: true,
    values: ['resolved', 'unresolved', 'ignored'],
  },
  [FieldKey.LAST_SEEN]: {
    key: FieldKey.LAST_SEEN,
    name: 'lastSeen',
    kind: FieldKind.FIELD,
  },
  [FieldKey.TIMES_SEEN]: {
    key: FieldKey.TIMES_SEEN,
    name: 'timesSeen',
    kind: FieldKind.FIELD,
  },
  [WebVital.LCP]: {
    key: WebVital.LCP,
    name: 'lcp',
    kind: FieldKind.FIELD,
  },
  [MobileVital.FRAMES_SLOW_RATE]: {
    key: MobileVital.FRAMES_SLOW_RATE,
    name: 'framesSlowRate',
    kind: FieldKind.FIELD,
  },
  custom_tag_name: {
    key: 'custom_tag_name',
    name: 'Custom_Tag_Name',
  },
};

const FILTER_KEY_SECTIONS: FilterKeySection[] = [
  {
    value: 'cat_1',
    label: 'Category 1',
    children: [FieldKey.ASSIGNED, FieldKey.IS],
  },
  {
    value: 'cat_2',
    label: 'Category 2',
    children: [WebVital.LCP, MobileVital.FRAMES_SLOW_RATE],
  },
  {
    value: 'cat_3',
    label: 'Category 3',
    children: [FieldKey.TIMES_SEEN],
  },
];
