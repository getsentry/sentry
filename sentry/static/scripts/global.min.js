function varToggle(a,b){$("#v"+b).toggle();var c=a.getElementsByTagName("span")[0],d=String.fromCharCode(9654),e=String.fromCharCode(9660);return c.innerHTML=c.innerHTML==d?e:d,!1}function getQueryParams(){var a={},b,c=window.location.href,d=c.slice(c.indexOf("?")+1,c.indexOf("#")!==-1?c.indexOf("#"):c.length).split("&");for(var e=0;e<d.length;e++)b=d[e].split("="),a[b[0]]=b[1];return a}(function(){var a=function(a,b){return b.priority-a.priority},b=function(a,b){return a.priority-b.priority};Queue=function(c){var d=[],e=!1,f;c===undefined&&(c={}),c.low?f=a:c.high&&(f=b);var g=function(){d.sort(f),e=!0},h={pop:function(){!e&&f&&g();var a=d.pop();return a?a.object:undefined},top:function(){e||g();var a=d[d.length-1];return a?a.object:undefined},includes:function(a){for(var b=d.length-1;b>=0;b--)if(d[b].object===a)return!0;return!1},replace:function(a,b,c){for(var e=d.length-1;e>=0;e--)if(d[e].object[c]===a[c])return d[e]={object:a,priority:b},!0;return h.push(a,b),!1},size:function(){return d.length},empty:function(){return d.length===0},push:function(a,b){d.push({object:a,priority:b}),e=!1}};return h}})(),function(a,b){var c=a.parse,d=[1,4,5,6,7,10,11];a.parse=function(e){var f,g,h=0;if(g=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(e)){for(var i=0,j;j=d[i];++i)g[j]=+g[j]||0;g[2]=(+g[2]||1)-1,g[3]=+g[3]||1,g[8]!=="Z"&&g[9]!==b&&(h=g[10]*60+g[11],g[9]==="+"&&(h=0-h)),f=a.UTC(g[1],g[2],g[3],g[4],g[5]+h,g[6],g[7])}else f=c?c(e):NaN;return f}}(Date);if(Sentry===undefined)var Sentry={};(function(){Sentry.options={urlPrefix:"",mediaUrl:"/media/",defaultImage:"/media/images/sentry.png"},Sentry.config=function(a){$.each(a,function(a,b){Sentry.options[a]=b})},Sentry.prettyDate=function(a){var b=Date.parse(a),c=new Date,d=Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds()),e=(d-b)/1e3,f="ago",g=[[60,"just now","just now"],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"yesterday","tomorrow"],[604800,"days",86400],[1209600,"last week","next week"],[2419200,"weeks",604800],[4838400,"last month","next month"],[29030400,"months",2419200],[58060800,"last year","next year"],[290304e4,"years",29030400],[580608e4,"last century","next century"],[580608e5,"centuries",290304e4]],h=1;e<0&&(e=Math.abs(e),f="from now",h=2);for(var i=0,j;j=g[i];i++)if(e<j[0])return typeof j[2]=="string"?j[h]:Math.floor(e/j[2])+" "+j[1]+" "+f;return b},Sentry.prettyDates=function(){$(".pretty-date").each(function(a,b){var c=$(b),d=c.attr("title");if(d){var e=Sentry.prettyDate(d);e&&c.text(e)}})},$(document).ready(function(){$(".filter-list").each(function(a,b){var c=$(b);if(c.find("li").length>6){var d=$("<select></select>"),e=$('<div class="filter-select sidebar-module">').appendTo(c.parent());c.find("li a").each(function(a,b){b=$(b);var c=$('<option value="'+b.attr("href")+'">'+b.text()+"</option>").appendTo(d);b.parent().hasClass("active")&&c.attr("selected","selected")}),c.remove(),d.appendTo(e).change(function(){window.location.href=$(this).val()})}}),setInterval(Sentry.prettyDates,5e3),Sentry.prettyDates()}),$(document).ajaxSend(function(a,b,c){function d(a){var b=null;if(document.cookie&&document.cookie!==""){var c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=jQuery.trim(c[d]);if(e.substring(0,a.length+1)==a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}}return b}function e(a){var b=document.location.host,c=document.location.protocol,d="//"+b,e=c+d;return a==e||a.slice(0,e.length+1)==e+"/"||a==d||a.slice(0,d.length+1)==d+"/"||!/^(\/\/|http:|https:).*/.test(a)}function f(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}!f(c.type)&&e(c.url)&&b.setRequestHeader("X-CSRFToken",d("csrftoken"))}),$(".popup").live("click",function(){var a=$(this),b=$(window),c=$(a.attr("data-container")),d=a.attr("data-title")||"Untitled",e=c.html(),f=Math.min(b.height()-100,c.height()+40),g=Math.min(b.width()-100,c.width()+40),h=window.open("about:blank","dsqApiExpand","toolbar=0,status=0,location=0,menubar=0,height="+f+",width="+g);h.document.write("<!DOCTYPE html><html><head><title>"+d+"</title>"+'<link href="'+Sentry.options.popupCss+'" rel="stylesheet" type="text/css"/>'+"</head><body>"+'<div id="popup">'+e+"</div></body>"+"</html>")})})();if(Sentry===undefined)var Sentry={};(function(){function a(a,b,c){for(var d=0,e;e=a[d];d++)if(b>e[c])return d;return-1}function b(a,b,c){for(var d=0,e;e=a[d];d++)if(b==e[c])return d;return-1}Sentry.realtime={},Sentry.realtime.options={viewId:null,projectId:null},Sentry.realtime.status=!1,Sentry.realtime.queue=Queue({high:!0}),Sentry.realtime.init=function(){var a=[];$("#event_list .event").each(function(b,c){var d=$(c);a.push([d.attr("data-score"),d.attr("id")])}),Sentry.realtime.events=a,$("#sentry-realtime").click(function(){Sentry.realtime.status?Sentry.realtime.disable():Sentry.realtime.enable()}),Sentry.realtime.poll(),setInterval(Sentry.realtime.tick,300)},Sentry.realtime.config=function(a){$.each(a,function(a,b){Sentry.realtime.options[a]=b})},Sentry.realtime.toggle=function(){Sentry.realtime.status?Sentry.realtime.enable():Sentry.realtime.disable()},Sentry.realtime.enable=function(){var a=$("#sentry-realtime");a.removeClass("realtime-play"),a.addClass("realtime-pause"),a.text("Pause Feed"),Sentry.realtime.status=!0},Sentry.realtime.disable=function(){var a=$("#sentry-realtime");a.addClass("realtime-play"),a.removeClass("realtime-pause"),a.text("Go Live"),Sentry.realtime.status=!1},Sentry.realtime.tick=function(){if(Sentry.realtime.queue.empty())return;var c=Sentry.realtime.queue.pop(),d="group_"+c.id,e=$("#"+d),f=e.length===0;$("#no_messages").remove(),Sentry.realtime.events.sort(function(a,b){return b[0]-a[0]});if(!f&&e.attr("data-count")==c.count)return;e=$(c.html),pos=a(Sentry.realtime.events,c.score,0),old_pos=b(Sentry.realtime.events,d,1);if(old_pos!==-1){Sentry.realtime.events[old_pos][0]=c.score;if(old_pos==pos)return;e.remove()}else f||e.remove();pos===-1?$("#event_list").append(e):$("#"+Sentry.realtime.events[pos][1]).before(e),f&&Sentry.realtime.events.splice(pos,0,[c.score,d]),e.css("background-color","#ddd").animate({backgroundColor:"#fff"},1200)},Sentry.realtime.poll=function(){if(!Sentry.realtime.status)return;data=getQueryParams(),data.view_id=Sentry.realtime.options.viewId||undefined,data.cursor=Sentry.realtime.cursor||undefined,$.ajax({url:Sentry.options.urlPrefix+"/api/"+Sentry.realtime.options.projectId+"/poll/",type:"get",dataType:"json",data:data,success:function(a){if(!a.length){setTimeout(Sentry.realtime.poll,5e3);return}Sentry.realtime.cursor=a[0].score||undefined,$(a).each(function(a,b){Sentry.realtime.queue.replace(b,b.score,"id")}),setTimeout(Sentry.realtime.poll,1e3)}});while(Sentry.realtime.events.length>50){var a=Sentry.realtime.events.pop();$("#"+a[1]).remove()}},$(document).ready(function(){Sentry.realtime.init()})})();if(Sentry===undefined)var Sentry={};(function(){Sentry.charts={},Sentry.charts.render=function(a,b,c,d){var e=$(a);if(e.length<1)return;$.ajax({url:Sentry.options.urlPrefix+"/api/"+b+"/chart/",type:"get",dataType:"json",data:{days:1,gid:c||undefined},success:function(a){var b=(new Date).getTime()-a.length*36e5,c=[];for(var f=0;f<a.length;f++)c.push([b+36e5*f,a[f]]);e.height(e.parent().height()),$.plot(e,[{data:c,color:"#3079d0",shadowSize:0,lines:{lineWidth:1,show:!0,fill:!0}}],{xaxis:{mode:"time"},grid:{show:d||!1,borderColor:"#dddddd",borderWidth:1,backgroundColor:"#F5F5F5"},lines:{show:!1}})}})}})();if(Sentry===undefined)var Sentry={};(function(){Sentry.notifications={},Sentry.notifications.status=!1,Sentry.notifications.enable=function(){window.webkitNotifications.requestPermission(function(){Sentry.notifications.status=!0,Sentry.notifications.show({type:"simple",title:"Sentry",body:"Notifications have been enabled."}),$("#sentry_notify").text("Disable Notifications")})},Sentry.notifications.disable=function(){Sentry.notifications.status=!1,$("#sentry_notify").text("Enable Notifications")},Sentry.notifications.show=function(a){if(!Sentry.notifications.status)return;var b;a.type=="html"?b=window.webkitNotifications.createHTMLNotification(a.url):b=window.webkitNotifications.createNotification(a.image||Sentry.options.defaultImage,a.title,a.body),b.ondisplay=function(){setTimeout(function(){b.cancel()},1e4)},b.show()},$(document).ready(function(){window.webkitNotifications&&(Sentry.notifications.status=window.webkitNotifications.checkPermission()>0,$('<li><a id="sentry_notify" href="javascript:void()">'+(Sentry.notifications.status?"Disable Notifications":"Enable Notifications")+"</a></li>").click(function(){Sentry.notifications.status?Sentry.notifications.disable():Sentry.notifications.enable()}).prependTo("#account"))})})();if(Sentry===undefined)var Sentry={};(function(){Sentry.stream={},Sentry.stream.clear=function(a){confirm("Are you sure you want to mark all your stream as resolved?")&&$.ajax({url:Sentry.options.urlPrefix+"/api/"+a+"/clear/",type:"post",dataType:"json",success:function(a){window.location.reload()}})},Sentry.stream.resolve=function(a,b,c){typeof c=="undefined"&&(c=!0),$.ajax({url:Sentry.options.urlPrefix+"/api/"+a+"/resolve/",type:"post",dataType:"json",data:{gid:b},success:function(a){for(var b=a.length-1,d,e;d=a[b];b--){var f=d[0],g=d[1];$("#group_"+f).remove(),c||($("#event_list").prepend(g.html),$("#group_"+f).addClass("fresh"))}}})},Sentry.stream.bookmark=function(a,b,c){$.ajax({url:Sentry.options.urlPrefix+"/api/"+a+"/bookmark/",type:"post",dataType:"json",data:{gid:b},success:function(a){if(!c)return;var b=$(c);a.bookmarked?b.addClass("checked"):b.removeClass("checked")}})}})();